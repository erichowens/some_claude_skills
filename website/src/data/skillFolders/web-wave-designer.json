{
  "name": "web-wave-designer",
  "type": "folder",
  "path": "web-wave-designer",
  "children": [
    {
      "name": "references",
      "type": "folder",
      "path": "web-wave-designer/references",
      "children": [
        {
          "name": "animation-patterns.md",
          "type": "file",
          "path": "web-wave-designer/references/animation-patterns.md",
          "size": 12125,
          "content": "# Animation Patterns for Water Effects\n\n## Animation Strategy Overview\n\nDifferent animation techniques have dramatically different performance profiles:\n\n| Technique | Performance | Smoothness | Control | Best For |\n|-----------|-------------|------------|---------|----------|\n| CSS Transform | Excellent | 60fps | Limited | Layer movement |\n| CSS Opacity | Excellent | 60fps | Limited | Fade effects |\n| requestAnimationFrame | Good | 60fps | Full | Filter param animation |\n| SVG animate | Poor | 30-45fps | Declarative | Simple, set-and-forget |\n| CSS filter animation | Poor | 30fps | Limited | Avoid |\n\n## CSS Transform Animations (Recommended)\n\nMove the water element, not the filter. GPU-accelerated, smooth performance.\n\n### Basic Wave Drift\n\n```css\n.wave-layer {\n  width: 200%;  /* Double width for seamless loop */\n  animation: wave-drift 60s linear infinite;\n  will-change: transform;  /* GPU hint */\n}\n\n@keyframes wave-drift {\n  from { transform: translateX(0); }\n  to { transform: translateX(-50%); }  /* Half of doubled width */\n}\n```\n\n### Multi-Axis Wave Motion\n\n```css\n.wave {\n  animation:\n    wave-drift 60s linear infinite,\n    wave-bob 4s ease-in-out infinite;\n}\n\n@keyframes wave-drift {\n  from { transform: translateX(0) translateY(0); }\n  to { transform: translateX(-50%) translateY(0); }\n}\n\n@keyframes wave-bob {\n  0%, 100% { transform: translateX(var(--x, 0)) translateY(0); }\n  50% { transform: translateX(var(--x, 0)) translateY(-5px); }\n}\n```\n\n### Layer Speed Differentiation\n\n```css\n.wave-back {\n  animation: wave-drift 90s linear infinite;  /* Slow - appears far */\n}\n\n.wave-mid {\n  animation: wave-drift 60s linear infinite;  /* Medium */\n  animation-delay: -15s;  /* Offset start */\n}\n\n.wave-front {\n  animation: wave-drift 35s linear infinite;  /* Fast - appears close */\n  animation-delay: -25s;\n}\n```\n\n### Parallax on Scroll\n\n```javascript\nlet ticking = false;\n\nwindow.addEventListener('scroll', () => {\n  if (!ticking) {\n    requestAnimationFrame(() => {\n      const scrollY = window.scrollY;\n      document.querySelectorAll('.wave').forEach((wave, i) => {\n        const speed = 0.1 + (i * 0.05);  // Different speed per layer\n        wave.style.transform = `translateY(${scrollY * speed}px)`;\n      });\n      ticking = false;\n    });\n    ticking = true;\n  }\n});\n```\n\n## requestAnimationFrame Animation (Best Control)\n\nFor animating filter parameters, rAF provides smooth updates:\n\n### Basic Wave Animation\n\n```javascript\nconst turbulence = document.querySelector('#waterFilter feTurbulence');\nlet frame = 0;\n\nfunction animateWater() {\n  frame += 0.003;\n\n  // Sine wave for smooth oscillation\n  const xFreq = 0.008 + Math.sin(frame) * 0.002;\n  const yFreq = 0.08 + Math.sin(frame * 0.7) * 0.01;\n\n  turbulence.setAttribute('baseFrequency', `${xFreq} ${yFreq}`);\n\n  requestAnimationFrame(animateWater);\n}\n\nanimateWater();\n```\n\n### Complex Multi-Parameter Animation\n\n```javascript\nclass WaterAnimator {\n  constructor(filterId) {\n    this.filter = document.getElementById(filterId);\n    this.turbulence = this.filter.querySelector('feTurbulence');\n    this.displacement = this.filter.querySelector('feDisplacementMap');\n\n    this.frame = 0;\n    this.baseX = 0.008;\n    this.baseY = 0.08;\n    this.baseScale = 25;\n\n    this.animate = this.animate.bind(this);\n  }\n\n  animate() {\n    this.frame += 0.004;\n\n    // Wave frequency oscillation\n    const xFreq = this.baseX + Math.sin(this.frame) * 0.002;\n    const yFreq = this.baseY + Math.sin(this.frame * 0.7) * 0.01;\n    this.turbulence.setAttribute('baseFrequency', `${xFreq} ${yFreq}`);\n\n    // Displacement scale breathing\n    const scale = this.baseScale + Math.sin(this.frame * 0.5) * 5;\n    this.displacement.setAttribute('scale', scale);\n\n    requestAnimationFrame(this.animate);\n  }\n\n  start() {\n    requestAnimationFrame(this.animate);\n  }\n\n  setIntensity(level) {\n    // 0-1 scale\n    this.baseScale = 15 + (level * 20);\n    this.baseY = 0.05 + (level * 0.05);\n  }\n}\n\nconst water = new WaterAnimator('oceanFilter');\nwater.start();\n```\n\n### Performance-Aware Animation\n\n```javascript\nclass AdaptiveWaterAnimator {\n  constructor(filterId) {\n    this.turbulence = document.querySelector(`#${filterId} feTurbulence`);\n    this.frame = 0;\n    this.fps = 60;\n    this.lastFrameTime = performance.now();\n    this.frameCount = 0;\n\n    this.animate = this.animate.bind(this);\n  }\n\n  measureFPS() {\n    const now = performance.now();\n    const delta = now - this.lastFrameTime;\n\n    if (delta >= 1000) {\n      this.fps = this.frameCount;\n      this.frameCount = 0;\n      this.lastFrameTime = now;\n\n      // Adapt quality based on FPS\n      if (this.fps < 30) {\n        this.reduceQuality();\n      } else if (this.fps > 55) {\n        this.increaseQuality();\n      }\n    }\n    this.frameCount++;\n  }\n\n  reduceQuality() {\n    const currentOctaves = parseInt(this.turbulence.getAttribute('numOctaves'));\n    if (currentOctaves > 2) {\n      this.turbulence.setAttribute('numOctaves', currentOctaves - 1);\n      console.log('Water quality reduced to', currentOctaves - 1, 'octaves');\n    }\n  }\n\n  increaseQuality() {\n    const currentOctaves = parseInt(this.turbulence.getAttribute('numOctaves'));\n    if (currentOctaves < 4) {\n      this.turbulence.setAttribute('numOctaves', currentOctaves + 1);\n    }\n  }\n\n  animate() {\n    this.measureFPS();\n    this.frame += 0.003;\n\n    const xFreq = 0.008 + Math.sin(this.frame) * 0.002;\n    const yFreq = 0.08 + Math.sin(this.frame * 0.7) * 0.01;\n    this.turbulence.setAttribute('baseFrequency', `${xFreq} ${yFreq}`);\n\n    requestAnimationFrame(this.animate);\n  }\n}\n```\n\n## SVG animate (Declarative, Use Sparingly)\n\n**Warning**: animating filter parameters via SVG animate causes full filter recalculation every frame. Use only when necessary.\n\n### Basic baseFrequency Animation\n\n```xml\n<feTurbulence type=\"turbulence\" baseFrequency=\"0.008 0.08\" numOctaves=\"3\">\n  <animate\n    attributeName=\"baseFrequency\"\n    dur=\"60s\"\n    keyTimes=\"0;0.5;1\"\n    values=\"0.008 0.08;0.012 0.12;0.008 0.08\"\n    repeatCount=\"indefinite\"\n    calcMode=\"spline\"\n    keySplines=\"0.4 0 0.6 1;0.4 0 0.6 1\"\n  />\n</feTurbulence>\n```\n\n### Seed Animation (Lower Cost)\n\nAnimating seed is less expensive than baseFrequency:\n\n```xml\n<feTurbulence type=\"turbulence\" baseFrequency=\"0.01 0.1\" seed=\"1\">\n  <animate\n    attributeName=\"seed\"\n    dur=\"30s\"\n    values=\"1;10;20;30;40;30;20;10;1\"\n    repeatCount=\"indefinite\"\n  />\n</feTurbulence>\n```\n\n### Multiple Synchronized Animations\n\n```xml\n<filter id=\"syncedWater\">\n  <feTurbulence type=\"turbulence\" baseFrequency=\"0.01 0.1\" result=\"waves\">\n    <animate\n      attributeName=\"baseFrequency\"\n      dur=\"30s\"\n      values=\"0.008 0.08;0.012 0.12;0.008 0.08\"\n      repeatCount=\"indefinite\"\n    />\n  </feTurbulence>\n\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"waves\" scale=\"25\">\n    <animate\n      attributeName=\"scale\"\n      dur=\"30s\"\n      values=\"25;35;25\"\n      repeatCount=\"indefinite\"\n    />\n  </feDisplacementMap>\n</filter>\n```\n\n## GSAP Integration (Best of Both Worlds)\n\n```javascript\n// Install: npm install gsap\n\nimport { gsap } from 'gsap';\n\n// Smooth filter animation\ngsap.to('#waterFilter feTurbulence', {\n  attr: {\n    baseFrequency: '0.012 0.12'\n  },\n  duration: 10,\n  ease: 'sine.inOut',\n  yoyo: true,\n  repeat: -1\n});\n\n// Layer movement\ngsap.to('.wave-layer', {\n  x: '-50%',\n  duration: 60,\n  ease: 'none',\n  repeat: -1\n});\n\n// Interactive water response\ndocument.addEventListener('mousemove', (e) => {\n  const intensity = e.clientY / window.innerHeight;\n\n  gsap.to('#waterFilter feDisplacementMap', {\n    attr: { scale: 15 + (intensity * 20) },\n    duration: 0.5,\n    ease: 'power2.out'\n  });\n});\n```\n\n## Interactive Animations\n\n### Mouse Ripple Effect\n\n```javascript\nclass RippleEffect {\n  constructor(container) {\n    this.container = container;\n    this.ripples = [];\n\n    container.addEventListener('click', (e) => this.addRipple(e));\n    this.animate = this.animate.bind(this);\n    requestAnimationFrame(this.animate);\n  }\n\n  addRipple(event) {\n    const rect = this.container.getBoundingClientRect();\n    const ripple = {\n      x: event.clientX - rect.left,\n      y: event.clientY - rect.top,\n      radius: 0,\n      maxRadius: 200,\n      opacity: 1,\n      speed: 3\n    };\n    this.ripples.push(ripple);\n  }\n\n  animate() {\n    this.ripples = this.ripples.filter(ripple => {\n      ripple.radius += ripple.speed;\n      ripple.opacity = 1 - (ripple.radius / ripple.maxRadius);\n      return ripple.opacity > 0;\n    });\n\n    this.render();\n    requestAnimationFrame(this.animate);\n  }\n\n  render() {\n    // Update displacement based on active ripples\n    const displacement = document.querySelector('#rippleFilter feDisplacementMap');\n    const totalIntensity = this.ripples.reduce((sum, r) => sum + r.opacity * 10, 0);\n    displacement.setAttribute('scale', 20 + totalIntensity);\n  }\n}\n```\n\n### Scroll-Driven Water Intensity\n\n```javascript\nfunction setupScrollWater() {\n  const turbulence = document.querySelector('#waterFilter feTurbulence');\n  const displacement = document.querySelector('#waterFilter feDisplacementMap');\n\n  const observer = new IntersectionObserver((entries) => {\n    entries.forEach(entry => {\n      const ratio = entry.intersectionRatio;\n\n      // More visible = calmer water\n      const xFreq = 0.008 + (1 - ratio) * 0.004;\n      const yFreq = 0.08 + (1 - ratio) * 0.04;\n      const scale = 20 + (1 - ratio) * 15;\n\n      turbulence.setAttribute('baseFrequency', `${xFreq} ${yFreq}`);\n      displacement.setAttribute('scale', scale);\n    });\n  }, { threshold: Array.from({ length: 20 }, (_, i) => i / 20) });\n\n  observer.observe(document.querySelector('.water-section'));\n}\n```\n\n## Reduced Motion Support\n\nAlways respect user preferences:\n\n```css\n@media (prefers-reduced-motion: reduce) {\n  .wave-layer {\n    animation: none !important;\n  }\n\n  .water-effect {\n    /* Use static water texture instead */\n    filter: url(#staticWater);\n  }\n}\n```\n\n```javascript\nconst prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');\n\nfunction setupWaterAnimation() {\n  if (prefersReducedMotion.matches) {\n    // Static water - no animation\n    return;\n  }\n\n  // Full animation\n  const animator = new WaterAnimator('waterFilter');\n  animator.start();\n}\n\n// Listen for preference changes\nprefersReducedMotion.addEventListener('change', () => {\n  location.reload();  // or dynamically toggle\n});\n```\n\n## Animation Timing Functions\n\n### Easing for Natural Motion\n\n```css\n/* Linear - mechanical, constant speed */\nanimation-timing-function: linear;\n\n/* Sine - smooth, natural oscillation (best for waves) */\nanimation-timing-function: cubic-bezier(0.37, 0, 0.63, 1);\n\n/* Ease-in-out - gentle acceleration/deceleration */\nanimation-timing-function: ease-in-out;\n\n/* Custom wave easing */\nanimation-timing-function: cubic-bezier(0.45, 0.05, 0.55, 0.95);\n```\n\n### Multi-Wave Timing\n\n```css\n.wave-1 {\n  animation: drift 60s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n\n.wave-2 {\n  animation: drift 55s cubic-bezier(0.3, 0, 0.7, 1) infinite;\n  animation-delay: -20s;\n}\n\n.wave-3 {\n  animation: drift 45s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  animation-delay: -35s;\n}\n```\n\n## Performance Monitoring\n\n```javascript\nclass WaterPerformanceMonitor {\n  constructor() {\n    this.samples = [];\n    this.maxSamples = 60;\n  }\n\n  recordFrame(duration) {\n    this.samples.push(duration);\n    if (this.samples.length > this.maxSamples) {\n      this.samples.shift();\n    }\n  }\n\n  getAverageFPS() {\n    if (this.samples.length === 0) return 60;\n    const avg = this.samples.reduce((a, b) => a + b) / this.samples.length;\n    return Math.round(1000 / avg);\n  }\n\n  shouldReduceQuality() {\n    return this.getAverageFPS() < 30;\n  }\n\n  shouldIncreaseQuality() {\n    return this.getAverageFPS() > 55;\n  }\n}\n\n// Usage\nconst monitor = new WaterPerformanceMonitor();\nlet lastTime = performance.now();\n\nfunction animate() {\n  const now = performance.now();\n  monitor.recordFrame(now - lastTime);\n  lastTime = now;\n\n  if (monitor.shouldReduceQuality()) {\n    // Reduce octaves, scale, or animation complexity\n  }\n\n  // ... animation code ...\n\n  requestAnimationFrame(animate);\n}\n```\n"
        },
        {
          "name": "displacement-and-color.md",
          "type": "file",
          "path": "web-wave-designer/references/displacement-and-color.md",
          "size": 9976,
          "content": "# feDisplacementMap and Color Techniques for Water\n\n## feDisplacementMap: The Refraction Engine\n\nThe displacement map creates the \"light bending through water\" effect by shifting pixels based on a noise pattern.\n\n### Core Formula\n\nFor each pixel at position (x, y):\n```\nnewX = x + scale * (channelValue - 0.5)\nnewY = y + scale * (channelValue - 0.5)\n```\n\nWhere `channelValue` is the value (0-1) of the selected color channel in the noise.\n\n### Parameters Deep Dive\n\n```xml\n<feDisplacementMap\n  in=\"SourceGraphic\"     <!-- What gets distorted -->\n  in2=\"waves\"            <!-- The distortion pattern -->\n  scale=\"25\"             <!-- Distortion intensity -->\n  xChannelSelector=\"R\"   <!-- Which channel moves X -->\n  yChannelSelector=\"G\"   <!-- Which channel moves Y -->\n/>\n```\n\n### Scale Values for Water Types\n\n| Scale | Effect | Water Type |\n|-------|--------|------------|\n| 5-10 | Subtle shimmer | Glass, light refraction |\n| 10-15 | Gentle ripples | Calm pool, aquarium |\n| 15-25 | Natural waves | Ocean surface, river |\n| 25-35 | Strong distortion | Choppy water, rain |\n| 35-50 | Dramatic | Storm waves, splashing |\n| 50+ | Unrealistic | Psychedelic (avoid for realism) |\n\n### Channel Selector Combinations\n\nThe xChannelSelector and yChannelSelector determine which color channels from the noise drive displacement:\n\n| X | Y | Result |\n|---|---|--------|\n| R | G | **Standard** - Different patterns for X/Y movement |\n| R | B | Offset patterns - more chaotic |\n| R | R | Same pattern - diagonal movement |\n| G | G | Same pattern - different angle |\n| A | A | Alpha-driven - if using alpha variations |\n\n**Recommendation**: Use `R` and `G` (or `R` and `B`) for water - they're uncorrelated in turbulence output, giving natural two-axis movement.\n\n### Displacement Direction\n\n```xml\n<!-- Horizontal waves (beach) -->\n<feDisplacementMap xChannelSelector=\"R\" yChannelSelector=\"G\" scale=\"30\"/>\n\n<!-- Vertical streams (waterfall) -->\n<feDisplacementMap xChannelSelector=\"G\" yChannelSelector=\"R\" scale=\"30\"/>\n\n<!-- Circular ripples (pond) -->\n<feDisplacementMap xChannelSelector=\"R\" yChannelSelector=\"R\" scale=\"20\"/>\n```\n\n## Color Manipulation for Water\n\n### feComponentTransfer: Color Channel Control\n\nTransform turbulence noise into water-like colors:\n\n```xml\n<feComponentTransfer in=\"waves\" result=\"waterColor\">\n  <!-- Reduce red (water absorbs red light first) -->\n  <feFuncR type=\"linear\" slope=\"0.3\" intercept=\"0\"/>\n\n  <!-- Moderate green (underwater green tint) -->\n  <feFuncG type=\"linear\" slope=\"0.6\" intercept=\"0.1\"/>\n\n  <!-- Strong blue (water is blue) -->\n  <feFuncB type=\"linear\" slope=\"1.2\" intercept=\"0.2\"/>\n\n  <!-- Water transparency -->\n  <feFuncA type=\"linear\" slope=\"0.7\" intercept=\"0.2\"/>\n</feComponentTransfer>\n```\n\n### Function Types\n\n| Type | Formula | Use Case |\n|------|---------|----------|\n| `linear` | `slope * value + intercept` | General adjustment |\n| `gamma` | `amplitude * pow(value, exponent) + offset` | Contrast curves |\n| `table` | Lookup table | Complex color mapping |\n| `discrete` | Step function | Posterization |\n\n### feColorMatrix: Advanced Color Transforms\n\nFor underwater color shifts:\n\n```xml\n<feColorMatrix type=\"matrix\"\n  values=\"0.8  0    0    0  0\n          0    0.9  0    0  0.02\n          0    0    1.2  0  0.05\n          0    0    0    1  0\"/>\n<!--     R    G    B    A  offset\n         ↓\n         Reduces red, slight green boost, strong blue -->\n```\n\n### Depth-Based Color\n\nDeeper water absorbs more red light:\n\n```xml\n<!-- Surface water (full color) -->\n<feColorMatrix values=\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0\"/>\n\n<!-- Mid-depth (less red) -->\n<feColorMatrix values=\"0.7 0 0 0 0  0 0.9 0 0 0  0 0 1 0 0.05  0 0 0 1 0\"/>\n\n<!-- Deep water (mostly blue) -->\n<feColorMatrix values=\"0.3 0 0 0 0  0 0.6 0 0 0.02  0 0 1.1 0 0.1  0 0 0 1 0\"/>\n```\n\n## Caustics: Underwater Light Patterns\n\nCaustics are the dappled light patterns on underwater surfaces.\n\n### Basic Caustic Pattern\n\n```xml\n<filter id=\"caustics\">\n  <feTurbulence\n    type=\"turbulence\"\n    baseFrequency=\"0.02\"\n    numOctaves=\"3\"\n    result=\"noise\"\n  />\n\n  <!-- Sharpen the noise into light beams -->\n  <feComponentTransfer in=\"noise\">\n    <feFuncR type=\"gamma\" amplitude=\"2\" exponent=\"3\" offset=\"-0.3\"/>\n    <feFuncG type=\"gamma\" amplitude=\"2\" exponent=\"3\" offset=\"-0.3\"/>\n    <feFuncB type=\"gamma\" amplitude=\"2\" exponent=\"3\" offset=\"-0.3\"/>\n    <feFuncA type=\"linear\" slope=\"1\" intercept=\"0\"/>\n  </feComponentTransfer>\n\n  <!-- Soften edges -->\n  <feGaussianBlur stdDeviation=\"1\"/>\n\n  <!-- Blend with source as overlay -->\n  <feBlend in=\"SourceGraphic\" mode=\"overlay\"/>\n</filter>\n```\n\n### Animated Caustics\n\n```xml\n<filter id=\"animatedCaustics\">\n  <feTurbulence type=\"turbulence\" baseFrequency=\"0.015\" numOctaves=\"3\">\n    <animate\n      attributeName=\"seed\"\n      values=\"1;5;10;15;10;5;1\"\n      dur=\"20s\"\n      repeatCount=\"indefinite\"\n    />\n  </feTurbulence>\n  <!-- ... rest of filter -->\n</filter>\n```\n\n### CSS-Based Caustics (Performance Alternative)\n\n```css\n.caustics {\n  background:\n    radial-gradient(ellipse 20% 30% at 30% 40%, rgba(255,255,255,0.15) 0%, transparent 50%),\n    radial-gradient(ellipse 25% 20% at 70% 60%, rgba(255,255,255,0.12) 0%, transparent 50%),\n    radial-gradient(ellipse 15% 25% at 50% 30%, rgba(255,255,255,0.1) 0%, transparent 50%);\n  animation: caustic-shift 8s ease-in-out infinite;\n}\n\n@keyframes caustic-shift {\n  0%, 100% { background-position: 0 0, 0 0, 0 0; }\n  33% { background-position: 20px 10px, -15px 5px, 10px -10px; }\n  66% { background-position: -10px -5px, 10px 15px, -20px 5px; }\n}\n```\n\n## Water Surface Reflections\n\n### Basic Reflection Filter\n\n```xml\n<filter id=\"waterReflection\">\n  <!-- Distort the reflection -->\n  <feTurbulence type=\"turbulence\" baseFrequency=\"0.01 0.05\" numOctaves=\"2\"/>\n  <feDisplacementMap in=\"SourceGraphic\" scale=\"15\"/>\n\n  <!-- Fade reflection -->\n  <feComponentTransfer>\n    <feFuncA type=\"linear\" slope=\"0.4\" intercept=\"0\"/>\n  </feComponentTransfer>\n\n  <!-- Blur for water surface diffusion -->\n  <feGaussianBlur stdDeviation=\"1\"/>\n</filter>\n```\n\n### Implementation\n\n```html\n<div class=\"scene\">\n  <div class=\"sky\">\n    <!-- Content above water -->\n  </div>\n  <div class=\"water\">\n    <div class=\"reflection\" style=\"transform: scaleY(-1)\">\n      <!-- Mirror of sky content -->\n    </div>\n  </div>\n</div>\n\n<style>\n  .reflection {\n    filter: url(#waterReflection);\n    opacity: 0.4;\n    mask-image: linear-gradient(to bottom, black 0%, transparent 100%);\n  }\n</style>\n```\n\n## Foam and Whitecaps\n\n### Foam Generation\n\n```xml\n<filter id=\"foam\">\n  <!-- High frequency noise for foam texture -->\n  <feTurbulence\n    type=\"fractalNoise\"  <!-- fractalNoise for foam (not turbulence) -->\n    baseFrequency=\"0.03\"\n    numOctaves=\"5\"\n    result=\"foamNoise\"\n  />\n\n  <!-- Threshold to create white spots -->\n  <feComponentTransfer in=\"foamNoise\">\n    <feFuncR type=\"discrete\" tableValues=\"0 0 0.8 1 1\"/>\n    <feFuncG type=\"discrete\" tableValues=\"0 0 0.8 1 1\"/>\n    <feFuncB type=\"discrete\" tableValues=\"0 0 0.9 1 1\"/>\n    <feFuncA type=\"discrete\" tableValues=\"0 0 0 0.3 0.5\"/>\n  </feComponentTransfer>\n\n  <!-- Soften foam edges -->\n  <feGaussianBlur stdDeviation=\"0.5\"/>\n</filter>\n```\n\n### Layered Foam\n\n```css\n.foam-layer {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 15%;\n  background: linear-gradient(to top,\n    rgba(255,255,255,0.8) 0%,\n    rgba(255,255,255,0.4) 40%,\n    transparent 100%\n  );\n  filter: url(#foam);\n  animation: foam-motion 4s ease-in-out infinite;\n}\n\n@keyframes foam-motion {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-10px); }\n}\n```\n\n## Compositing Operations\n\n### feComposite Operators\n\n| Operator | Effect | Water Use |\n|----------|--------|-----------|\n| `over` | A over B | Layer water on background |\n| `in` | A within B shape | Clip water to container |\n| `out` | A outside B | Create holes in water |\n| `atop` | A atop B | Water texture on shape |\n| `xor` | A XOR B | Interesting edge effects |\n| `arithmetic` | Custom blend | Complex compositing |\n\n### Example: Water with Transparent Areas\n\n```xml\n<filter id=\"waterWithHoles\">\n  <feTurbulence type=\"turbulence\" baseFrequency=\"0.01 0.1\" result=\"waves\"/>\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"waves\" scale=\"20\" result=\"displaced\"/>\n\n  <!-- Create mask for transparent areas -->\n  <feTurbulence type=\"fractalNoise\" baseFrequency=\"0.005\" result=\"mask\"/>\n  <feComponentTransfer in=\"mask\">\n    <feFuncA type=\"discrete\" tableValues=\"0 0 1 1\"/>\n  </feComponentTransfer>\n\n  <!-- Apply mask -->\n  <feComposite in=\"displaced\" operator=\"in\"/>\n</filter>\n```\n\n## Blend Modes for Water\n\n```xml\n<feBlend in=\"waterLayer\" in2=\"SourceGraphic\" mode=\"...\"/>\n```\n\n| Mode | Effect | Best For |\n|------|--------|----------|\n| `normal` | Standard layering | Opaque water surface |\n| `multiply` | Darkens | Deep water shadows |\n| `screen` | Lightens | Foam, highlights |\n| `overlay` | Contrast boost | Caustics |\n| `soft-light` | Subtle tinting | Color shifts |\n| `color-dodge` | Bright highlights | Sparkles |\n\n### Example: Complete Water with Multiple Blends\n\n```xml\n<filter id=\"fullWater\">\n  <!-- Base water displacement -->\n  <feTurbulence type=\"turbulence\" baseFrequency=\"0.008 0.08\" result=\"waves\"/>\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"waves\" scale=\"20\" result=\"displaced\"/>\n\n  <!-- Water color overlay -->\n  <feFlood flood-color=\"#0369a1\" flood-opacity=\"0.3\" result=\"waterTint\"/>\n  <feBlend in=\"waterTint\" in2=\"displaced\" mode=\"multiply\" result=\"tinted\"/>\n\n  <!-- Caustic highlights -->\n  <feTurbulence type=\"turbulence\" baseFrequency=\"0.02\" result=\"caustics\"/>\n  <feComponentTransfer in=\"caustics\">\n    <feFuncR type=\"gamma\" amplitude=\"2\" exponent=\"3\"/>\n    <feFuncG type=\"gamma\" amplitude=\"2\" exponent=\"3\"/>\n    <feFuncB type=\"gamma\" amplitude=\"2\" exponent=\"3\"/>\n  </feComponentTransfer>\n  <feBlend in2=\"tinted\" mode=\"overlay\" result=\"withCaustics\"/>\n\n  <!-- Final output -->\n  <feComposite in=\"withCaustics\" in2=\"SourceGraphic\" operator=\"over\"/>\n</filter>\n```\n"
        },
        {
          "name": "turbulence-deep-dive.md",
          "type": "file",
          "path": "web-wave-designer/references/turbulence-deep-dive.md",
          "size": 6427,
          "content": "# feTurbulence Deep Dive for Water Effects\n\n## Understanding the turbulence vs fractalNoise Difference\n\nThe `type` attribute fundamentally changes how the Perlin noise is generated:\n\n### type=\"turbulence\"\n\n```\nOutput = |noise(x,y)| + |noise(2x,2y)|/2 + |noise(4x,4y)|/4 + ...\n```\n\n- Takes absolute value of each octave\n- Creates continuous, flowing patterns\n- **Starts from transparent black** and builds up\n- Perfect for: water, liquid, flowing effects\n\n### type=\"fractalNoise\"\n\n```\nOutput = noise(x,y) + noise(2x,2y)/2 + noise(4x,4y)/4 + ...\n```\n\n- Allows negative values (which wrap)\n- Creates cloud-like, billowy patches\n- **Starts from solid midtone gray**\n- Perfect for: clouds, smoke, terrain\n\n## Two-Value baseFrequency for Directional Waves\n\nThe magic of water effects lies in using **different X and Y frequencies**:\n\n```xml\n<feTurbulence baseFrequency=\"0.01 0.1\" />\n                              ↑    ↑\n                              X    Y\n```\n\n### What Each Value Controls\n\n| Frequency | Low (0.005) | High (0.02) |\n|-----------|-------------|-------------|\n| **X (horizontal)** | Long, stretched patterns | Short, choppy patterns |\n| **Y (vertical)** | Minimal up/down variation | Strong vertical oscillation |\n\n### Common Ratio Patterns\n\n```\nX:Y Ratio    Effect                      Use Case\n─────────────────────────────────────────────────────\n1:1          Circular ripples            Pool, pond, raindrops\n1:5          Horizontal ocean swells     Deep sea, calm ocean\n1:10         Long rolling waves          Beach view, shore\n1:15         Extreme horizontal stretch  Calm lake, mirror surface\n5:1          Vertical striations         Waterfall, streaming\n```\n\n### Visual Examples\n\n```\nbaseFrequency=\"0.01 0.01\"  →  ○ ○ ○    (circular ripples)\n                              ○ ○ ○\n                              ○ ○ ○\n\nbaseFrequency=\"0.01 0.1\"   →  ~~~~~~~~  (ocean waves)\n                              ~~~~~~~~\n                              ~~~~~~~~\n\nbaseFrequency=\"0.1 0.01\"   →  | | | |   (vertical streams)\n                              | | | |\n                              | | | |\n```\n\n## numOctaves: Detail vs Performance\n\nEach octave adds a layer of detail at half the scale:\n\n```\nOctave 1: ░░░░░░░░  (baseFrequency)\nOctave 2: ▒▒▒▒▒▒▒▒  (2x frequency, 1/2 amplitude)\nOctave 3: ▓▓▓▓▓▓▓▓  (4x frequency, 1/4 amplitude)\nOctave 4: ████████  (8x frequency, 1/8 amplitude)\n```\n\n### Recommended Values for Water\n\n| numOctaves | Visual Result | CPU Cost | Best For |\n|------------|---------------|----------|----------|\n| 1 | Bold, cartoon waves | Minimal | Stylized/game water |\n| 2 | Simple, clean ripples | Low | Pool, calm water |\n| 3 | Natural ocean surface | Medium | General purpose |\n| 4 | Detailed, realistic | High | Hero sections |\n| 5+ | Diminishing returns | Very High | Avoid |\n\n### Performance Impact\n\n```\nOctaves    Relative CPU\n────────────────────────\n1          1x\n2          2x\n3          4x\n4          8x\n5          16x (wasteful)\n```\n\n**Rule**: If you can't see the difference between 4 and 5 octaves, use 4.\n\n## Seed: Free Variation\n\nThe `seed` attribute changes the random seed for the noise function. This is **computationally free** - same performance regardless of value.\n\n```xml\n<!-- These have identical performance -->\n<feTurbulence seed=\"1\" />\n<feTurbulence seed=\"99999\" />\n```\n\n### Using Seed for Layer Variation\n\n```xml\n<filter id=\"wave1\"><feTurbulence seed=\"1\" /></filter>\n<filter id=\"wave2\"><feTurbulence seed=\"42\" /></filter>\n<filter id=\"wave3\"><feTurbulence seed=\"999\" /></filter>\n```\n\n### Seed Animation for Morphing\n\nAnimating seed creates a \"morphing\" effect without the performance hit of baseFrequency animation:\n\n```xml\n<feTurbulence seed=\"1\">\n  <animate\n    attributeName=\"seed\"\n    values=\"1;10;20;30;20;10;1\"\n    dur=\"30s\"\n    repeatCount=\"indefinite\"\n  />\n</feTurbulence>\n```\n\nThis creates subtle shape variation without the constant filter recalculation.\n\n## stitchTiles: Seamless Tiling\n\nFor repeating backgrounds, use `stitchTiles=\"stitch\"`:\n\n```xml\n<feTurbulence\n  baseFrequency=\"0.01 0.1\"\n  stitchTiles=\"stitch\"  <!-- Makes pattern tileable -->\n/>\n```\n\n**Warning**: This can change the visual output slightly. Test both values.\n\n| Value | Effect |\n|-------|--------|\n| `noStitch` (default) | Natural randomness, may show seams when tiled |\n| `stitch` | Forces seamless tiling, slightly different pattern |\n\n## Advanced: Combining Multiple Turbulence Sources\n\nFor complex water, layer different turbulence patterns:\n\n```xml\n<filter id=\"complexWater\">\n  <!-- Large swells -->\n  <feTurbulence\n    type=\"turbulence\"\n    baseFrequency=\"0.003 0.03\"\n    numOctaves=\"2\"\n    seed=\"1\"\n    result=\"swells\"\n  />\n\n  <!-- Surface chop -->\n  <feTurbulence\n    type=\"turbulence\"\n    baseFrequency=\"0.02 0.15\"\n    numOctaves=\"3\"\n    seed=\"2\"\n    result=\"chop\"\n  />\n\n  <!-- Combine: swells drive major displacement, chop adds detail -->\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"swells\" scale=\"30\" result=\"displaced1\"/>\n  <feDisplacementMap in=\"displaced1\" in2=\"chop\" scale=\"10\" result=\"final\"/>\n</filter>\n```\n\n## Debugging Turbulence Output\n\nTo see what the raw turbulence looks like:\n\n```xml\n<filter id=\"debug\">\n  <feTurbulence type=\"turbulence\" baseFrequency=\"0.01 0.1\" result=\"noise\"/>\n  <!-- Output noise directly (no source graphic needed) -->\n  <feColorMatrix in=\"noise\" type=\"saturate\" values=\"0\"/>\n</filter>\n\n<rect width=\"400\" height=\"200\" filter=\"url(#debug)\"/>\n```\n\nThis renders the raw noise pattern, helping you understand what different parameters produce.\n\n## Browser Compatibility Notes\n\n| Browser | Support | Notes |\n|---------|---------|-------|\n| Chrome | Full | Best performance, GPU accelerated |\n| Firefox | Full | Good performance |\n| Safari | Full | Watch for iOS memory limits |\n| Edge | Full | Chromium-based, same as Chrome |\n| IE11 | Partial | Avoid animations, may crash |\n\n### Safari-Specific Issues\n\nSafari on iOS may have memory issues with:\n- numOctaves > 4\n- Multiple animated filters\n- Large filter regions\n\n**Workaround**: Detect Safari and reduce complexity:\n\n```javascript\nconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nconst maxOctaves = isSafari ? 3 : 4;\n```\n"
        }
      ]
    },
    {
      "name": "CHANGELOG.md",
      "type": "file",
      "path": "web-wave-designer/CHANGELOG.md",
      "size": 1639,
      "content": "# Changelog\n\nAll notable changes to the web-wave-designer skill.\n\n## [1.0.0] - 2026-01-22\n\n### Added\n- Initial release of web-wave-designer skill\n- Core SVG filter pipeline documentation (feTurbulence, feDisplacementMap, feComponentTransfer)\n- Critical distinction between `type=\"turbulence\"` vs `type=\"fractalNoise\"` for water effects\n- Two-value baseFrequency explanation for directional wave patterns\n- Wave type recipes: ocean surface, pond ripples, beach shore, underwater distortion, liquid glass, stylized/cartoon\n- Layering strategy for multi-depth ocean scenes\n- Animation techniques comparison: CSS transforms, requestAnimationFrame, SVG animate, GSAP\n- Color palettes: deep ocean, tropical, stormy, sunset reflection\n- Complete implementation templates (vanilla HTML/CSS, React component, CSS-only)\n- Performance optimization guide with tier system (Ultra/High/Medium/Low)\n- Framework integration examples (Next.js, Vue 3, Tailwind CSS)\n- Reference documentation:\n  - `turbulence-deep-dive.md`: Complete feTurbulence parameter guide\n  - `displacement-and-color.md`: feDisplacementMap, caustics, foam, reflections\n  - `animation-patterns.md`: Performance-aware animation strategies\n- Integration guidance with web-cloud-designer for complete atmospheric scenes\n- Browser compatibility notes\n- Debugging tips and common issues\n\n### Technical Notes\n- Designed to pair with web-cloud-designer skill for complete sky + ocean scenes\n- Based on research from Red Stapler, Mitkov Systems (2025), CSS-Tricks, and MDN\n- Emphasizes performance-first approach with adaptive quality tiers\n- Includes reduced motion support for accessibility\n"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "web-wave-designer/SKILL.md",
      "size": 28067,
      "content": "---\nname: web-wave-designer\ndescription: Creates realistic ocean and water wave effects for web using SVG filters (feTurbulence, feDisplacementMap), CSS animations, and layering techniques. Use for ocean backgrounds, underwater distortion, beach scenes, ripple effects, liquid glass, and water-themed UI. Activate on \"ocean wave\", \"water effect\", \"SVG water\", \"ripple animation\", \"underwater distortion\", \"liquid glass\", \"wave animation\", \"feTurbulence water\", \"beach waves\", \"sea foam\". NOT for 3D ocean simulation (use WebGL/Three.js), video water effects (use video editing), physics-based fluid simulation (use canvas/WebGL), or simple gradient backgrounds without wave motion.\nallowed-tools: Read,Write,Edit,WebFetch,Bash\ncategory: Design & Creative\ntags:\n  - svg\n  - css\n  - animation\n  - water\n  - ocean\n  - visual-effects\n  - web\npairs-with:\n  - skill: web-cloud-designer\n    reason: Complete atmospheric scenes with sky and water\n  - skill: physics-rendering-expert\n    reason: Realistic light refraction and caustics\n  - skill: color-theory-palette-harmony-expert\n    reason: Ocean palettes and depth gradients\n  - skill: web-design-expert\n    reason: Integrate water effects into overall web design\n---\n\n# Web Wave Designer\n\nExpert in creating realistic, performant ocean and water wave effects for web applications using SVG filters, CSS animations, and layering techniques. Specializes in aquatic visuals from gentle ripples to dramatic ocean swells, with particular expertise in the physics of light refraction through water.\n\n## When to Use This Skill\n\n**Use for:**\n- Ocean wave backgrounds and seascapes\n- Underwater distortion/refraction effects\n- Beach shore waves with foam\n- Pond/pool ripple animations\n- Liquid glass UI effects\n- Water-themed loading states\n- Parallax ocean layers with depth\n- Stylized/cartoon water for games\n- Reflection effects on water surfaces\n\n**Do NOT use for:**\n- 3D volumetric ocean rendering -> use **WebGL/Three.js/Ocean.js**\n- Real-time fluid simulation -> use **canvas physics engines**\n- Video effects -> use video editing software\n- Simple blue gradients without motion\n- Water droplet physics -> use particle systems\n\n## Core Distinction: turbulence vs fractalNoise\n\n**CRITICAL**: For water effects, use `type=\"turbulence\"` (NOT fractalNoise like clouds):\n\n| Type | Visual | Best For |\n|------|--------|----------|\n| `turbulence` | Continuous flow patterns, starts from transparent black | **Water, waves, liquid** |\n| `fractalNoise` | Random cloudlike patches, opaque | Clouds, smoke, terrain |\n\n```xml\n<!-- WATER - use turbulence -->\n<feTurbulence type=\"turbulence\" baseFrequency=\"0.01 0.1\" />\n\n<!-- CLOUDS - use fractalNoise -->\n<feTurbulence type=\"fractalNoise\" baseFrequency=\"0.01\" />\n```\n\n## SVG Filter Pipeline for Water\n\nThe fundamental water effect filter chain:\n\n```\nSource -> feTurbulence -> feDisplacementMap -> feComponentTransfer -> feComposite\n            (waves)        (distortion)         (color/opacity)      (blend)\n```\n\n### 1. feTurbulence - Wave Pattern Generation\n\n```xml\n<feTurbulence\n  type=\"turbulence\"           <!-- MUST be turbulence for water -->\n  baseFrequency=\"0.01 0.1\"    <!-- TWO values: x-freq y-freq -->\n  numOctaves=\"3\"              <!-- 2-5: wave complexity -->\n  seed=\"42\"                   <!-- Variation (free performance) -->\n  result=\"waves\"\n/>\n```\n\n**baseFrequency Explained (TWO Values):**\n\n| X-Frequency | Y-Frequency | Result |\n|-------------|-------------|--------|\n| 0.01 | 0.1 | Long horizontal waves with vertical oscillation |\n| 0.005 | 0.05 | Deep ocean swells |\n| 0.02 | 0.15 | Choppy surface waves |\n| 0.03 | 0.03 | Square ripples (pond) |\n\nThe ratio matters:\n- **X << Y**: Stretched horizontal waves (ocean)\n- **X == Y**: Circular ripples (pond, pool)\n- **X >> Y**: Vertical striations (waterfall)\n\n### 2. feDisplacementMap - Refraction Effect\n\nCreates the bending/distortion that makes content behind water appear to ripple.\n\n```xml\n<feDisplacementMap\n  in=\"SourceGraphic\"          <!-- What gets distorted -->\n  in2=\"waves\"                 <!-- Distortion pattern (from turbulence) -->\n  scale=\"20\"                  <!-- 10-40 for realistic refraction -->\n  xChannelSelector=\"R\"        <!-- Which color channel drives X displacement -->\n  yChannelSelector=\"G\"        <!-- Which color channel drives Y displacement -->\n  result=\"refracted\"\n/>\n```\n\n| Scale Value | Effect |\n|-------------|--------|\n| 10-15 | Gentle pool ripples |\n| 15-25 | Standard water refraction |\n| 25-40 | Strong wave distortion |\n| 40+ | Psychedelic (unrealistic) |\n\n### 3. feComponentTransfer - Water Color\n\nTransform noise into water-like colors by manipulating channels.\n\n```xml\n<feComponentTransfer in=\"waves\" result=\"waterColor\">\n  <feFuncR type=\"linear\" slope=\"0.3\" intercept=\"0\"/>     <!-- Reduce red -->\n  <feFuncG type=\"linear\" slope=\"0.7\" intercept=\"0.2\"/>   <!-- Boost green -->\n  <feFuncB type=\"linear\" slope=\"1.2\" intercept=\"0.3\"/>   <!-- Strong blue -->\n  <feFuncA type=\"linear\" slope=\"0.6\" intercept=\"0.3\"/>   <!-- Water opacity -->\n</feComponentTransfer>\n```\n\n### 4. feGaussianBlur - Caustics (Underwater Light)\n\n```xml\n<feGaussianBlur\n  in=\"waves\"\n  stdDeviation=\"2\"            <!-- 1-5 for soft caustic patterns -->\n  result=\"caustics\"\n/>\n```\n\n### 5. Compositing - Layer Assembly\n\n```xml\n<feFlood flood-color=\"#0077be\" flood-opacity=\"0.4\" result=\"baseWater\"/>\n<feBlend in=\"caustics\" in2=\"baseWater\" mode=\"screen\" result=\"waterLayer\"/>\n<feComposite in=\"waterLayer\" in2=\"SourceGraphic\" operator=\"over\"/>\n```\n\n## Wave Type Recipes\n\n### Ocean Surface Waves\n\n```svg\n<svg width=\"100%\" height=\"300\">\n  <defs>\n    <filter id=\"oceanWaves\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\n      <feTurbulence type=\"turbulence\"\n                    baseFrequency=\"0.005 0.05\"\n                    numOctaves=\"4\"\n                    seed=\"1\"\n                    result=\"waves\">\n        <animate attributeName=\"baseFrequency\"\n                 dur=\"60s\"\n                 values=\"0.005 0.05;0.007 0.06;0.005 0.05\"\n                 repeatCount=\"indefinite\"/>\n      </feTurbulence>\n      <feDisplacementMap in=\"SourceGraphic\" in2=\"waves\" scale=\"25\"/>\n    </filter>\n  </defs>\n  <rect width=\"100%\" height=\"100%\" fill=\"url(#oceanGradient)\" filter=\"url(#oceanWaves)\"/>\n</svg>\n```\n\n### Pond Ripples (Circular)\n\n```svg\n<filter id=\"pondRipples\">\n  <feTurbulence type=\"turbulence\"\n                baseFrequency=\"0.02 0.02\"  <!-- Equal = circular -->\n                numOctaves=\"2\"\n                seed=\"10\"\n                result=\"ripples\"/>\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"ripples\" scale=\"12\"/>\n</filter>\n```\n\n### Beach Shore Waves (Breaking)\n\n```svg\n<filter id=\"shoreWaves\">\n  <feTurbulence type=\"turbulence\"\n                baseFrequency=\"0.008 0.12\"  <!-- Strong vertical motion -->\n                numOctaves=\"3\"\n                seed=\"5\"\n                result=\"waves\"/>\n  <feGaussianBlur in=\"waves\" stdDeviation=\"1.5\" result=\"softWaves\"/>\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"softWaves\" scale=\"30\"/>\n  <!-- Add foam layer -->\n  <feTurbulence type=\"fractalNoise\"\n                baseFrequency=\"0.03\"\n                numOctaves=\"5\"\n                result=\"foam\"/>\n  <feColorMatrix in=\"foam\" type=\"matrix\"\n                 values=\"1 0 0 0 0.9\n                         1 0 0 0 0.95\n                         1 0 0 0 1\n                         0 0 0 0.3 0\"/>\n</filter>\n```\n\n### Underwater Distortion (Looking Through Water)\n\n```svg\n<filter id=\"underwater\" x=\"-10%\" y=\"-10%\" width=\"120%\" height=\"120%\">\n  <feTurbulence type=\"turbulence\"\n                baseFrequency=\"0.015 0.08\"\n                numOctaves=\"3\"\n                result=\"distort\">\n    <animate attributeName=\"baseFrequency\"\n             dur=\"8s\"\n             values=\"0.015 0.08;0.018 0.09;0.015 0.08\"\n             repeatCount=\"indefinite\"/>\n  </feTurbulence>\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"distort\"\n                     scale=\"20\"\n                     xChannelSelector=\"R\"\n                     yChannelSelector=\"B\"/>\n  <!-- Slight blue tint -->\n  <feColorMatrix type=\"matrix\"\n                 values=\"0.9 0 0 0 0\n                         0 0.95 0 0 0.02\n                         0 0 1.1 0 0.05\n                         0 0 0 1 0\"/>\n</filter>\n```\n\n### Liquid Glass Effect (Modern UI)\n\n```svg\n<filter id=\"liquidGlass\" x=\"-5%\" y=\"-5%\" width=\"110%\" height=\"110%\">\n  <feTurbulence type=\"turbulence\"\n                baseFrequency=\"0.01 0.05\"\n                numOctaves=\"2\"\n                seed=\"99\"\n                result=\"ripple\">\n    <animate attributeName=\"seed\"\n             dur=\"4s\"\n             values=\"99;100;101;100;99\"\n             repeatCount=\"indefinite\"/>\n  </feTurbulence>\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"ripple\" scale=\"8\"/>\n  <!-- Frosted glass blur -->\n  <feGaussianBlur stdDeviation=\"0.5\"/>\n</filter>\n```\n\n### Stylized/Cartoon Waves\n\n```svg\n<filter id=\"cartoonWater\">\n  <feTurbulence type=\"turbulence\"\n                baseFrequency=\"0.02 0.08\"\n                numOctaves=\"1\"  <!-- Low octaves = bold shapes -->\n                result=\"waves\"/>\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"waves\" scale=\"15\"/>\n  <!-- Sharp edges, no blur -->\n</filter>\n```\n\n## Animation Techniques\n\n### JavaScript requestAnimationFrame (Smoothest)\n\n```javascript\nconst turbulence = document.querySelector('#seaFilter feTurbulence');\nlet frame = 0;\n\nfunction animateWaves() {\n  frame += 0.003;\n\n  // Gentle breathing motion\n  const xFreq = 0.006 + Math.sin(frame) * 0.002;\n  const yFreq = 0.05 + Math.sin(frame * 0.7) * 0.01;\n\n  turbulence.setAttribute('baseFrequency', `${xFreq} ${yFreq}`);\n  requestAnimationFrame(animateWaves);\n}\n\nanimateWaves();\n```\n\n### SVG animate (Declarative, CPU-Heavy)\n\n```xml\n<feTurbulence baseFrequency=\"0.01 0.1\" numOctaves=\"3\">\n  <animate\n    attributeName=\"baseFrequency\"\n    dur=\"60s\"\n    keyTimes=\"0;0.5;1\"\n    values=\"0.008 0.08;0.012 0.12;0.008 0.08\"\n    repeatCount=\"indefinite\"\n  />\n</feTurbulence>\n```\n\n**WARNING**: SVG animate on filter attributes forces full filter recalculation every frame. Use sparingly.\n\n### CSS Transform Animation (Best Performance)\n\nMove the water element, not the filter:\n\n```css\n.wave-layer {\n  animation: wave-drift 20s linear infinite;\n}\n\n@keyframes wave-drift {\n  from { transform: translateX(0) translateY(0); }\n  to { transform: translateX(-50%) translateY(5px); }\n}\n```\n\n### Seed Animation (Morphing Waves)\n\nAnimate seed for shape variation without baseFrequency cost:\n\n```xml\n<feTurbulence baseFrequency=\"0.01 0.1\">\n  <animate\n    attributeName=\"seed\"\n    dur=\"20s\"\n    values=\"1;50;100;50;1\"\n    repeatCount=\"indefinite\"\n  />\n</feTurbulence>\n```\n\n## Layering Strategy\n\n### Multi-Layer Ocean\n\n```html\n<div class=\"ocean\">\n  <div class=\"wave wave-back\"></div>\n  <div class=\"wave wave-mid\"></div>\n  <div class=\"wave wave-front\"></div>\n  <div class=\"foam-layer\"></div>\n</div>\n```\n\n```css\n.ocean {\n  position: relative;\n  height: 100vh;\n  background: linear-gradient(180deg,\n    #0c4a6e 0%,\n    #0369a1 40%,\n    #0ea5e9 100%\n  );\n  overflow: hidden;\n}\n\n.wave {\n  position: absolute;\n  width: 200%;\n  height: 100%;\n  background: rgba(255,255,255,0.1);\n}\n\n.wave-back {\n  filter: url(#waveBack);\n  opacity: 0.3;\n  animation: drift 90s linear infinite;\n  bottom: 0;\n}\n\n.wave-mid {\n  filter: url(#waveMid);\n  opacity: 0.5;\n  animation: drift 60s linear infinite;\n  bottom: -5%;\n}\n\n.wave-front {\n  filter: url(#waveFront);\n  opacity: 0.7;\n  animation: drift 35s linear infinite;\n  bottom: -10%;\n}\n\n.foam-layer {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 20%;\n  background: linear-gradient(to top,\n    rgba(255,255,255,0.8) 0%,\n    transparent 100%\n  );\n  filter: url(#foamFilter);\n}\n\n@keyframes drift {\n  from { transform: translateX(0); }\n  to { transform: translateX(-50%); }\n}\n```\n\n### Layer Parameter Guide\n\n| Layer | Opacity | Speed | Filter Scale | baseFrequency |\n|-------|---------|-------|--------------|---------------|\n| Back (deep) | 0.2-0.4 | 80-100s | 15 | 0.004 0.04 |\n| Mid | 0.4-0.6 | 50-70s | 20 | 0.006 0.06 |\n| Front (surface) | 0.6-0.8 | 30-45s | 25 | 0.01 0.1 |\n| Foam | 0.7-0.9 | 25-35s | 10 | 0.02 0.02 |\n\n## Color Palettes\n\n### Deep Ocean\n\n```css\n.deep-ocean {\n  background: linear-gradient(180deg,\n    #0c4a6e 0%,    /* Deep blue */\n    #075985 30%,\n    #0369a1 60%,\n    #0284c7 100%   /* Surface shimmer */\n  );\n}\n```\n- Primary: `#0369a1`\n- Deep: `#0c4a6e`\n- Highlight: `#38bdf8`\n\n### Tropical/Caribbean\n\n```css\n.tropical {\n  background: linear-gradient(180deg,\n    #06b6d4 0%,    /* Cyan surface */\n    #22d3ee 40%,\n    #67e8f9 70%,\n    #a5f3fc 100%   /* Shallow sand reflection */\n  );\n}\n```\n- Primary: `#06b6d4`\n- Shallow: `#67e8f9`\n- Foam: `#ecfeff`\n\n### Stormy Sea\n\n```css\n.stormy {\n  background: linear-gradient(180deg,\n    #1e293b 0%,    /* Dark clouds */\n    #334155 30%,\n    #475569 60%,\n    #64748b 100%   /* Whitecaps */\n  );\n}\n```\n- Primary: `#475569`\n- Depth: `#1e293b`\n- Whitecap: `#cbd5e1`\n\n### Sunset Reflection\n\n```css\n.sunset-water {\n  background: linear-gradient(180deg,\n    #831843 0%,    /* Pink sky */\n    #9d174d 20%,\n    #be185d 40%,\n    #0369a1 60%,   /* Water starts */\n    #0c4a6e 100%\n  );\n}\n```\n\n## Complete Implementation Templates\n\n### Template 1: Full Ocean Scene\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n\n    .ocean-scene {\n      position: relative;\n      width: 100%;\n      height: 100vh;\n      background: linear-gradient(180deg,\n        #87CEEB 0%,    /* Sky */\n        #87CEEB 40%,\n        #0369a1 40%,   /* Horizon */\n        #0c4a6e 100%   /* Deep */\n      );\n      overflow: hidden;\n    }\n\n    .horizon-line {\n      position: absolute;\n      top: 40%;\n      left: 0;\n      right: 0;\n      height: 2px;\n      background: rgba(255,255,255,0.3);\n    }\n\n    .wave {\n      position: absolute;\n      width: 200%;\n      height: 60%;\n      bottom: 0;\n      background: rgba(255,255,255,0.15);\n    }\n\n    .wave-1 {\n      filter: url(#wave1);\n      animation: drift 80s linear infinite;\n      opacity: 0.4;\n    }\n\n    .wave-2 {\n      filter: url(#wave2);\n      animation: drift 55s linear infinite;\n      animation-delay: -20s;\n      opacity: 0.6;\n    }\n\n    .wave-3 {\n      filter: url(#wave3);\n      animation: drift 35s linear infinite;\n      animation-delay: -10s;\n      opacity: 0.8;\n    }\n\n    @keyframes drift {\n      from { transform: translateX(0); }\n      to { transform: translateX(-50%); }\n    }\n  </style>\n</head>\n<body>\n  <svg style=\"position:absolute;width:0;height:0\">\n    <defs>\n      <filter id=\"wave1\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\n        <feTurbulence type=\"turbulence\" baseFrequency=\"0.004 0.04\" numOctaves=\"3\" seed=\"1\"/>\n        <feDisplacementMap in=\"SourceGraphic\" scale=\"15\"/>\n      </filter>\n      <filter id=\"wave2\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\n        <feTurbulence type=\"turbulence\" baseFrequency=\"0.006 0.06\" numOctaves=\"3\" seed=\"2\"/>\n        <feDisplacementMap in=\"SourceGraphic\" scale=\"20\"/>\n      </filter>\n      <filter id=\"wave3\" x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\n        <feTurbulence type=\"turbulence\" baseFrequency=\"0.01 0.1\" numOctaves=\"4\" seed=\"3\"/>\n        <feDisplacementMap in=\"SourceGraphic\" scale=\"25\"/>\n      </filter>\n    </defs>\n  </svg>\n\n  <div class=\"ocean-scene\">\n    <div class=\"horizon-line\"></div>\n    <div class=\"wave wave-1\"></div>\n    <div class=\"wave wave-2\"></div>\n    <div class=\"wave wave-3\"></div>\n  </div>\n</body>\n</html>\n```\n\n### Template 2: Underwater View (Content Behind Water)\n\n```html\n<style>\n  .underwater-container {\n    position: relative;\n    width: 100%;\n    overflow: hidden;\n  }\n\n  .content-behind-water {\n    /* Your actual content */\n  }\n\n  .water-overlay {\n    position: absolute;\n    inset: 0;\n    pointer-events: none;\n    filter: url(#underwaterDistort);\n  }\n\n  .caustics {\n    position: absolute;\n    inset: 0;\n    background: url('data:image/svg+xml,...') repeat;\n    opacity: 0.3;\n    mix-blend-mode: overlay;\n    animation: caustic-shift 10s linear infinite;\n  }\n\n  @keyframes caustic-shift {\n    from { background-position: 0 0; }\n    to { background-position: 100px 50px; }\n  }\n</style>\n\n<svg style=\"display:none\">\n  <defs>\n    <filter id=\"underwaterDistort\" x=\"-10%\" y=\"-10%\" width=\"120%\" height=\"120%\">\n      <feTurbulence id=\"underwaterTurb\" type=\"turbulence\"\n                    baseFrequency=\"0.015 0.08\" numOctaves=\"3\"/>\n      <feDisplacementMap in=\"SourceGraphic\" scale=\"20\"\n                         xChannelSelector=\"R\" yChannelSelector=\"B\"/>\n      <feColorMatrix type=\"matrix\"\n                     values=\"0.85 0 0 0 0\n                             0 0.9 0 0 0.02\n                             0 0 1.1 0 0.08\n                             0 0 0 1 0\"/>\n    </filter>\n  </defs>\n</svg>\n\n<script>\n  // Animate underwater distortion\n  const turb = document.getElementById('underwaterTurb');\n  let frame = 0;\n\n  function animate() {\n    frame += 0.005;\n    const xFreq = 0.015 + Math.sin(frame) * 0.003;\n    const yFreq = 0.08 + Math.sin(frame * 0.7) * 0.01;\n    turb.setAttribute('baseFrequency', `${xFreq} ${yFreq}`);\n    requestAnimationFrame(animate);\n  }\n  animate();\n</script>\n```\n\n### Template 3: React Water Component\n\n```tsx\nimport React, { useEffect, useRef, useMemo } from 'react';\n\ninterface WaterEffectProps {\n  type?: 'ocean' | 'pool' | 'stream' | 'glass';\n  intensity?: 'subtle' | 'medium' | 'strong';\n  animate?: boolean;\n  className?: string;\n  children?: React.ReactNode;\n}\n\nconst WATER_CONFIGS = {\n  ocean: { baseFreq: [0.008, 0.08], octaves: 4, scale: 25 },\n  pool: { baseFreq: [0.02, 0.02], octaves: 2, scale: 12 },\n  stream: { baseFreq: [0.01, 0.15], octaves: 3, scale: 20 },\n  glass: { baseFreq: [0.01, 0.05], octaves: 2, scale: 8 },\n};\n\nconst INTENSITY_MULTIPLIERS = {\n  subtle: 0.5,\n  medium: 1.0,\n  strong: 1.5,\n};\n\nexport const WaterEffect: React.FC<WaterEffectProps> = ({\n  type = 'ocean',\n  intensity = 'medium',\n  animate = true,\n  className,\n  children\n}) => {\n  const turbRef = useRef<SVGFETurbulenceElement>(null);\n  const frameRef = useRef(0);\n  const config = WATER_CONFIGS[type];\n  const mult = INTENSITY_MULTIPLIERS[intensity];\n\n  const filterId = useMemo(() =>\n    `water-${type}-${Date.now()}`, [type]\n  );\n\n  useEffect(() => {\n    if (!animate || !turbRef.current) return;\n\n    let animationId: number;\n\n    const animateWater = () => {\n      frameRef.current += 0.004;\n      const frame = frameRef.current;\n\n      const xFreq = config.baseFreq[0] + Math.sin(frame) * 0.002;\n      const yFreq = config.baseFreq[1] + Math.sin(frame * 0.7) * 0.01;\n\n      turbRef.current?.setAttribute('baseFrequency', `${xFreq} ${yFreq}`);\n      animationId = requestAnimationFrame(animateWater);\n    };\n\n    animateWater();\n    return () => cancelAnimationFrame(animationId);\n  }, [animate, config]);\n\n  return (\n    <>\n      <svg style={{ position: 'absolute', width: 0, height: 0 }}>\n        <defs>\n          <filter id={filterId} x=\"-10%\" y=\"-10%\" width=\"120%\" height=\"120%\">\n            <feTurbulence\n              ref={turbRef}\n              type=\"turbulence\"\n              baseFrequency={config.baseFreq.join(' ')}\n              numOctaves={config.octaves}\n              result=\"waves\"\n            />\n            <feDisplacementMap\n              in=\"SourceGraphic\"\n              in2=\"waves\"\n              scale={config.scale * mult}\n              xChannelSelector=\"R\"\n              yChannelSelector=\"G\"\n            />\n          </filter>\n        </defs>\n      </svg>\n      <div className={className} style={{ filter: `url(#${filterId})` }}>\n        {children}\n      </div>\n    </>\n  );\n};\n\n// Usage:\n// <WaterEffect type=\"ocean\" intensity=\"medium\" animate>\n//   <img src=\"underwater-scene.jpg\" />\n// </WaterEffect>\n```\n\n### Template 4: CSS-Only Waves (No SVG)\n\nFor simple, high-performance waves without SVG filters:\n\n```css\n.css-waves {\n  position: relative;\n  height: 300px;\n  background: linear-gradient(180deg, #0369a1 0%, #0c4a6e 100%);\n  overflow: hidden;\n}\n\n.css-wave {\n  position: absolute;\n  width: 200%;\n  height: 100%;\n  bottom: 0;\n  left: -50%;\n  background:\n    radial-gradient(ellipse 100% 50% at 50% 100%,\n      rgba(255,255,255,0.3) 0%,\n      transparent 60%\n    );\n  animation: css-wave-move 8s ease-in-out infinite;\n  transform-origin: center bottom;\n}\n\n.css-wave:nth-child(1) {\n  animation-duration: 7s;\n  opacity: 0.5;\n}\n\n.css-wave:nth-child(2) {\n  animation-duration: 10s;\n  animation-delay: -3s;\n  opacity: 0.3;\n}\n\n.css-wave:nth-child(3) {\n  animation-duration: 13s;\n  animation-delay: -5s;\n  opacity: 0.2;\n}\n\n@keyframes css-wave-move {\n  0%, 100% {\n    transform: translateX(0) scaleY(1);\n  }\n  50% {\n    transform: translateX(25%) scaleY(1.1);\n  }\n}\n```\n\n## Performance Optimization\n\n### Critical Rules\n\n1. **Use `type=\"turbulence\"`** - Correct type for water (not fractalNoise)\n2. **numOctaves <= 4** - Above 4 minimal visual gain, exponential CPU cost\n3. **Scale 10-30** - Above 40 becomes unrealistic and slower\n4. **Avoid animating baseFrequency** - Use CSS transforms or seed animation instead\n5. **GPU hints** - Add `will-change: transform` on animated layers\n6. **Batch SVG defs** - One `<defs>` block, multiple filters\n\n### Performance Tiers\n\n| Tier | Technique | FPS Target | Use Case |\n|------|-----------|------------|----------|\n| Ultra | CSS radial gradients only | 60fps | Mobile, low-end |\n| High | SVG filter, CSS transform animation | 60fps | Background waves |\n| Medium | SVG filter + seed animation | 45-60fps | Interactive water |\n| Low | SVG filter + baseFrequency animation | 30-40fps | Hero sections only |\n\n### Mobile Optimization\n\n```css\n@media (prefers-reduced-motion: reduce) {\n  .wave {\n    animation: none !important;\n  }\n}\n\n@media (max-width: 768px) {\n  /* Reduce to 2 wave layers */\n  .wave-1 { display: none; }\n\n  /* Use simpler filter */\n  .wave { filter: url(#waveSimple); }\n}\n```\n\n### Performance Detection\n\n```javascript\nconst canHandleWaterEffects = () => {\n  // Check for GPU\n  const canvas = document.createElement('canvas');\n  const gl = canvas.getContext('webgl');\n  if (!gl) return 'ultra'; // CSS only\n\n  const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');\n  const renderer = debugInfo\n    ? gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL)\n    : '';\n\n  // Integrated graphics = medium tier\n  if (renderer.includes('Intel') || renderer.includes('Mali')) {\n    return 'medium';\n  }\n\n  return 'high';\n};\n\n// Apply appropriate tier\nconst tier = canHandleWaterEffects();\ndocument.body.dataset.waterTier = tier;\n```\n\n```css\n/* Tier-based styling */\n[data-water-tier=\"ultra\"] .wave {\n  filter: none;\n  background: linear-gradient(/* simple gradient */);\n}\n\n[data-water-tier=\"medium\"] .wave {\n  filter: url(#waveSimple);\n}\n\n[data-water-tier=\"high\"] .wave {\n  filter: url(#waveFull);\n}\n```\n\n## Framework Integration\n\n### Next.js / React\n\n```tsx\n// components/OceanBackground.tsx\n'use client';\n\nimport { useEffect, useState, useRef } from 'react';\nimport styles from './OceanBackground.module.css';\n\nexport function OceanBackground({ children }: { children: React.ReactNode }) {\n  const [mounted, setMounted] = useState(false);\n  const turbRef = useRef<SVGFETurbulenceElement>(null);\n\n  useEffect(() => {\n    setMounted(true);\n\n    // Animate after mount\n    let frame = 0;\n    const animate = () => {\n      frame += 0.003;\n      if (turbRef.current) {\n        const xFreq = 0.008 + Math.sin(frame) * 0.002;\n        const yFreq = 0.08 + Math.sin(frame * 0.7) * 0.01;\n        turbRef.current.setAttribute('baseFrequency', `${xFreq} ${yFreq}`);\n      }\n      requestAnimationFrame(animate);\n    };\n    const id = requestAnimationFrame(animate);\n    return () => cancelAnimationFrame(id);\n  }, []);\n\n  if (!mounted) return null;\n\n  return (\n    <div className={styles.ocean}>\n      <svg className={styles.filters}>\n        <defs>\n          <filter id=\"oceanWave\">\n            <feTurbulence ref={turbRef} type=\"turbulence\"\n                          baseFrequency=\"0.008 0.08\" numOctaves=\"4\"/>\n            <feDisplacementMap in=\"SourceGraphic\" scale=\"25\"/>\n          </filter>\n        </defs>\n      </svg>\n      <div className={styles.waveLayer} />\n      <div className={styles.content}>{children}</div>\n    </div>\n  );\n}\n```\n\n### Tailwind CSS\n\n```javascript\n// tailwind.config.js\nmodule.exports = {\n  theme: {\n    extend: {\n      animation: {\n        'wave-drift': 'wave-drift 60s linear infinite',\n        'wave-slow': 'wave-drift 90s linear infinite',\n        'wave-fast': 'wave-drift 35s linear infinite',\n      },\n      keyframes: {\n        'wave-drift': {\n          from: { transform: 'translateX(0)' },\n          to: { transform: 'translateX(-50%)' },\n        },\n      },\n      colors: {\n        ocean: {\n          deep: '#0c4a6e',\n          mid: '#0369a1',\n          surface: '#0ea5e9',\n          foam: '#f0f9ff',\n        },\n      },\n    },\n  },\n};\n```\n\n### Vue 3\n\n```vue\n<template>\n  <div class=\"ocean-container\">\n    <WaveFilters />\n    <div\n      v-for=\"layer in waveLayers\"\n      :key=\"layer.id\"\n      class=\"wave-layer\"\n      :style=\"layer.style\"\n    />\n    <slot />\n  </div>\n</template>\n\n<script setup>\nimport { computed, onMounted, ref } from 'vue';\nimport WaveFilters from './WaveFilters.vue';\n\nconst waveLayers = computed(() => [\n  { id: 1, style: { filter: 'url(#wave1)', animationDuration: '80s', opacity: 0.4 }},\n  { id: 2, style: { filter: 'url(#wave2)', animationDuration: '55s', opacity: 0.6 }},\n  { id: 3, style: { filter: 'url(#wave3)', animationDuration: '35s', opacity: 0.8 }},\n]);\n</script>\n```\n\n## Debugging Tips\n\n### Visualize Filter Pipeline\n\n```xml\n<!-- Show each filter step -->\n<filter id=\"debug-water\">\n  <feTurbulence result=\"step1\"/>\n  <feImage href=\"#step1\" x=\"0\" y=\"0\" width=\"200\" height=\"200\"/>\n\n  <feDisplacementMap in=\"SourceGraphic\" in2=\"step1\" result=\"step2\"/>\n  <feImage href=\"#step2\" x=\"200\" y=\"0\" width=\"200\" height=\"200\"/>\n</filter>\n```\n\n### Common Issues\n\n| Problem | Cause | Solution |\n|---------|-------|----------|\n| Effect disappears | Filter region too small | Add `x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\"` |\n| Square/boxy waves | Using fractalNoise | Change to `type=\"turbulence\"` |\n| Waves too uniform | Same seed across layers | Use different `seed` values |\n| No horizontal motion | Equal baseFrequency values | Use `baseFrequency=\"0.01 0.1\"` (different x/y) |\n| Animation stuttering | Animating filter attributes | Use CSS transform animations instead |\n| Edge artifacts | Displacement at boundaries | Increase filter region with x/y/width/height |\n\n### Browser DevTools\n\n1. **Elements panel** > Select SVG filter > Inspect attributes\n2. **Performance panel** > Record > Check for layout thrashing\n3. **Layers panel** (Chrome) > Verify GPU acceleration on wave layers\n\n## Integration with web-cloud-designer\n\nFor complete atmospheric scenes, combine water and cloud effects:\n\n```html\n<div class=\"scene\">\n  <!-- Sky with clouds (from web-cloud-designer) -->\n  <div class=\"sky\">\n    <div class=\"cloud-layer cloud-back\"></div>\n    <div class=\"cloud-layer cloud-front\"></div>\n  </div>\n\n  <!-- Horizon -->\n  <div class=\"horizon\"></div>\n\n  <!-- Ocean with waves (this skill) -->\n  <div class=\"ocean\">\n    <div class=\"wave wave-back\"></div>\n    <div class=\"wave wave-front\"></div>\n    <div class=\"reflection\"></div>\n  </div>\n</div>\n\n<style>\n  .scene {\n    height: 100vh;\n    display: grid;\n    grid-template-rows: 60% 40%;\n  }\n\n  .sky {\n    background: linear-gradient(180deg, #1e3c72 0%, #87CEEB 100%);\n  }\n\n  .ocean {\n    background: linear-gradient(180deg, #0369a1 0%, #0c4a6e 100%);\n  }\n\n  .reflection {\n    /* Mirror cloud movement on water surface */\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 30%;\n    background: inherit;\n    transform: scaleY(-1);\n    opacity: 0.3;\n    filter: url(#waterReflection) blur(2px);\n  }\n</style>\n```\n\n## Reference Sources\n\n- Red Stapler: \"Realistic Water Effect SVG Turbulence\"\n- Mitkov Systems: \"Liquid Glass Water Animation\" (2025)\n- O'Reilly SVG Book: feTurbulence Chapter\n- MDN: SVG Filter Primitives Documentation\n- CSS-Tricks: \"Underwater Blur Effect\"\n- Codrops: \"Water Distortion Effect\"\n\n---\n\n*Water is the driving force of all nature.* - Leonardo da Vinci\n"
    }
  ]
}