{
  "name": "api-architect",
  "type": "folder",
  "path": "api-architect",
  "children": [
    {
      "name": "references",
      "type": "folder",
      "path": "api-architect/references",
      "children": [
        {
          "name": "api-security.yaml",
          "type": "file",
          "path": "api-architect/references/api-security.yaml",
          "size": 3872
        },
        {
          "name": "graphql-schema.graphql",
          "type": "file",
          "path": "api-architect/references/graphql-schema.graphql",
          "size": 1702
        },
        {
          "name": "grpc-service.proto",
          "type": "file",
          "path": "api-architect/references/grpc-service.proto",
          "size": 2269
        },
        {
          "name": "openapi-spec.yaml",
          "type": "file",
          "path": "api-architect/references/openapi-spec.yaml",
          "size": 3512
        },
        {
          "name": "rate-limiting.yaml",
          "type": "file",
          "path": "api-architect/references/rate-limiting.yaml",
          "size": 2700
        }
      ]
    },
    {
      "name": "scripts",
      "type": "folder",
      "path": "api-architect/scripts",
      "children": [
        {
          "name": "validate-api-spec.sh",
          "type": "file",
          "path": "api-architect/scripts/validate-api-spec.sh",
          "size": 7287,
          "content": "#!/bin/bash\n# API Architect Skill Validation Script\n# Validates API specifications for common issues and best practices\n\nset -e\n\nERRORS=0\nWARNINGS=0\n\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"API Architect Skill Validator\"\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"\"\n\n# Check for OpenAPI specifications\ncheck_openapi() {\n    echo \"ğŸ“‹ Checking OpenAPI specifications...\"\n\n    for spec in *.yaml *.yml openapi/*.yaml openapi/*.yml api/*.yaml api/*.yml; do\n        [ -f \"$spec\" ] || continue\n\n        # Check if it's an OpenAPI file\n        if ! grep -q \"openapi:\" \"$spec\" 2>/dev/null; then\n            continue\n        fi\n\n        echo \"  Checking: $spec\"\n\n        # Check for version\n        if ! grep -qE \"openapi:\\s*(3\\.[0-9]+\\.[0-9]+)\" \"$spec\" 2>/dev/null; then\n            echo \"âš ï¸  WARN: $spec may be using outdated OpenAPI version (prefer 3.0+)\"\n            ((WARNINGS++))\n        fi\n\n        # Check for info section\n        if ! grep -q \"^info:\" \"$spec\" 2>/dev/null; then\n            echo \"âŒ ERROR: $spec missing info section\"\n            ((ERRORS++))\n        fi\n\n        # Check for servers\n        if ! grep -q \"^servers:\" \"$spec\" 2>/dev/null; then\n            echo \"âš ï¸  WARN: $spec missing servers section\"\n            ((WARNINGS++))\n        fi\n\n        # Check for security schemes\n        if ! grep -q \"securitySchemes:\" \"$spec\" 2>/dev/null; then\n            echo \"âš ï¸  WARN: $spec missing security schemes\"\n            ((WARNINGS++))\n        fi\n\n        # Check for operationId\n        if grep -q \"get:\\|post:\\|put:\\|patch:\\|delete:\" \"$spec\" 2>/dev/null; then\n            if ! grep -q \"operationId:\" \"$spec\" 2>/dev/null; then\n                echo \"âš ï¸  WARN: $spec missing operationId (required for SDK generation)\"\n                ((WARNINGS++))\n            fi\n        fi\n\n        # Check for verb-based paths (anti-pattern)\n        if grep -qE \"/get[A-Z]|/create[A-Z]|/update[A-Z]|/delete[A-Z]\" \"$spec\" 2>/dev/null; then\n            echo \"âŒ ERROR: $spec contains verb-based URLs (use nouns, let HTTP methods convey action)\"\n            ((ERRORS++))\n        fi\n\n        # Check for consistent error schemas\n        if grep -q \"responses:\" \"$spec\" 2>/dev/null; then\n            if ! grep -qE \"'4[0-9]{2}':|\\\"4[0-9]{2}\\\":\" \"$spec\" 2>/dev/null; then\n                echo \"âš ï¸  WARN: $spec missing 4xx error responses\"\n                ((WARNINGS++))\n            fi\n        fi\n    done\n}\n\n# Check GraphQL schemas\ncheck_graphql() {\n    echo \"\"\n    echo \"ğŸ”· Checking GraphQL schemas...\"\n\n    for schema in *.graphql schema/*.graphql graphql/*.graphql; do\n        [ -f \"$schema\" ] || continue\n\n        echo \"  Checking: $schema\"\n\n        # Check for Query type\n        if ! grep -q \"type Query\" \"$schema\" 2>/dev/null; then\n            echo \"âŒ ERROR: $schema missing Query type\"\n            ((ERRORS++))\n        fi\n\n        # Check for Relay-style pagination\n        if grep -q \"type.*Connection\" \"$schema\" 2>/dev/null; then\n            if ! grep -q \"type PageInfo\" \"$schema\" 2>/dev/null; then\n                echo \"âš ï¸  WARN: $schema has Connection types but missing PageInfo\"\n                ((WARNINGS++))\n            fi\n        fi\n\n        # Check for mutation payloads with errors\n        if grep -q \"type Mutation\" \"$schema\" 2>/dev/null; then\n            if ! grep -qE \"errors:\\s*\\[\" \"$schema\" 2>/dev/null; then\n                echo \"âš ï¸  WARN: $schema mutations should return error arrays in payloads\"\n                ((WARNINGS++))\n            fi\n        fi\n\n        # Check for custom scalars\n        if grep -qE \"DateTime|Date|JSON|UUID\" \"$schema\" 2>/dev/null; then\n            if ! grep -q \"scalar DateTime\\|scalar Date\\|scalar JSON\\|scalar UUID\" \"$schema\" 2>/dev/null; then\n                echo \"âš ï¸  WARN: $schema uses custom types without scalar definitions\"\n                ((WARNINGS++))\n            fi\n        fi\n    done\n}\n\n# Check Protocol Buffer definitions\ncheck_protobuf() {\n    echo \"\"\n    echo \"ğŸ”Œ Checking Protocol Buffer definitions...\"\n\n    for proto in *.proto proto/*.proto; do\n        [ -f \"$proto\" ] || continue\n\n        echo \"  Checking: $proto\"\n\n        # Check for syntax version\n        if ! grep -q 'syntax = \"proto3\"' \"$proto\" 2>/dev/null; then\n            echo \"âš ï¸  WARN: $proto not using proto3 syntax\"\n            ((WARNINGS++))\n        fi\n\n        # Check for package definition\n        if ! grep -q \"^package \" \"$proto\" 2>/dev/null; then\n            echo \"âŒ ERROR: $proto missing package definition\"\n            ((ERRORS++))\n        fi\n\n        # Check for go_package option\n        if ! grep -q \"option go_package\" \"$proto\" 2>/dev/null; then\n            echo \"âš ï¸  WARN: $proto missing go_package option\"\n            ((WARNINGS++))\n        fi\n\n        # Check for field numbers > 0\n        if grep -qE \"=\\s*0\\s*;\" \"$proto\" 2>/dev/null; then\n            # Check if it's in an enum (0 is required for enums)\n            if ! grep -B5 \"= 0;\" \"$proto\" | grep -q \"enum\" 2>/dev/null; then\n                echo \"âŒ ERROR: $proto has field number 0 (must be positive for messages)\"\n                ((ERRORS++))\n            fi\n        fi\n    done\n}\n\n# Check for common API design issues\ncheck_common_issues() {\n    echo \"\"\n    echo \"ğŸ” Checking for common API design issues...\"\n\n    # Check for hardcoded localhost/IP addresses\n    for file in *.yaml *.yml *.json; do\n        [ -f \"$file\" ] || continue\n\n        if grep -qE \"localhost|127\\.0\\.0\\.1|0\\.0\\.0\\.0\" \"$file\" 2>/dev/null; then\n            if ! echo \"$file\" | grep -qE \"dev|local|test\" 2>/dev/null; then\n                echo \"âš ï¸  WARN: $file contains localhost/IP (use environment variables)\"\n                ((WARNINGS++))\n            fi\n        fi\n    done\n\n    # Check for API versioning\n    has_versioning=false\n    if grep -rqE \"/v[0-9]+/\" *.yaml *.yml 2>/dev/null; then\n        has_versioning=true\n    fi\n    if grep -rq \"version:\" *.yaml *.yml 2>/dev/null | grep -qE \"header|query\" 2>/dev/null; then\n        has_versioning=true\n    fi\n\n    if [ \"$has_versioning\" = false ]; then\n        echo \"â„¹ï¸  INFO: No API versioning strategy detected\"\n    fi\n}\n\n# Run all checks\ncheck_openapi\ncheck_graphql\ncheck_protobuf\ncheck_common_issues\n\n# Summary\necho \"\"\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"Validation Complete\"\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"Errors:   $ERRORS\"\necho \"Warnings: $WARNINGS\"\necho \"\"\n\nif [ $ERRORS -gt 0 ]; then\n    echo \"âŒ Validation FAILED - fix errors before publishing API\"\n    exit 1\nelif [ $WARNINGS -gt 5 ]; then\n    echo \"âš ï¸  Validation PASSED with warnings - review recommended\"\n    exit 0\nelse\n    echo \"âœ… Validation PASSED\"\n    exit 0\nfi\n"
        }
      ]
    },
    {
      "name": "CHANGELOG.md",
      "type": "file",
      "path": "api-architect/CHANGELOG.md",
      "size": 1335,
      "content": "# Changelog\n\nAll notable changes to the api-architect skill will be documented in this file.\n\n## [2.0.0] - 2024-12-12\n\n### Changed\n- **BREAKING**: Restructured SKILL.md from 561 lines to ~170 lines for progressive disclosure\n- Moved all large code examples to `./references/` directory\n- Expanded anti-patterns section from 5 to 10 patterns\n\n### Added\n- `references/openapi-spec.yaml` - Complete OpenAPI 3.1 specification example\n- `references/graphql-schema.graphql` - Full GraphQL schema with Relay connections\n- `references/grpc-service.proto` - Protocol Buffer with all streaming patterns\n- `references/rate-limiting.yaml` - Tier-based rate limiting configuration\n- `references/api-security.yaml` - Authentication, authorization, and security headers\n- `scripts/validate-api-spec.sh` - Validation script for OpenAPI, GraphQL, and Protobuf\n- New anti-patterns: Inconsistent Naming, Missing Pagination, No Idempotency, Leaky Abstractions, Missing CORS\n- Expanded quality checklist with 12 items\n- Version number in frontmatter\n\n### Removed\n- Inline code examples (now in references/)\n- Redundant capability descriptions\n\n## [1.0.0] - 2024-12-10\n\n### Added\n- Initial release\n- REST API design patterns\n- GraphQL schema design\n- gRPC service definitions\n- API security patterns\n- Rate limiting design\n- Developer experience guidelines\n"
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "api-architect/SKILL.md",
      "size": 5360,
      "content": "---\nname: api-architect\ndescription: \"Expert API designer for REST, GraphQL, gRPC architectures. Activate on: API design, REST API, GraphQL schema, gRPC service, OpenAPI, Swagger, API versioning, endpoint design, rate limiting, OAuth flow. NOT for: database schema (use data-pipeline-engineer), frontend consumption (use web-design-expert), deployment (use devops-automator).\"\nallowed-tools: Read,Write,Edit,Bash(npm:*,npx:*,openapi-generator:*)\nversion: 2.0.0\n---\n\n# API Architect\n\nExpert API designer specializing in REST, GraphQL, gRPC, and WebSocket architectures.\n\n## Activation Triggers\n\n**Activate on:** \"API design\", \"REST API\", \"GraphQL schema\", \"gRPC service\", \"OpenAPI\", \"Swagger\", \"API versioning\", \"endpoint design\", \"rate limiting\", \"OAuth flow\", \"API gateway\"\n\n**NOT for:** Database schema â†’ `data-pipeline-engineer` | Frontend consumption â†’ `web-design-expert` | Deployment â†’ `devops-automator`\n\n## Quick Start\n\n1. **Define API contract first** (API-first design)\n2. **Choose paradigm**: REST for CRUD, GraphQL for flexible queries, gRPC for internal services\n3. **Write the spec**: OpenAPI for REST, SDL for GraphQL, .proto for gRPC\n4. **Design error responses** with consistent structure\n5. **Plan versioning** before your first release\n\n## Core Capabilities\n\n| Domain | Technologies |\n|--------|-------------|\n| **REST** | OpenAPI 3.1, HATEOAS, Pagination |\n| **GraphQL** | SDL, Relay, DataLoader, Federation |\n| **gRPC** | Protocol Buffers, Streaming patterns |\n| **Security** | OAuth 2.0, JWT, API Keys, RBAC |\n| **DX** | Swagger UI, SDK generation, Sandboxes |\n\n## Architecture Patterns\n\n### API-First Development\n```\nDesign Contract â†’ Generate Stubs â†’ Implement â†’ Test Against Spec\n```\n\n### Response Envelope\n```yaml\nsuccess: { data: <resource>, meta: { page, total } }\nerror: { error: { code, message, details: [{ field, issue }] } }\n```\n\n### Versioning Options\n- URL: `/v1/users` (most explicit)\n- Header: `Accept: application/vnd.api+json;version=1`\n- Query: `/users?version=1`\n\n## Reference Files\n\nFull working examples in `./references/`:\n\n| File | Description | Lines |\n|------|-------------|-------|\n| `openapi-spec.yaml` | Complete OpenAPI 3.1 spec | 162 |\n| `graphql-schema.graphql` | GraphQL with Relay connections | 111 |\n| `grpc-service.proto` | Protocol Buffer, all streaming | 95 |\n| `rate-limiting.yaml` | Tier-based rate limit config | 85 |\n| `api-security.yaml` | Auth, CORS, security headers | 130 |\n\n## Anti-Patterns (AVOID These)\n\n### 1. Verb-Based URLs\n**Symptom**: `/getUsers`, `/createOrder`, `/deleteProduct`\n**Fix**: Use nouns (`/users`, `/orders`), let HTTP methods convey action\n\n### 2. Inconsistent Response Envelopes\n**Symptom**: `{data: [...]}` sometimes, raw arrays other times\n**Fix**: Always use consistent envelope structure\n\n### 3. Breaking Changes Without Versioning\n**Symptom**: Removing fields, changing types without warning\n**Fix**: Semantic versioning, deprecation headers, sunset periods\n\n### 4. N+1 in GraphQL\n**Symptom**: Resolver queries database per item in list\n**Fix**: DataLoader pattern for batching, `@defer` for large payloads\n\n### 5. Over-fetching REST Endpoints\n**Symptom**: `/users` returns 50 fields when clients need 3\n**Fix**: Sparse fieldsets (`?fields=id,name,email`) or GraphQL\n\n### 6. Missing Pagination\n**Symptom**: List endpoints return all records\n**Fix**: Default limits, cursor-based pagination, `hasMore` indicator\n\n### 7. No Idempotency Keys\n**Symptom**: Duplicate POST requests create duplicate resources\n**Fix**: Accept `Idempotency-Key` header, return cached response\n\n### 8. Leaky Internal Errors\n**Symptom**: Stack traces, SQL errors exposed in 500 responses\n**Fix**: Generic error messages in production, request IDs for debugging\n\n### 9. Missing CORS Configuration\n**Symptom**: Browser clients blocked with CORS errors\n**Fix**: Configure allowed origins, methods, headers explicitly\n\n### 10. No Rate Limiting\n**Symptom**: API vulnerable to abuse, no usage visibility\n**Fix**: Implement limits per tier, return `X-RateLimit-*` headers\n\n## Validation Script\n\nRun `./scripts/validate-api-spec.sh` to check:\n- OpenAPI specs for versions, security schemes, operationIds\n- GraphQL schemas for Query types, pagination, error handling\n- Protocol Buffers for syntax, packages, field numbers\n- Common issues like hardcoded URLs, missing versioning\n\n## Quality Checklist\n\n```\n[ ] All endpoints use nouns, not verbs\n[ ] Consistent response envelope structure\n[ ] Error responses include codes and actionable messages\n[ ] Pagination on all list endpoints\n[ ] Authentication/authorization documented\n[ ] Rate limit headers defined\n[ ] Versioning strategy documented\n[ ] CORS configured for known origins\n[ ] Idempotency keys for mutating operations\n[ ] OpenAPI spec validates without errors\n[ ] SDK generation tested\n[ ] Examples for all request/response types\n```\n\n## Output Artifacts\n\n1. **OpenAPI Specifications** - Complete API contracts\n2. **GraphQL Schemas** - Type definitions with connections\n3. **Protocol Buffers** - gRPC service definitions\n4. **API Documentation** - Developer guides\n5. **SDK Examples** - Client code samples\n6. **Postman Collections** - API test suites\n\n## Tools Available\n\n- `Read`, `Write`, `Edit` - File operations for specs\n- `Bash(npm:*, npx:*)` - OpenAPI linting, code generation\n- `Bash(openapi-generator:*)` - SDK generation\n"
    }
  ]
}