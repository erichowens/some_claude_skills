{
  "name": "dark-mode-design-expert",
  "type": "folder",
  "path": "dark-mode-design-expert",
  "children": [
    {
      "name": "references",
      "type": "folder",
      "path": "dark-mode-design-expert/references",
      "children": [
        {
          "name": "css-implementation.md",
          "type": "file",
          "path": "dark-mode-design-expert/references/css-implementation.md",
          "size": 9316,
          "content": "# CSS Dark Mode Implementation Patterns\n\n## The Modern Stack (2024-2025)\n\n### 1. `color-scheme` Property\n\nTells the browser which color schemes your page supports:\n\n```css\n/* Support both */\n:root {\n  color-scheme: light dark;\n}\n\n/* This enables native styling for:\n   - Scrollbars\n   - Form controls\n   - Selection highlighting\n   - System colors\n*/\n```\n\n### 2. `prefers-color-scheme` Media Query\n\nDetect user's system preference:\n\n```css\n/* Light mode (explicit) */\n@media (prefers-color-scheme: light) {\n  :root {\n    --bg: #ffffff;\n    --text: #1f2937;\n  }\n}\n\n/* Dark mode */\n@media (prefers-color-scheme: dark) {\n  :root {\n    --bg: #0c1222;\n    --text: #f1f5f9;\n  }\n}\n```\n\n### 3. `light-dark()` Function (CSS Color Level 5)\n\nNew in 2024 - inline theme switching:\n\n```css\n:root {\n  color-scheme: light dark;\n}\n\n.card {\n  /* First value for light, second for dark */\n  background: light-dark(#ffffff, #1e1e1e);\n  color: light-dark(#1f2937, #f3f4f6);\n  border: 1px solid light-dark(#e5e7eb, rgba(255,255,255,0.1));\n}\n```\n\n**Browser Support (Jan 2025):** Chrome 123+, Firefox 120+, Safari 17.5+\n\n## Implementation Patterns\n\n### Pattern A: CSS Custom Properties (Recommended)\n\n```css\n/* Base tokens - light mode default */\n:root {\n  --color-bg-primary: #ffffff;\n  --color-bg-secondary: #f8fafc;\n  --color-text-primary: #0f172a;\n  --color-text-secondary: #475569;\n  --color-border: #e2e8f0;\n  --color-accent: #0284c7;\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n/* Dark mode overrides */\n@media (prefers-color-scheme: dark) {\n  :root:not(.theme-light) {\n    --color-bg-primary: #0c1222;\n    --color-bg-secondary: #151b2e;\n    --color-text-primary: #f1f5f9;\n    --color-text-secondary: #94a3b8;\n    --color-border: rgba(255, 255, 255, 0.1);\n    --color-accent: #38bdf8;\n    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);\n  }\n}\n\n/* Explicit dark mode class (overrides system) */\n:root.theme-dark {\n  --color-bg-primary: #0c1222;\n  /* ... same as above ... */\n}\n\n/* Explicit light mode class (overrides system) */\n:root.theme-light {\n  --color-bg-primary: #ffffff;\n  /* ... same as above ... */\n}\n\n/* Components consume semantic tokens */\n.card {\n  background: var(--color-bg-secondary);\n  color: var(--color-text-primary);\n  border: 1px solid var(--color-border);\n  box-shadow: var(--shadow-md);\n}\n```\n\n### Pattern B: Data Attribute Selector\n\n```css\n/* Using data attribute for theme state */\n[data-theme=\"light\"] {\n  --bg: #ffffff;\n  --text: #1f2937;\n}\n\n[data-theme=\"dark\"] {\n  --bg: #0c1222;\n  --text: #f1f5f9;\n}\n\n/* System preference fallback */\n@media (prefers-color-scheme: dark) {\n  :root:not([data-theme=\"light\"]) {\n    --bg: #0c1222;\n    --text: #f1f5f9;\n  }\n}\n```\n\n```javascript\n// Toggle theme\ndocument.documentElement.dataset.theme = 'dark';\n```\n\n### Pattern C: Class-Based (Simple)\n\n```css\n.theme-light {\n  --bg: #ffffff;\n  --text: #1f2937;\n}\n\n.theme-dark {\n  --bg: #0c1222;\n  --text: #f1f5f9;\n}\n```\n\n## Preventing Flash of Wrong Theme (FOWT)\n\n### The Problem\n\n```\n1. Browser requests page\n2. HTML loads with no theme class\n3. CSS loads, applies light mode (default)\n4. JavaScript runs, reads localStorage, applies dark class\n5. Page flashes from light to dark ← BAD UX\n```\n\n### Solution: Blocking Script in `<head>`\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n\n  <!-- BLOCKING: Runs before CSS renders -->\n  <script>\n    (function() {\n      // Check localStorage first\n      const saved = localStorage.getItem('theme');\n      if (saved === 'dark') {\n        document.documentElement.classList.add('theme-dark');\n      } else if (saved === 'light') {\n        document.documentElement.classList.add('theme-light');\n      }\n      // If no saved preference, CSS media queries handle it\n    })();\n  </script>\n\n  <!-- CSS loads after theme class is set -->\n  <link rel=\"stylesheet\" href=\"styles.css\">\n</head>\n```\n\n### Alternative: CSS-Only with `@import`\n\n```css\n/* Import theme based on system preference */\n@import url('light.css') (prefers-color-scheme: light);\n@import url('dark.css') (prefers-color-scheme: dark);\n```\n\n## Theme Switching JavaScript\n\n### Complete Implementation\n\n```typescript\ntype Theme = 'light' | 'dark' | 'system';\n\nclass ThemeManager {\n  private static STORAGE_KEY = 'theme';\n\n  static init() {\n    // Apply saved theme immediately (called from head script)\n    const saved = localStorage.getItem(this.STORAGE_KEY) as Theme | null;\n    if (saved && saved !== 'system') {\n      document.documentElement.classList.add(`theme-${saved}`);\n    }\n\n    // Listen for system changes\n    window.matchMedia('(prefers-color-scheme: dark)')\n      .addEventListener('change', (e) => {\n        if (!localStorage.getItem(this.STORAGE_KEY)) {\n          // Only react if user hasn't set explicit preference\n          this.updateMetaThemeColor(e.matches ? 'dark' : 'light');\n        }\n      });\n  }\n\n  static setTheme(theme: Theme) {\n    const root = document.documentElement;\n    root.classList.remove('theme-light', 'theme-dark');\n\n    if (theme === 'system') {\n      localStorage.removeItem(this.STORAGE_KEY);\n    } else {\n      root.classList.add(`theme-${theme}`);\n      localStorage.setItem(this.STORAGE_KEY, theme);\n    }\n\n    this.updateMetaThemeColor(this.getEffectiveTheme());\n  }\n\n  static getTheme(): Theme {\n    return (localStorage.getItem(this.STORAGE_KEY) as Theme) || 'system';\n  }\n\n  static getEffectiveTheme(): 'light' | 'dark' {\n    const saved = this.getTheme();\n    if (saved !== 'system') return saved;\n\n    return window.matchMedia('(prefers-color-scheme: dark)').matches\n      ? 'dark'\n      : 'light';\n  }\n\n  private static updateMetaThemeColor(theme: 'light' | 'dark') {\n    const color = theme === 'dark' ? '#0c1222' : '#ffffff';\n    let meta = document.querySelector('meta[name=\"theme-color\"]');\n\n    if (!meta) {\n      meta = document.createElement('meta');\n      meta.setAttribute('name', 'theme-color');\n      document.head.appendChild(meta);\n    }\n\n    meta.setAttribute('content', color);\n  }\n}\n```\n\n### React Hook\n\n```typescript\nimport { useEffect, useState } from 'react';\n\ntype Theme = 'light' | 'dark' | 'system';\n\nexport function useTheme() {\n  const [theme, setThemeState] = useState<Theme>(() => {\n    if (typeof window === 'undefined') return 'system';\n    return (localStorage.getItem('theme') as Theme) || 'system';\n  });\n\n  const [resolvedTheme, setResolvedTheme] = useState<'light' | 'dark'>(() => {\n    if (typeof window === 'undefined') return 'light';\n    return window.matchMedia('(prefers-color-scheme: dark)').matches\n      ? 'dark'\n      : 'light';\n  });\n\n  useEffect(() => {\n    const root = document.documentElement;\n    root.classList.remove('theme-light', 'theme-dark');\n\n    if (theme === 'system') {\n      localStorage.removeItem('theme');\n      setResolvedTheme(\n        window.matchMedia('(prefers-color-scheme: dark)').matches\n          ? 'dark'\n          : 'light'\n      );\n    } else {\n      root.classList.add(`theme-${theme}`);\n      localStorage.setItem('theme', theme);\n      setResolvedTheme(theme);\n    }\n  }, [theme]);\n\n  // Listen for system preference changes\n  useEffect(() => {\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n\n    const handler = (e: MediaQueryListEvent) => {\n      if (theme === 'system') {\n        setResolvedTheme(e.matches ? 'dark' : 'light');\n      }\n    };\n\n    mediaQuery.addEventListener('change', handler);\n    return () => mediaQuery.removeEventListener('change', handler);\n  }, [theme]);\n\n  return {\n    theme,\n    resolvedTheme,\n    setTheme: setThemeState,\n    isDark: resolvedTheme === 'dark',\n  };\n}\n```\n\n## Image Handling\n\n### Approach 1: CSS Filters\n\n```css\n/* Dim images slightly in dark mode */\n:root.theme-dark img:not([data-no-dim]) {\n  filter: brightness(0.9);\n}\n\n/* Invert diagrams/icons that are black on white */\n:root.theme-dark img[data-invert] {\n  filter: invert(1) hue-rotate(180deg);\n}\n```\n\n### Approach 2: Picture Element\n\n```html\n<picture>\n  <source srcset=\"hero-dark.jpg\" media=\"(prefers-color-scheme: dark)\">\n  <img src=\"hero-light.jpg\" alt=\"Hero image\">\n</picture>\n```\n\n### Approach 3: CSS Background\n\n```css\n.hero {\n  background-image: url('hero-light.jpg');\n}\n\n@media (prefers-color-scheme: dark) {\n  .hero {\n    background-image: url('hero-dark.jpg');\n  }\n}\n```\n\n## Form Element Styling\n\n```css\n/* Reset form elements to use theme colors */\n:root.theme-dark {\n  color-scheme: dark;\n}\n\n/* Custom form styling */\ninput, textarea, select {\n  background: var(--color-bg-primary);\n  color: var(--color-text-primary);\n  border: 1px solid var(--color-border);\n}\n\ninput::placeholder {\n  color: var(--color-text-muted);\n}\n\n/* Focus ring */\ninput:focus {\n  outline: none;\n  border-color: var(--color-accent);\n  box-shadow: 0 0 0 3px rgba(var(--color-accent-rgb), 0.2);\n}\n```\n\n## Debugging Tips\n\n### Chrome DevTools\n\n1. **Emulate `prefers-color-scheme`:**\n   - Open DevTools → Rendering tab → Emulate CSS media feature\n\n2. **See computed values:**\n   - Inspect element → Computed tab → Filter by CSS variable\n\n### Testing Checklist\n\n```javascript\n// Test all theme states\nconst testThemes = () => {\n  ['light', 'dark', 'system'].forEach(theme => {\n    ThemeManager.setTheme(theme);\n    console.log(`Theme: ${theme}, Effective: ${ThemeManager.getEffectiveTheme()}`);\n    // Visual inspection or screenshot\n  });\n};\n```\n"
        },
        {
          "name": "elevation-strategies.md",
          "type": "file",
          "path": "dark-mode-design-expert/references/elevation-strategies.md",
          "size": 5088,
          "content": "# Elevation Strategies in Dark Mode\n\n## The Core Problem\n\nIn light mode, shadows create visual hierarchy by simulating a light source from above. This breaks completely in dark mode:\n\n```\nLIGHT MODE                          DARK MODE\n┌─────────────────┐                ┌─────────────────┐\n│     Card        │                │     Card        │\n│                 │                │                 │\n└─────────────────┘                └─────────────────┘\n       ████████ (shadow visible)         (shadow invisible!)\n```\n\n## Strategy 1: Surface Color Elevation (Recommended)\n\nMaterial Design 3's approach: elevated surfaces are **lighter**, not shadowed.\n\n```css\n:root.theme-dark {\n  /* Each elevation level is progressively lighter */\n  --surface-0: #121212;   /* Base */\n  --surface-1: #1e1e1e;   /* +5% white */\n  --surface-2: #232323;   /* +7% white */\n  --surface-3: #252525;   /* +8% white */\n  --surface-4: #272727;   /* +9% white */\n  --surface-5: #2c2c2c;   /* +11% white */\n}\n\n/* Modal (highest elevation) */\n.modal {\n  background: var(--surface-5);\n}\n\n/* Dropdown (medium elevation) */\n.dropdown {\n  background: var(--surface-3);\n}\n\n/* Card (low elevation) */\n.card {\n  background: var(--surface-1);\n}\n\n/* Page (base level) */\nbody {\n  background: var(--surface-0);\n}\n```\n\n### Calculating Overlay Percentages\n\n```javascript\nfunction calculateElevation(baseColor, level) {\n  const overlayPercentages = [0, 5, 7, 8, 9, 11, 12, 14, 15, 16];\n  const overlay = overlayPercentages[level] / 100;\n\n  // Mix white into base color\n  return mixColors(baseColor, '#ffffff', overlay);\n}\n```\n\n## Strategy 2: Border Definition\n\nUse subtle borders to define boundaries instead of shadows.\n\n```css\n:root.theme-dark {\n  --border-subtle: rgba(255, 255, 255, 0.06);\n  --border-default: rgba(255, 255, 255, 0.1);\n  --border-emphasis: rgba(255, 255, 255, 0.16);\n}\n\n.card {\n  background: var(--surface-1);\n  border: 1px solid var(--border-default);\n}\n\n.card:hover {\n  border-color: var(--border-emphasis);\n}\n```\n\n## Strategy 3: Glow Effects (For Accents)\n\nReplace drop shadows with ambient glow for interactive elements.\n\n```css\n.button-primary {\n  background: var(--color-accent);\n  /* Replace shadow with glow */\n  box-shadow: 0 0 0 0 transparent;\n  transition: box-shadow 0.2s ease;\n}\n\n.button-primary:hover {\n  box-shadow: 0 0 20px rgba(56, 189, 248, 0.4);\n}\n\n.button-primary:focus {\n  box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.5);\n}\n```\n\n## Strategy 4: Hybrid Approach\n\nCombine strategies based on context.\n\n```css\n:root.theme-dark {\n  /* Modals get surface elevation + border + subtle shadow */\n  --modal-bg: var(--surface-4);\n  --modal-border: var(--border-default);\n  --modal-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n\n  /* Cards get surface elevation + border, no shadow */\n  --card-bg: var(--surface-1);\n  --card-border: var(--border-subtle);\n  --card-shadow: none;\n\n  /* Buttons get glow on interaction */\n  --button-shadow-hover: 0 0 20px var(--glow-color);\n}\n```\n\n## Z-Index Correlation\n\nHigher z-index should correlate with higher surface elevation:\n\n| Element | Z-Index | Surface Level | Border |\n|---------|---------|---------------|--------|\n| Page | 0 | 0 | none |\n| Card | 1 | 1 | subtle |\n| Sticky header | 10 | 2 | default |\n| Dropdown | 20 | 3 | default |\n| Modal backdrop | 40 | - | - |\n| Modal | 50 | 5 | emphasis |\n| Toast | 60 | 5 | emphasis |\n| Tooltip | 70 | 4 | default |\n\n## Animation Considerations\n\n```css\n/* Surface elevation changes should animate */\n.card {\n  background: var(--surface-1);\n  transition: background 0.2s ease;\n}\n\n.card:hover {\n  background: var(--surface-2);\n}\n\n/* Glow should animate smoothly */\n.interactive {\n  box-shadow: 0 0 0 0 transparent;\n  transition: box-shadow 0.3s ease;\n}\n\n.interactive:focus {\n  box-shadow: 0 0 16px var(--glow-color);\n}\n```\n\n## Common Mistakes\n\n### Mistake 1: Using Light Mode Shadows\n\n```css\n/* DON'T: Same shadow in dark mode */\n.card {\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n/* DO: Dark mode uses elevation */\n:root.theme-dark .card {\n  background: var(--surface-1);\n  box-shadow: none;\n}\n```\n\n### Mistake 2: Flat Design (No Hierarchy)\n\n```css\n/* DON'T: Everything same surface */\n.card, .modal, .dropdown {\n  background: #1e1e1e;\n}\n\n/* DO: Progressive elevation */\n.card { background: var(--surface-1); }\n.dropdown { background: var(--surface-3); }\n.modal { background: var(--surface-5); }\n```\n\n### Mistake 3: Too Much Contrast in Elevation\n\n```css\n/* DON'T: Jarring jumps */\n--surface-0: #000000;\n--surface-1: #444444;  /* Too bright! */\n\n/* DO: Subtle progression */\n--surface-0: #121212;\n--surface-1: #1e1e1e;  /* +5% white */\n```\n\n## Testing Elevation\n\n1. **Squint test**: Can you still see hierarchy when squinting?\n2. **Screenshot grayscale**: Does hierarchy survive desaturation?\n3. **Low brightness**: Is elevation visible at minimum brightness?\n4. **High brightness**: Does it wash out in bright environments?\n"
        },
        {
          "name": "oled-optimization.md",
          "type": "file",
          "path": "dark-mode-design-expert/references/oled-optimization.md",
          "size": 5112,
          "content": "# OLED Optimization Guide\n\n## How OLED Displays Work\n\nOLED (Organic Light-Emitting Diode) pixels emit their own light. Unlike LCD:\n- Black pixels are **completely off** (true black)\n- Each pixel consumes power proportional to its brightness\n- Dark content = less power consumption\n\n## Battery Savings Research\n\n### Google's 2018 Study (Android)\n\n| Brightness | Light Theme | Dark Theme | Savings |\n|------------|-------------|------------|---------|\n| 100% | 100% baseline | 63% | **37%** |\n| 50% | 100% baseline | 79% | **21%** |\n| 20% | 100% baseline | 91% | **9%** |\n\n### Purdue University 2021 Study\n\n| App | Max Brightness Savings | Average Use Savings |\n|-----|------------------------|---------------------|\n| Google Maps | 31% | 9% |\n| Google News | 43% | 14% |\n| YouTube | 47% | 7% |\n| Calculator | 52% | 17% |\n| Phone | 30% | 6% |\n| Calendar | 48% | 17% |\n\n**Key Finding:** Dark mode saves **39-47% battery at maximum brightness**, but only **3-9% at typical (30-40%) brightness**.\n\n## Design Implications\n\n### Pure Black (#000000) Considerations\n\n**Pros:**\n- Maximum battery savings on OLED\n- True off state for pixels\n\n**Cons:**\n- \"Black smearing\" during scrolling (pixels slow to turn on)\n- Harsh contrast with content\n- OLED burn-in risk at edges\n\n**Recommendation:** Use near-black (#0c1222, #121212) instead of pure black.\n\n### Color Power Consumption\n\nColors consume different amounts of power on OLED:\n\n| Color | Relative Power | Notes |\n|-------|----------------|-------|\n| Black | 0% | Pixels off |\n| Blue | ~25% | Most efficient hue |\n| Red | ~40% | Mid efficiency |\n| Green | ~60% | Less efficient |\n| White | 100% | All subpixels on |\n| Yellow | ~80% | Red + Green |\n| Cyan | ~65% | Green + Blue |\n| Magenta | ~55% | Red + Blue |\n\n**Implication:** Blue-tinted dark themes are more battery-efficient than warm/green-tinted ones.\n\n## Optimized Dark Palette for OLED\n\n```css\n:root.theme-dark.oled-optimized {\n  /* Near-black base (avoid pure #000 for smearing) */\n  --bg-primary: #050505;\n  --bg-secondary: #0a0a0a;\n  --bg-elevated: #121212;\n\n  /* Blue-tinted accents (more efficient) */\n  --accent-primary: #60a5fa;    /* Blue-400 */\n  --accent-secondary: #818cf8;  /* Indigo-400 */\n\n  /* Avoid bright warm colors for large areas */\n  --warning: #fbbf24;           /* Use sparingly */\n  --error: #f87171;             /* Use sparingly */\n\n  /* Text: off-white reduces power vs pure white */\n  --text-primary: #e5e5e5;\n  --text-secondary: #a3a3a3;\n}\n```\n\n## Scroll Performance: Black Smearing\n\nOLED pixels have asymmetric response times:\n- **On → Off:** Fast (~1ms)\n- **Off → On:** Slow (~10-20ms)\n\nThis causes \"black smearing\" when scrolling dark content.\n\n### Mitigation Strategies\n\n1. **Avoid pure black next to moving content**\n   ```css\n   /* Instead of pure black backgrounds */\n   --bg: #000000;  /* Smearing risk */\n\n   /* Use very dark gray */\n   --bg: #0a0a0a;  /* Minimal smearing */\n   ```\n\n2. **Add subtle background patterns**\n   ```css\n   .scrollable-area {\n     /* Subtle noise keeps pixels slightly active */\n     background:\n       #0a0a0a\n       url(\"data:image/svg+xml,...\") /* 1% noise pattern */;\n   }\n   ```\n\n3. **Use blur/gradient edges**\n   ```css\n   .scroll-indicator {\n     /* Gradient prevents hard black edge */\n     background: linear-gradient(\n       transparent,\n       rgba(0, 0, 0, 0.5),\n       #0a0a0a\n     );\n   }\n   ```\n\n## PWA/App Considerations\n\n### Theme Color Meta Tag\n\n```html\n<!-- Light mode -->\n<meta name=\"theme-color\" content=\"#ffffff\"\n      media=\"(prefers-color-scheme: light)\">\n\n<!-- Dark mode - use your dark bg color -->\n<meta name=\"theme-color\" content=\"#0c1222\"\n      media=\"(prefers-color-scheme: dark)\">\n```\n\n### Status Bar Styling (Mobile)\n\n```css\n/* iOS Safari */\n:root.theme-dark {\n  /* Ensure status bar blends with app */\n  --apple-system-background: #0c1222;\n}\n\n/* Android Chrome */\n@media (display-mode: standalone) {\n  :root.theme-dark body {\n    /* Match system UI */\n    background: #0c1222;\n  }\n}\n```\n\n## Testing OLED Optimization\n\n1. **Power profiler**: Use Android Studio's Energy Profiler\n2. **Visual inspection**: Check for smearing during scroll\n3. **Burn-in test**: Static elements should use varied colors\n4. **Brightness range**: Test at 20%, 50%, 100% brightness\n\n## OLED vs LCD Trade-offs\n\n| Factor | OLED Priority | LCD Priority |\n|--------|---------------|--------------|\n| Battery | Pure/near black | Doesn't matter |\n| Contrast | Can use high contrast | Avoid pure black |\n| Smearing | Use #0a0a0a+ | Pure black OK |\n| Burn-in | Vary static elements | Not a concern |\n| Response | Consider pixel on/off | Even response |\n\n## Recommendation\n\nFor web apps serving both OLED and LCD:\n\n```css\n:root.theme-dark {\n  /* Balanced: works for both display types */\n  --bg-primary: #0c1222;    /* Near-black, no smearing */\n  --bg-secondary: #151b2e;  /* Subtle elevation */\n  --text-primary: #f1f5f9;  /* Off-white, reduces power */\n}\n\n/* Optional: OLED-specific overrides for native apps */\n@media (dynamic-range: high) {\n  :root.theme-dark.oled-mode {\n    --bg-primary: #050505;  /* Closer to true black */\n  }\n}\n```\n"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "dark-mode-design-expert/SKILL.md",
      "size": 27603,
      "content": "---\nname: dark-mode-design-expert\ndescription: Master dark mode UI design with atmospheric theming, WCAG accessibility, and cross-platform best practices. Specializes in weather/sky/ocean-inspired color systems that adapt to time of day and environmental conditions.\ncategory: Design\ntags:\n  - dark-mode\n  - accessibility\n  - theming\n---\n\n# Dark Mode Design Expert\n\nMaster dark mode UI design with atmospheric theming, WCAG accessibility, and cross-platform best practices. Specializes in weather/sky/ocean-inspired color systems that adapt to time of day and environmental conditions.\n\n## When to Use This Skill\n\n**Activate on:**\n- \"dark mode\", \"dark theme\", \"night mode\"\n- \"theme switching\", \"light/dark toggle\"\n- \"atmospheric UI\", \"weather theme\", \"sky gradient\"\n- \"OLED optimization\", \"battery-friendly dark\"\n- \"elevation in dark mode\", \"surface layering\"\n- \"prefers-color-scheme\", \"color-scheme CSS\"\n- \"contrast ratios dark mode\", \"accessibility dark theme\"\n\n**NOT for:**\n- General color palette creation → `color-theory-palette-harmony-expert`\n- Typography and font selection → `typography-expert`\n- Component library architecture → `design-system-creator`\n- Contrast auditing of specific colors → `color-contrast-auditor`\n\n---\n\n## The Science of Dark Mode\n\n### Why Dark Mode Exists\n\n| Factor | Light Mode | Dark Mode | Winner |\n|--------|------------|-----------|--------|\n| **OLED Battery** | 100% baseline | 39-47% savings at max brightness | Dark |\n| **Low Light Comfort** | Eye strain, fatigue | Reduced glare | Dark |\n| **Bright Environment** | Better readability | Washed out | Light |\n| **Astigmatism Users** | Easier to read | Halation effect | Light |\n| **Focus/Immersion** | Standard | Content pops forward | Dark |\n| **Sleep Hygiene** | Blue light exposure | Reduced blue light | Dark |\n\n**Key Insight:** Dark mode isn't universally better—it's contextually better. The best systems respect user preference AND adapt to environment.\n\n### Contrast Requirements (WCAG 2.1)\n\n| Element Type | Minimum Ratio | Target Ratio | Notes |\n|--------------|---------------|--------------|-------|\n| Body text | 4.5:1 | 7:1+ | AAA preferred for readability |\n| Large text (≥24px) | 3:1 | 4.5:1+ | Headlines, hero text |\n| UI components | 3:1 | 4.5:1+ | Borders, icons, focus rings |\n| Disabled elements | None required | 2.5:1 | UX consideration |\n| Decorative | None required | - | Pure aesthetic elements |\n\n**Dark Mode Gotcha:** High contrast (21:1 pure white on black) causes more eye strain than moderate contrast (15:1). Target **12:1 to 16:1** for primary text.\n\n---\n\n## The Three-Tier Token Architecture\n\n### Foundation: Primitives → Semantic → Component\n\n```css\n/* ══════════════════════════════════════════════════════════════════\n   TIER 1: PRIMITIVES - Raw color values, never used directly\n   ══════════════════════════════════════════════════════════════════ */\n:root {\n  /* Neutrals */\n  --color-gray-50: #f8fafc;\n  --color-gray-100: #f1f5f9;\n  --color-gray-200: #e2e8f0;\n  --color-gray-300: #cbd5e1;\n  --color-gray-400: #94a3b8;\n  --color-gray-500: #64748b;\n  --color-gray-600: #475569;\n  --color-gray-700: #334155;\n  --color-gray-800: #1e293b;\n  --color-gray-900: #0f172a;\n  --color-gray-950: #020617;\n\n  /* Brand Colors */\n  --color-ocean-300: #7dd3fc;\n  --color-ocean-400: #38bdf8;\n  --color-ocean-500: #0ea5e9;\n  --color-ocean-600: #0284c7;\n  --color-ocean-700: #0369a1;\n\n  /* Atmospheric Colors (for weather theming) */\n  --color-twilight-deep: #0c1222;\n  --color-twilight-mid: #151b2e;\n  --color-twilight-surface: #1a1f3a;\n  --color-dawn-warm: #fef3c7;\n  --color-sunset-orange: #fb923c;\n  --color-storm-gray: #374151;\n}\n\n/* ══════════════════════════════════════════════════════════════════\n   TIER 2: SEMANTIC - Purpose-driven, theme-aware\n   ══════════════════════════════════════════════════════════════════ */\n\n/* Light Mode (Default) */\n:root, :root.theme-light {\n  /* Text */\n  --color-text-primary: var(--color-gray-900);      /* 15.3:1 on white */\n  --color-text-secondary: var(--color-gray-600);    /* 7.0:1 on white */\n  --color-text-muted: var(--color-gray-500);        /* 4.6:1 on white */\n  --color-text-inverse: var(--color-gray-50);\n\n  /* Backgrounds */\n  --color-bg-primary: #ffffff;\n  --color-bg-secondary: var(--color-gray-50);\n  --color-bg-elevated: #ffffff;\n  --color-bg-overlay: rgba(0, 0, 0, 0.5);\n\n  /* Surfaces (elevation system) */\n  --color-surface-base: #ffffff;\n  --color-surface-raised: #ffffff;\n  --color-surface-overlay: #ffffff;\n\n  /* Borders */\n  --color-border-default: var(--color-gray-200);\n  --color-border-muted: var(--color-gray-100);\n  --color-border-emphasis: var(--color-gray-300);\n\n  /* Interactive */\n  --color-interactive-primary: var(--color-ocean-600);\n  --color-interactive-hover: var(--color-ocean-700);\n  --color-interactive-focus: var(--color-ocean-500);\n\n  /* Elevation (shadows work in light mode) */\n  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);\n  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);\n  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);\n  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);\n}\n\n/* Dark Mode */\n:root.theme-dark {\n  /* Text - slightly off-white to reduce strain */\n  --color-text-primary: var(--color-gray-50);       /* 15.3:1 on dark */\n  --color-text-secondary: var(--color-gray-300);    /* 9.3:1 on dark */\n  --color-text-muted: var(--color-gray-400);        /* 5.5:1 on dark */\n  --color-text-inverse: var(--color-gray-900);\n\n  /* Backgrounds - NOT pure black (#000) */\n  --color-bg-primary: var(--color-twilight-deep);   /* #0c1222 */\n  --color-bg-secondary: var(--color-twilight-mid);  /* #151b2e */\n  --color-bg-elevated: var(--color-twilight-surface); /* #1a1f3a */\n  --color-bg-overlay: rgba(0, 0, 0, 0.7);\n\n  /* Surfaces - LIGHTER for elevation (key dark mode principle) */\n  --color-surface-base: var(--color-twilight-deep);\n  --color-surface-raised: var(--color-twilight-mid);\n  --color-surface-overlay: var(--color-twilight-surface);\n\n  /* Borders - more visible in dark mode */\n  --color-border-default: rgba(255, 255, 255, 0.1);\n  --color-border-muted: rgba(255, 255, 255, 0.05);\n  --color-border-emphasis: rgba(255, 255, 255, 0.2);\n\n  /* Interactive - brighter for visibility */\n  --color-interactive-primary: var(--color-ocean-400);\n  --color-interactive-hover: var(--color-ocean-300);\n  --color-interactive-focus: var(--color-ocean-500);\n\n  /* Elevation - GLOW replaces shadows in dark mode */\n  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.4);\n  --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.5);\n  --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.5);\n  --shadow-xl: 0 12px 24px rgba(0, 0, 0, 0.6);\n\n  /* Glow effects (unique to dark mode) */\n  --glow-sm: 0 0 8px rgba(56, 189, 248, 0.2);\n  --glow-md: 0 0 16px rgba(56, 189, 248, 0.3);\n  --glow-lg: 0 0 32px rgba(56, 189, 248, 0.4);\n}\n\n/* ══════════════════════════════════════════════════════════════════\n   TIER 3: COMPONENT - Specific usage, consuming semantic tokens\n   ══════════════════════════════════════════════════════════════════ */\n:root {\n  /* Buttons */\n  --button-bg: var(--color-interactive-primary);\n  --button-text: var(--color-text-inverse);\n  --button-border: transparent;\n  --button-shadow: var(--shadow-sm);\n\n  /* Cards */\n  --card-bg: var(--color-surface-raised);\n  --card-border: var(--color-border-default);\n  --card-shadow: var(--shadow-md);\n\n  /* Inputs */\n  --input-bg: var(--color-bg-primary);\n  --input-border: var(--color-border-default);\n  --input-focus-ring: var(--color-interactive-focus);\n}\n```\n\n---\n\n## Elevation in Dark Mode: The Critical Difference\n\n### Why Shadows Fail in Dark Mode\n\nIn light mode, shadows create depth by simulating light from above. In dark mode:\n- Shadows become invisible against dark backgrounds\n- Pure black shadows look like \"holes\"\n- The illusion breaks completely\n\n### Material Design 3 Solution: Tonal Elevation\n\nInstead of shadows, use **lighter surface colors** for elevated elements:\n\n```css\n/* Light Mode: Shadows create elevation */\n.card-light {\n  background: #ffffff;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n/* Dark Mode: Surface color creates elevation */\n.card-dark {\n  background: #1e1e1e;  /* Elevated from #121212 base */\n  box-shadow: none;      /* Or very subtle */\n}\n```\n\n### Elevation Scale (Material Design 3)\n\n| Level | Light Mode | Dark Mode Surface | Overlay % |\n|-------|------------|-------------------|-----------|\n| 0 (base) | #ffffff | #121212 | 0% |\n| 1 | shadow-sm | #1e1e1e | 5% white |\n| 2 | shadow-md | #232323 | 7% white |\n| 3 | shadow-lg | #282828 | 8% white |\n| 4 | shadow-xl | #2d2d2d | 9% white |\n| 5 | shadow-2xl | #323232 | 11% white |\n\n### Implementation Pattern\n\n```css\n:root.theme-dark {\n  /* Calculate overlay colors */\n  --elevation-1: color-mix(in srgb, white 5%, var(--color-bg-primary));\n  --elevation-2: color-mix(in srgb, white 7%, var(--color-bg-primary));\n  --elevation-3: color-mix(in srgb, white 8%, var(--color-bg-primary));\n  --elevation-4: color-mix(in srgb, white 9%, var(--color-bg-primary));\n  --elevation-5: color-mix(in srgb, white 11%, var(--color-bg-primary));\n}\n\n.card {\n  background: var(--elevation-2);\n}\n\n.modal {\n  background: var(--elevation-4);\n}\n\n.dropdown {\n  background: var(--elevation-3);\n}\n```\n\n---\n\n## CSS Implementation Patterns\n\n### Modern Approach: `prefers-color-scheme` + `light-dark()`\n\n```css\n/* 1. Set color-scheme for native element styling */\n:root {\n  color-scheme: light dark;\n}\n\n/* 2. Use light-dark() for inline theming (2024+ browsers) */\n.card {\n  background: light-dark(#ffffff, #1e1e1e);\n  color: light-dark(#1f2937, #f3f4f6);\n  border: 1px solid light-dark(#e5e7eb, rgba(255,255,255,0.1));\n}\n\n/* 3. Respect system preference */\n@media (prefers-color-scheme: dark) {\n  :root:not(.theme-light) {\n    /* Dark mode tokens */\n  }\n}\n\n@media (prefers-color-scheme: light) {\n  :root:not(.theme-dark) {\n    /* Light mode tokens */\n  }\n}\n```\n\n### Theme Switching with JavaScript\n\n```typescript\n// Theme manager with persistence\ntype Theme = 'light' | 'dark' | 'system';\n\nfunction setTheme(theme: Theme) {\n  const root = document.documentElement;\n\n  // Remove existing theme classes\n  root.classList.remove('theme-light', 'theme-dark');\n\n  if (theme === 'system') {\n    // Let CSS media queries handle it\n    localStorage.removeItem('theme');\n    return;\n  }\n\n  // Apply explicit theme\n  root.classList.add(`theme-${theme}`);\n  localStorage.setItem('theme', theme);\n}\n\nfunction getSystemTheme(): 'light' | 'dark' {\n  return window.matchMedia('(prefers-color-scheme: dark)').matches\n    ? 'dark'\n    : 'light';\n}\n\n// Initialize on page load (before render to prevent flash)\nfunction initTheme() {\n  const saved = localStorage.getItem('theme') as Theme | null;\n  if (saved && saved !== 'system') {\n    document.documentElement.classList.add(`theme-${saved}`);\n  }\n}\n\n// Listen for system changes\nwindow.matchMedia('(prefers-color-scheme: dark)')\n  .addEventListener('change', (e) => {\n    if (!localStorage.getItem('theme')) {\n      // Only react if user hasn't set explicit preference\n      // CSS will handle via media queries\n    }\n  });\n```\n\n### Preventing Flash of Wrong Theme (FOWT)\n\n```html\n<!-- In <head>, before any CSS -->\n<script>\n  (function() {\n    const theme = localStorage.getItem('theme');\n    if (theme === 'dark') {\n      document.documentElement.classList.add('theme-dark');\n    } else if (theme === 'light') {\n      document.documentElement.classList.add('theme-light');\n    }\n  })();\n</script>\n```\n\n---\n\n## Worked Example: Weather/Sky/Ocean Atmospheric UI\n\nThis is the flagship example—a complete token system for a weather-inspired UI that adapts to time of day and atmospheric conditions.\n\n### Design Philosophy\n\nThe ocean and sky share a visual language:\n- **Dawn/Dusk**: Warm gradients, soft transitions\n- **Midday**: Bright, high contrast, clear\n- **Night**: Deep blues, subtle glows, stars\n- **Storm**: Dramatic grays, electric highlights\n- **Underwater**: Teal depths, bioluminescent accents\n\n### Complete Token System\n\n```css\n/* ══════════════════════════════════════════════════════════════════\n   OCEAN MODERN: ATMOSPHERIC UI TOKEN SYSTEM\n   A weather/sky/ocean-inspired design system with time-of-day awareness\n   ══════════════════════════════════════════════════════════════════ */\n\n:root {\n  /* ────────────────────────────────────────────────────────────────\n     PRIMITIVES: Atmospheric Color Palette\n     ──────────────────────────────────────────────────────────────── */\n\n  /* Ocean Depths */\n  --ocean-surface: #38bdf8;      /* Sunlit surface */\n  --ocean-shallow: #0ea5e9;      /* Clear shallows */\n  --ocean-mid: #0284c7;          /* Mid-depth */\n  --ocean-deep: #0369a1;         /* Deep water */\n  --ocean-abyss: #075985;        /* Abyssal zone */\n  --ocean-trench: #0c4a6e;       /* Hadal zone */\n\n  /* Sky States */\n  --sky-dawn: #fef3c7;           /* Golden hour */\n  --sky-morning: #bae6fd;        /* Clear morning */\n  --sky-midday: #7dd3fc;         /* Bright day */\n  --sky-golden: #fcd34d;         /* Golden hour */\n  --sky-sunset: #fb923c;         /* Sunset orange */\n  --sky-dusk: #a78bfa;           /* Purple dusk */\n  --sky-twilight: #6366f1;       /* Civil twilight */\n  --sky-night: #1e1b4b;          /* Night sky */\n\n  /* Atmospheric Effects */\n  --atmosphere-haze: rgba(186, 230, 253, 0.3);\n  --atmosphere-fog: rgba(241, 245, 249, 0.6);\n  --atmosphere-mist: rgba(148, 163, 184, 0.4);\n\n  /* Storm System */\n  --storm-light: #9ca3af;\n  --storm-mid: #6b7280;\n  --storm-dark: #4b5563;\n  --storm-thunder: #374151;\n  --storm-lightning: #fbbf24;\n\n  /* Bioluminescence (dark mode accents) */\n  --bio-cyan: #22d3ee;\n  --bio-teal: #2dd4bf;\n  --bio-blue: #60a5fa;\n  --bio-purple: #a78bfa;\n  --bio-glow: rgba(34, 211, 238, 0.4);\n\n  /* Sand & Beach */\n  --sand-light: #fef3c7;\n  --sand-warm: #fde68a;\n  --sand-golden: #fcd34d;\n  --sand-wet: #d4a574;\n\n  /* Coral & Life */\n  --coral-pink: #fb7185;\n  --coral-orange: #fb923c;\n  --kelp-green: #22c55e;\n  --algae-teal: #14b8a6;\n}\n\n/* ════════════════════════════════════════════════════════════════════\n   SEMANTIC: Time-of-Day Themes\n   ════════════════════════════════════════════════════════════════════ */\n\n/* DAWN THEME (5am - 8am) - Warm, hopeful, transitional */\n:root.atmosphere-dawn {\n  --color-text-primary: #1e293b;\n  --color-text-secondary: #475569;\n  --color-bg-primary: var(--sky-dawn);\n  --color-bg-secondary: #fef9e7;\n  --color-accent: var(--sky-golden);\n  --gradient-sky: linear-gradient(\n    180deg,\n    var(--sky-night) 0%,\n    var(--sky-dusk) 20%,\n    var(--sky-sunset) 40%,\n    var(--sky-golden) 70%,\n    var(--sky-dawn) 100%\n  );\n  --gradient-ocean: linear-gradient(\n    180deg,\n    var(--ocean-deep) 0%,\n    var(--ocean-mid) 50%,\n    var(--ocean-surface) 100%\n  );\n}\n\n/* DAYLIGHT THEME (8am - 5pm) - Bright, clear, energetic */\n:root.atmosphere-day, :root.theme-light {\n  --color-text-primary: #0f172a;\n  --color-text-secondary: #334155;\n  --color-text-muted: #64748b;\n  --color-bg-primary: #ffffff;\n  --color-bg-secondary: #f8fafc;\n  --color-bg-elevated: #ffffff;\n  --color-accent: var(--ocean-shallow);\n  --color-accent-hover: var(--ocean-mid);\n  --gradient-sky: linear-gradient(\n    180deg,\n    var(--sky-midday) 0%,\n    var(--sky-morning) 50%,\n    #ffffff 100%\n  );\n  --gradient-ocean: linear-gradient(\n    180deg,\n    var(--ocean-abyss) 0%,\n    var(--ocean-deep) 30%,\n    var(--ocean-mid) 60%,\n    var(--ocean-shallow) 100%\n  );\n  /* Daylight uses shadows for elevation */\n  --elevation-method: shadow;\n}\n\n/* GOLDEN HOUR THEME (5pm - 7pm) - Warm, dramatic, nostalgic */\n:root.atmosphere-golden {\n  --color-text-primary: #1c1917;\n  --color-text-secondary: #44403c;\n  --color-bg-primary: #fffbeb;\n  --color-bg-secondary: #fef3c7;\n  --color-accent: var(--sky-sunset);\n  --gradient-sky: linear-gradient(\n    180deg,\n    var(--sky-midday) 0%,\n    var(--sky-golden) 40%,\n    var(--sky-sunset) 70%,\n    var(--coral-pink) 100%\n  );\n  --gradient-ocean: linear-gradient(\n    180deg,\n    var(--ocean-deep) 0%,\n    #0891b2 50%,\n    #fcd34d 100%\n  );\n}\n\n/* TWILIGHT THEME (7pm - 9pm) - Transitional, mysterious */\n:root.atmosphere-twilight {\n  --color-text-primary: #e2e8f0;\n  --color-text-secondary: #94a3b8;\n  --color-bg-primary: #0f172a;\n  --color-bg-secondary: #1e293b;\n  --color-bg-elevated: #334155;\n  --color-accent: var(--sky-twilight);\n  --gradient-sky: linear-gradient(\n    180deg,\n    var(--sky-night) 0%,\n    var(--sky-twilight) 30%,\n    var(--sky-dusk) 60%,\n    var(--sky-sunset) 100%\n  );\n  --gradient-ocean: linear-gradient(\n    180deg,\n    var(--ocean-trench) 0%,\n    var(--ocean-abyss) 50%,\n    var(--ocean-deep) 100%\n  );\n}\n\n/* NIGHT THEME (9pm - 5am) - Deep, calm, bioluminescent */\n:root.atmosphere-night, :root.theme-dark {\n  --color-text-primary: #f1f5f9;        /* 15.3:1 ✓ AAA */\n  --color-text-secondary: #cbd5e1;      /* 9.3:1 ✓ AAA */\n  --color-text-muted: #94a3b8;          /* 5.5:1 ✓ AA */\n  --color-bg-primary: #0c1222;          /* Deep twilight navy */\n  --color-bg-secondary: #151b2e;\n  --color-bg-elevated: #1a1f3a;\n  --color-accent: var(--bio-cyan);\n  --color-accent-hover: var(--bio-teal);\n  --gradient-sky: linear-gradient(\n    180deg,\n    #020617 0%,\n    var(--sky-night) 50%,\n    #1e1b4b 100%\n  );\n  --gradient-ocean: linear-gradient(\n    180deg,\n    #020617 0%,\n    var(--ocean-trench) 50%,\n    var(--ocean-abyss) 100%\n  );\n  /* Night uses lighter surfaces for elevation */\n  --elevation-method: surface;\n\n  /* Bioluminescent glow effects */\n  --glow-accent: 0 0 20px var(--bio-glow);\n  --glow-subtle: 0 0 10px rgba(34, 211, 238, 0.2);\n\n  /* Surface elevation scale */\n  --surface-base: #0c1222;\n  --surface-1: #111827;\n  --surface-2: #1f2937;\n  --surface-3: #374151;\n  --surface-4: #4b5563;\n}\n\n/* STORM THEME - Dramatic, intense, electric */\n:root.atmosphere-storm {\n  --color-text-primary: #f3f4f6;\n  --color-text-secondary: #d1d5db;\n  --color-bg-primary: var(--storm-thunder);\n  --color-bg-secondary: var(--storm-dark);\n  --color-bg-elevated: var(--storm-mid);\n  --color-accent: var(--storm-lightning);\n  --gradient-sky: linear-gradient(\n    180deg,\n    var(--storm-thunder) 0%,\n    var(--storm-dark) 30%,\n    var(--storm-mid) 60%,\n    var(--storm-light) 100%\n  );\n  --gradient-ocean: linear-gradient(\n    180deg,\n    #1f2937 0%,\n    #374151 40%,\n    #6b7280 80%,\n    #9ca3af 100%\n  );\n  /* Lightning flash animation */\n  --flash-color: rgba(251, 191, 36, 0.3);\n}\n\n/* ════════════════════════════════════════════════════════════════════\n   COMPONENT: Atmospheric UI Elements\n   ════════════════════════════════════════════════════════════════════ */\n\n/* Glass Card - works in all atmospheres */\n.glass-card {\n  background: var(--glass-bg, rgba(255, 255, 255, 0.1));\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.2));\n  border-radius: 16px;\n}\n\n:root.theme-light .glass-card,\n:root.atmosphere-day .glass-card,\n:root.atmosphere-dawn .glass-card {\n  --glass-bg: rgba(255, 255, 255, 0.7);\n  --glass-border: rgba(0, 0, 0, 0.1);\n  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);\n}\n\n:root.theme-dark .glass-card,\n:root.atmosphere-night .glass-card,\n:root.atmosphere-twilight .glass-card {\n  --glass-bg: rgba(15, 23, 42, 0.6);\n  --glass-border: rgba(255, 255, 255, 0.1);\n  box-shadow: var(--glow-subtle);\n}\n\n/* Wave Animation */\n.wave-layer {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 200%;\n  height: var(--wave-height, 100px);\n  background: var(--wave-color);\n  animation: wave var(--wave-duration, 8s) ease-in-out infinite;\n  opacity: var(--wave-opacity, 0.6);\n}\n\n@keyframes wave {\n  0%, 100% { transform: translateX(0) translateY(0); }\n  50% { transform: translateX(-25%) translateY(-10px); }\n}\n\n/* Bioluminescent Glow (dark mode only) */\n:root.theme-dark .glow-element,\n:root.atmosphere-night .glow-element {\n  box-shadow: var(--glow-accent);\n  transition: box-shadow 0.3s ease;\n}\n\n:root.theme-dark .glow-element:hover,\n:root.atmosphere-night .glow-element:hover {\n  box-shadow: 0 0 30px var(--bio-glow), 0 0 60px rgba(34, 211, 238, 0.2);\n}\n\n/* Cloud Layer */\n.cloud-layer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image: var(--cloud-pattern);\n  opacity: var(--cloud-opacity, 0.5);\n  animation: drift var(--cloud-speed, 60s) linear infinite;\n}\n\n@keyframes drift {\n  from { transform: translateX(0); }\n  to { transform: translateX(-50%); }\n}\n```\n\n### Time-Based Theme Switching\n\n```typescript\ntype Atmosphere = 'dawn' | 'day' | 'golden' | 'twilight' | 'night' | 'storm';\n\nfunction getAtmosphereFromTime(hour: number): Atmosphere {\n  if (hour >= 5 && hour < 8) return 'dawn';\n  if (hour >= 8 && hour < 17) return 'day';\n  if (hour >= 17 && hour < 19) return 'golden';\n  if (hour >= 19 && hour < 21) return 'twilight';\n  return 'night';\n}\n\nfunction setAtmosphere(atmosphere: Atmosphere) {\n  const root = document.documentElement;\n\n  // Remove all atmosphere classes\n  root.classList.remove(\n    'atmosphere-dawn', 'atmosphere-day', 'atmosphere-golden',\n    'atmosphere-twilight', 'atmosphere-night', 'atmosphere-storm',\n    'theme-light', 'theme-dark'\n  );\n\n  // Add new atmosphere\n  root.classList.add(`atmosphere-${atmosphere}`);\n\n  // Also set base theme for compatibility\n  const isDark = ['twilight', 'night', 'storm'].includes(atmosphere);\n  root.classList.add(isDark ? 'theme-dark' : 'theme-light');\n}\n\n// Auto-update based on time\nfunction initAtmosphericUI() {\n  const updateAtmosphere = () => {\n    const hour = new Date().getHours();\n    setAtmosphere(getAtmosphereFromTime(hour));\n  };\n\n  updateAtmosphere();\n  // Update every 15 minutes\n  setInterval(updateAtmosphere, 15 * 60 * 1000);\n}\n```\n\n### Weather API Integration\n\n```typescript\ninterface WeatherCondition {\n  main: 'Clear' | 'Clouds' | 'Rain' | 'Thunderstorm' | 'Snow' | 'Mist';\n  description: string;\n}\n\nfunction getAtmosphereFromWeather(\n  weather: WeatherCondition,\n  hour: number\n): Atmosphere {\n  // Storm conditions override time\n  if (weather.main === 'Thunderstorm') return 'storm';\n\n  // Heavy overcast dims everything\n  if (weather.main === 'Clouds' && weather.description.includes('overcast')) {\n    return hour >= 19 || hour < 6 ? 'night' : 'twilight';\n  }\n\n  // Default to time-based\n  return getAtmosphereFromTime(hour);\n}\n```\n\n---\n\n## Anti-Patterns to Avoid\n\n### 1. Pure Black Background (#000000)\n\n**Problem:** Causes eye strain, harsh contrast, OLED \"smearing\" on scroll\n**Solution:** Use near-black like #0c1222, #121212, or #1a1a2e\n\n### 2. Pure White Text (#FFFFFF) on Dark\n\n**Problem:** Too harsh, causes halation for astigmatism users\n**Solution:** Use off-white like #f1f5f9, #e2e8f0\n\n### 3. Same Colors for Both Themes\n\n**Problem:** Teal that looks great on white becomes invisible on dark\n**Solution:** Use brighter variants in dark mode (ocean-400 instead of ocean-600)\n\n### 4. Shadows in Dark Mode\n\n**Problem:** Shadows disappear against dark backgrounds\n**Solution:** Use lighter surface colors for elevation instead\n\n### 5. Inverted Light Mode Colors\n\n**Problem:** Simply inverting creates jarring, unnatural results\n**Solution:** Design dark mode as its own coherent system\n\n### 6. Ignoring System Preference\n\n**Problem:** Forcing dark mode ignores user's system-wide preference\n**Solution:** Default to `prefers-color-scheme`, allow override\n\n### 7. Flash of Wrong Theme\n\n**Problem:** Page loads light, then flashes to dark\n**Solution:** Inline script in `<head>` before CSS loads\n\n---\n\n## Testing Checklist\n\n### Visual Testing\n\n- [ ] Primary text readable on all backgrounds (4.5:1+)\n- [ ] Secondary text readable (4.5:1+)\n- [ ] Muted text acceptable (3:1+ for large, 4.5:1+ for normal)\n- [ ] Interactive elements distinguishable\n- [ ] Focus states clearly visible\n- [ ] Disabled states identifiable (but not required contrast)\n- [ ] Elevation hierarchy clear without shadows\n- [ ] No harsh white/black combinations\n\n### Functional Testing\n\n- [ ] Theme toggle works correctly\n- [ ] System preference respected on first load\n- [ ] Theme persists across page reloads\n- [ ] No flash of wrong theme\n- [ ] Images adapt appropriately\n- [ ] Code blocks readable\n- [ ] Charts/graphs remain legible\n- [ ] Form elements properly styled\n\n### Device Testing\n\n- [ ] OLED screens (check for smearing on scroll)\n- [ ] LCD screens (check for backlight bleed visibility)\n- [ ] High brightness outdoor use\n- [ ] Low brightness night use\n- [ ] Color blindness simulation\n\n---\n\n## Industry References\n\n### Material Design 3\n- Base dark surface: #121212\n- Tonal elevation with white overlay (5-11%)\n- Primary colors at 80% lightness for dark mode\n- 15.8:1 target contrast for elevated surfaces\n\n### Apple Human Interface Guidelines\n- Respect system appearance setting\n- Semantic colors that adapt automatically\n- Increased vibrancy in dark mode\n- Base system background: dynamic (not static black)\n\n### Figma\n- Background: #2c2c2c (base), #383838 (elevated)\n- Text: #ffffff (primary), #b3b3b3 (secondary)\n- Accent: #0d99ff (brand blue, brightened for dark)\n\n### Discord\n- Background: #36393f (main), #2f3136 (sidebar)\n- Text: #dcddde (primary), #72767d (muted)\n- Accent: #5865f2 (blurple, same in both modes)\n\n### Slack\n- Background: #1a1d21 (base), #222529 (elevated)\n- Uses colored sidebars in dark mode\n- Maintains brand identity while adapting\n\n---\n\n## Companion Skills\n\n| Skill | Handoff Point |\n|-------|---------------|\n| `color-contrast-auditor` | After designing tokens, audit specific pairs |\n| `design-system-creator` | Integrate dark mode into broader design system |\n| `web-design-expert` | Overall visual direction and brand alignment |\n| `color-theory-palette-harmony-expert` | Generating initial color palettes |\n\n---\n\n*Remember: Dark mode isn't the absence of light—it's the careful orchestration of luminance to guide attention, reduce strain, and create atmosphere.*\n"
    }
  ]
}