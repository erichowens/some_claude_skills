{
  "name": "design-justice",
  "type": "folder",
  "path": "design-justice",
  "children": [
    {
      "name": "references",
      "type": "folder",
      "path": "design-justice/references",
      "children": [
        {
          "name": "authentication-patterns.md",
          "type": "file",
          "path": "design-justice/references/authentication-patterns.md",
          "size": 4892,
          "content": "# Authentication Patterns for Unstable Phone Access\n\n## The Problem\n\nTraditional authentication assumes:\n- Stable phone number\n- Consistent device access\n- Reliable SMS delivery\n- Ability to install authenticator apps\n\nReality for recovery/reentry populations:\n- Phone numbers change with housing changes\n- Prepaid phones disconnect for non-payment\n- Devices are lost, stolen, or pawned\n- Shared phones among family/friends\n- No consistent access to same device\n\n## Pattern: Email-First Authentication\n\n### Implementation\n\n```typescript\n// Schema: Phone is OPTIONAL\ninterface User {\n  email: string;           // Required, primary identifier\n  phone?: string;          // Optional\n  backupCodes: string[];   // Always generated\n  trustedContacts?: {      // Case worker recovery\n    email: string;\n    relationship: string;\n    verified: boolean;\n  }[];\n}\n\n// Signup flow\nconst signupSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8),\n  phone: z.string().optional(), // Explicitly optional\n});\n```\n\n### Recovery Pathways (Multiple Required)\n\n1. **Email recovery** (always available)\n2. **Backup codes** (printable, one-time use)\n3. **Trusted contact verification** (case worker)\n4. **Security questions** (as last resort)\n\nNever have SMS as the ONLY path.\n\n## Pattern: Printable Backup Codes\n\n### Generation\n\n```typescript\nfunction generateBackupCodes(count: number = 10): string[] {\n  return Array.from({ length: count }, () =>\n    crypto.randomBytes(4).toString('hex').toUpperCase()\n  );\n}\n\n// Display format for printing\nfunction formatForPrint(codes: string[]): string {\n  return codes.map((code, i) =>\n    `${i + 1}. ${code.slice(0, 4)}-${code.slice(4)}`\n  ).join('\\n');\n}\n```\n\n### UI Requirements\n\n- Large, clear font (16px minimum)\n- \"Print this page\" button prominent\n- Instructions: \"Write these down and keep in a safe place\"\n- Option to regenerate (invalidates old codes)\n- Show how many codes remain\n\n## Pattern: Trusted Intermediary Recovery\n\n### Flow\n\n1. User requests recovery via trusted contact\n2. System emails case worker with verification link\n3. Case worker confirms user identity (in person or call)\n4. Case worker clicks verification link\n5. User receives password reset email\n\n### Implementation\n\n```typescript\ninterface TrustedContactRecovery {\n  userId: string;\n  contactEmail: string;\n  requestedAt: Date;\n  verificationToken: string;\n  expiresAt: Date;  // 24 hours\n  verified: boolean;\n  verifiedAt?: Date;\n}\n\n// Case worker verification page\n// Includes: User's name, photo (if on file), security questions\n// Case worker must confirm they verified identity\n```\n\n## Pattern: No-Signup Essential Functions\n\n### What Should Work Without Login\n\n| Feature | Requires Login? |\n|---------|-----------------|\n| Eligibility checker | ‚ùå No |\n| Information/guides | ‚ùå No |\n| Form download | ‚ùå No |\n| Court locations | ‚ùå No |\n| Save progress | ‚úÖ Yes (or use localStorage) |\n| Submit application | ‚úÖ Yes |\n| Track status | ‚úÖ Yes |\n\n### Implementation: Guest Mode with Upgrade\n\n```typescript\n// Store progress in localStorage\nconst guestProgress = {\n  formData: { ... },\n  currentStep: 3,\n  startedAt: '2024-01-15',\n};\n\n// On signup, merge guest data into account\nasync function upgradeGuestToUser(guestData, newUserId) {\n  await db.applications.create({\n    userId: newUserId,\n    ...guestData.formData,\n    status: 'draft',\n  });\n  localStorage.removeItem('guestProgress');\n}\n```\n\n## Anti-Patterns to Avoid\n\n### ‚ùå Phone Number Required at Signup\n\n```typescript\n// WRONG\nconst signupSchema = z.object({\n  email: z.string().email(),\n  phone: z.string().min(10), // Required!\n});\n```\n\n### ‚ùå SMS-Only 2FA\n\n```typescript\n// WRONG\nasync function send2FA(user) {\n  await sms.send(user.phone, code); // Only option!\n}\n\n// RIGHT\nasync function send2FA(user, method: '2fa_method') {\n  switch (method) {\n    case 'email': await email.send(user.email, code); break;\n    case 'sms': await sms.send(user.phone, code); break;\n    case 'backup': return verifyBackupCode(user, code); break;\n  }\n}\n```\n\n### ‚ùå Device-Locked Sessions\n\n```typescript\n// WRONG\nif (request.deviceFingerprint !== session.deviceFingerprint) {\n  throw new Error('Unrecognized device');\n}\n```\n\n### ‚ùå Account Lock on Phone Change\n\n```typescript\n// WRONG\nif (user.phone !== submittedPhone) {\n  await lockAccount(user, 'Phone number changed');\n}\n\n// RIGHT\nif (user.phone !== submittedPhone) {\n  await sendVerificationEmail(user.email,\n    'Your phone number was updated. Click here if this wasn\\'t you.'\n  );\n}\n```\n\n## Testing Checklist\n\n```\n‚ñ° Can complete signup with only email\n‚ñ° Can recover account without phone\n‚ñ° Backup codes work and are printable\n‚ñ° Case worker verification flow works\n‚ñ° Core features work without login\n‚ñ° Session works across devices\n‚ñ° Phone number change doesn't lock account\n‚ñ° Clear indication of which fields are optional\n```\n"
        },
        {
          "name": "code-for-america-learnings.md",
          "type": "file",
          "path": "design-justice/references/code-for-america-learnings.md",
          "size": 10864,
          "content": "# Code for America Learnings\n\n## Who is Code for America?\n\nCode for America is a nonprofit that partners with governments to improve services for the public. Their criminal justice work has directly influenced best practices for expungement technology.\n\n**Key Projects:**\n- Clear My Record (California) - Automated record clearance\n- GetCalFresh - Benefits enrollment\n- ClientComm - Communication between public defenders and clients\n\n## The 6 Principles\n\n### 1. Automatic > Petition-Based\n\n**The Problem:**\nTraditional expungement requires individuals to:\n- Know they're eligible\n- Find the right forms\n- Fill them out correctly\n- Pay filing fees\n- Navigate court procedures\n- Wait months for processing\n\n**The Solution:**\nGovernments should automatically clear eligible records without requiring action from individuals.\n\n**Implementation Examples:**\n\n```\nCalifornia Prop 64 (Marijuana):\n- State reviews ALL marijuana convictions\n- Automatically reduces/dismisses eligible cases\n- No petition required from individual\n- Processed 230,000+ cases in first 2 years\n\nUtah Clean Slate:\n- Automatic expungement for qualifying misdemeanors\n- System checks eligibility automatically\n- Records cleared without individual action\n- Expected to help 480,000 people\n```\n\n**For Apps (When Full Automation Isn't Possible):**\n\n```typescript\n// Minimize burden on individuals\nconst designPrinciples = {\n  // Don't make them prove eligibility\n  eligibilityCheck: \"Automatic - we check based on minimal info\",\n\n  // Don't make them find forms\n  forms: \"Pre-filled and auto-populated\",\n\n  // Don't make them track status\n  statusUpdates: \"Proactive notifications\",\n\n  // Don't make them figure out next steps\n  guidance: \"One clear action at a time\"\n};\n```\n\n### 2. No-Cost by Default\n\n**The Problem:**\nFiling fees create barriers:\n- Expungement fees range from $50-$500\n- Fee waiver applications are separate processes\n- Many people don't know waivers exist\n- Fees punish poverty\n\n**The Principle:**\nFee waivers should be the default path, not an exception to apply for.\n\n**Implementation:**\n\n```tsx\n// WRONG: Fee waiver as afterthought\nfunction FilingFeeSection() {\n  return (\n    <div>\n      <h2>Filing Fee: $150</h2>\n      <p>Payment methods: Credit card, money order</p>\n      <small>\n        <a href=\"/fee-waiver\">Can't afford this? Learn about fee waivers</a>\n      </small>\n    </div>\n  );\n}\n\n// RIGHT: Fee waiver as primary path\nfunction FilingFeeSection() {\n  return (\n    <div>\n      <h2>Filing Fee</h2>\n\n      <div className=\"primary-option\">\n        <h3>Option 1: Fee Waiver (Recommended)</h3>\n        <p>\n          If your income is below ${threshold}, you likely qualify\n          to have the $150 fee waived.\n        </p>\n        <button>Check If You Qualify ‚Üí</button>\n      </div>\n\n      <div className=\"secondary-option\">\n        <h3>Option 2: Pay Filing Fee</h3>\n        <p>$150 by credit card or money order</p>\n      </div>\n    </div>\n  );\n}\n```\n\n### 3. Government Does the Work\n\n**The Problem:**\nCurrent systems shift burden to individuals:\n- Gathering documents from multiple agencies\n- Tracking their own cases\n- Following up repeatedly\n- Understanding complex procedures\n\n**The Principle:**\nGovernment agencies should do the administrative work, not individuals.\n\n**Implementation for Apps:**\n\nWhen full government automation isn't available, apps should minimize individual burden:\n\n```\nInstead of:                    Do:\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n\"Get a copy of your           \"We'll look up your case\n court record\"                 number for you\"\n\n\"Calculate your               \"Based on your info, you're\n waiting period\"               eligible on [DATE]\"\n\n\"Find the right form\"         \"Here's the form you need,\n                               pre-filled with your info\"\n\n\"Track your case status\"      \"We'll notify you when\n                               there's an update\"\n\n\"Follow up with clerk\"        \"If we don't hear back in\n                               30 days, we'll remind you\n                               to follow up\"\n```\n\n### 4. Co-Design with Impacted People\n\n**The Problem:**\nServices designed without input from users:\n- Make wrong assumptions about needs\n- Use inaccessible language\n- Create flows that don't match real life\n- Miss critical barriers\n\n**The Principle:**\nPeople with records should be involved in designing services for people with records.\n\n**Implementation:**\n\n```\nResearch Methods:\n- Shadow court self-help centers\n- Interview people mid-process\n- Observe public defender interactions\n- Partner with reentry organizations\n- Hire people with lived experience\n\nTesting Requirements:\n- Test with low-literacy users\n- Test on older smartphones\n- Test with limited data plans\n- Test in low-trust scenarios\n- Test with people who've been denied before\n```\n\n**Questions to Ask:**\n1. \"What was the hardest part of this process?\"\n2. \"Where did you get stuck?\"\n3. \"What information was hardest to find?\"\n4. \"What would have helped you trust this more?\"\n5. \"What happened that surprised you?\"\n\n### 5. Assume Gaps in Data\n\n**The Problem:**\nSystems expect complete, consistent data:\n- Case numbers from 20 years ago\n- Exact dates of conviction\n- Complete address history\n- Documents that were never provided\n\n**Reality:**\n- Records are incomplete\n- Data doesn't match across systems\n- People don't remember details from years ago\n- Documents get lost\n\n**Implementation:**\n\n```typescript\n// WRONG: Requiring exact data\nconst form = {\n  caseNumber: { required: true, format: 'YYYY-CR-NNNNN' },\n  convictionDate: { required: true, format: 'MM/DD/YYYY' },\n  courtAddress: { required: true },\n};\n\n// RIGHT: Accepting uncertainty\nconst form = {\n  caseNumber: {\n    required: false,\n    alternatives: ['dontKnow', 'needHelp'],\n    helpText: \"If you don't know, we can help you find it\"\n  },\n  convictionDate: {\n    required: true,\n    allowApproximate: true,\n    formats: ['exact', 'month-year', 'year-only'],\n    helpText: \"Your best estimate is fine\"\n  },\n  courtLocation: {\n    required: true,\n    options: 'county-list',\n    helpText: \"Select the county where your case was heard\"\n  }\n};\n```\n\n**\"I Don't Know\" as Valid Answer:**\n\n```tsx\nfunction CaseNumberInput() {\n  const [value, setValue] = useState('');\n  const [status, setStatus] = useState<'known' | 'unknown' | 'needHelp'>('known');\n\n  return (\n    <div>\n      <label>Case Number</label>\n\n      {status === 'known' && (\n        <input\n          value={value}\n          onChange={e => setValue(e.target.value)}\n          placeholder=\"e.g., 2019-CR-12345\"\n        />\n      )}\n\n      <div className=\"options\">\n        <button onClick={() => setStatus('unknown')}>\n          I don't remember\n        </button>\n        <button onClick={() => setStatus('needHelp')}>\n          Help me find it\n        </button>\n      </div>\n\n      {status === 'unknown' && (\n        <p>\n          That's okay. We can still proceed with the information you have.\n          The court may be able to look it up.\n        </p>\n      )}\n\n      {status === 'needHelp' && (\n        <CaseNumberLookup />\n      )}\n    </div>\n  );\n}\n```\n\n### 6. Backend Automation, Minimal Staff Time\n\n**The Problem:**\nManual review bottlenecks:\n- Limited staff reviewing applications\n- Inconsistent decisions\n- Months-long backlogs\n- High error rates\n\n**The Principle:**\nAutomate eligibility determination; reserve human review for edge cases.\n\n**Implementation:**\n\n```\nAutomation Tiers:\n\nTier 1: Fully Automated\n- Clear eligibility criteria\n- Complete data available\n- No discretionary factors\n‚Üí Auto-approve/deny with explanation\n\nTier 2: Assisted Decision\n- Mostly clear criteria\n- Some missing data\n- Minor discretionary factors\n‚Üí System recommends, human confirms\n\nTier 3: Human Review\n- Complex eligibility\n- Significant discretion required\n- Incomplete records\n‚Üí Human decision with system support\n```\n\n## Case Study: Clear My Record\n\n### Background\nCode for America's Clear My Record helps Californians clear eligible marijuana convictions under Prop 64.\n\n### Results\n- 144,000+ convictions cleared\n- Average processing time: weeks (vs. years manually)\n- Cost: ~$10/case (vs. $1,500+ for attorney)\n\n### Key Design Decisions\n\n**1. Start with eligibility, not personal info**\nUsers see \"You may be eligible\" before entering any personal data.\n\n**2. Partner with Public Defenders**\nSystem designed to work with existing legal aid workflows.\n\n**3. Proactive outreach**\nDon't wait for people to find the service - go to them.\n\n**4. No account required for basic info**\nEligibility checker works without signup.\n\n**5. Mobile-first design**\nMost users access via smartphone.\n\n### Lessons Learned\n\n```\nWhat Worked:\n‚úì Automatic eligibility determination\n‚úì Pre-filled petition forms\n‚úì Partnership with DA offices\n‚úì Text message updates\n‚úì Simple, calm UI\n\nWhat Was Hard:\n‚úó Data quality from court systems\n‚úó Variation across 58 counties\n‚úó Reaching eligible people who don't know\n‚úó Trust barriers (why is this free?)\n‚úó Keeping up with law changes\n```\n\n## Implementation Checklist\n\nFor expungement/record clearance apps:\n\n```\nELIGIBILITY\n‚ñ° Checker works without signup\n‚ñ° Uses plain language questions\n‚ñ° Handles \"I don't know\" answers\n‚ñ° Explains WHY for each question\n‚ñ° Shows results before collecting personal info\n\nFORMS\n‚ñ° Pre-fills everything possible\n‚ñ° Fee waiver is default/prominent path\n‚ñ° Accepts approximate dates\n‚ñ° Provides \"help me find this\" for case numbers\n‚ñ° Allows save and resume\n\nPROCESS\n‚ñ° Clear timeline expectations\n‚ñ° Proactive status updates (don't make them check)\n‚ñ° Explains each step before asking for action\n‚ñ° Provides next steps even for denials\n\nTRUST\n‚ñ° Explains what happens with their data\n‚ñ° No required account for basic features\n‚ñ° Works on older phones\n‚ñ° Works with slow/intermittent internet\n‚ñ° Designed with impacted people\n```\n\n## Resources\n\n- Code for America: codeforamerica.org\n- Clear My Record: clearmyrecord.org\n- GetCalFresh: getcalfresh.org\n- Delivery-Driven Government (book): codeforamerica.org/delivery-driven-government\n- Civic Tech Movement: civictech.guide\n\n## Academic Research\n\nKey papers on criminal record clearance:\n\n1. **Prescott & Starr (2020)** - \"Expungement of Criminal Convictions: An Empirical Study\"\n   - First rigorous study of expungement effects\n   - Found significant wage increases post-expungement\n   - Documented low uptake rates (6.5% of eligible)\n\n2. **Lageson (2020)** - \"Digital Punishment\"\n   - Documents persistence of records online even after expungement\n   - Highlights need for comprehensive data removal\n\n3. **Collateral Consequences Resource Center**\n   - Tracks state-by-state policy changes\n   - Documents Clean Slate movement progress\n"
        },
        {
          "name": "offline-first-patterns.md",
          "type": "file",
          "path": "design-justice/references/offline-first-patterns.md",
          "size": 13622,
          "content": "# Offline-First Patterns for Intermittent Access\n\n## The Problem\n\nTraditional web apps assume:\n- Stable, always-on internet\n- Users can retry failed requests\n- Sessions complete in one sitting\n- Form state survives page refreshes\n\nReality for vulnerable populations:\n- Public library computers have 30-60 minute session limits\n- Mobile data runs out mid-month\n- Shelter wifi is unreliable and shared\n- Users may have ONE chance to complete a critical form\n- Internet cafes charge by the minute\n\n## Pattern: Auto-Save Everything\n\n### Implementation\n\n```typescript\n// hooks/useAutoSave.ts\nimport { useEffect, useMemo, useCallback } from 'react';\n\ninterface SavedState<T> {\n  data: T;\n  savedAt: string;\n  synced: boolean;\n  version: number;\n}\n\nexport function useAutoSave<T>(\n  key: string,\n  data: T,\n  options: { debounceMs?: number } = {}\n) {\n  const { debounceMs = 500 } = options;\n\n  // Save on every change (debounced)\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      const state: SavedState<T> = {\n        data,\n        savedAt: new Date().toISOString(),\n        synced: navigator.onLine,\n        version: Date.now()\n      };\n      localStorage.setItem(key, JSON.stringify(state));\n    }, debounceMs);\n\n    return () => clearTimeout(timeout);\n  }, [key, data, debounceMs]);\n\n  // Restore saved data on mount\n  const savedData = useMemo(() => {\n    try {\n      const saved = localStorage.getItem(key);\n      if (saved) {\n        const parsed: SavedState<T> = JSON.parse(saved);\n        return parsed.data;\n      }\n    } catch {\n      // Corrupted data - start fresh\n    }\n    return null;\n  }, [key]);\n\n  // Clear saved data\n  const clearSaved = useCallback(() => {\n    localStorage.removeItem(key);\n  }, [key]);\n\n  return { savedData, clearSaved };\n}\n```\n\n### Usage in Forms\n\n```tsx\nfunction ExpungementWizard() {\n  const [formData, setFormData] = useState<WizardData>(initialData);\n\n  // Auto-save to localStorage\n  const { savedData, clearSaved } = useAutoSave(\n    'expungement-wizard-progress',\n    formData\n  );\n\n  // Restore on mount\n  useEffect(() => {\n    if (savedData) {\n      setFormData(savedData);\n      // Show \"Welcome back\" message\n    }\n  }, []);\n\n  // On successful submission\n  const handleSubmit = async () => {\n    await submitForm(formData);\n    clearSaved(); // Only clear after confirmed submission\n  };\n\n  return (/* ... */);\n}\n```\n\n## Pattern: Visible Sync Status\n\n### The Status Indicator\n\nUsers need to know their data is safe. Always show sync status.\n\n```tsx\n// components/SyncStatus.tsx\ninterface SyncStatusProps {\n  status: 'saved' | 'saving' | 'synced' | 'offline' | 'error';\n  lastSaved?: Date;\n}\n\nexport function SyncStatus({ status, lastSaved }: SyncStatusProps) {\n  const messages = {\n    saved: '‚úì Saved to this device',\n    saving: 'Saving...',\n    synced: '‚úì Up to date',\n    offline: '‚ö° Saved locally (will sync when online)',\n    error: '‚ö† Save failed - trying again...'\n  };\n\n  const colors = {\n    saved: 'text-olive',      // Green-ish\n    saving: 'text-mustard',   // Yellow\n    synced: 'text-olive',\n    offline: 'text-burnt-orange',\n    error: 'text-terracotta'  // Not aggressive red\n  };\n\n  return (\n    <div className={`text-sm ${colors[status]} flex items-center gap-2`}>\n      <span>{messages[status]}</span>\n      {lastSaved && status !== 'saving' && (\n        <span className=\"text-brown/60\">\n          ({formatTimeAgo(lastSaved)})\n        </span>\n      )}\n    </div>\n  );\n}\n```\n\n### Placement\n\n- **Always visible** during form filling (sticky header or footer)\n- **Not dismissible** - users shouldn't be able to hide it\n- **Calm colors** - no alarming red unless truly critical\n\n## Pattern: Background Sync\n\n### Service Worker Setup\n\n```typescript\n// sw.ts (Service Worker)\nconst CACHE_NAME = 'expungement-guide-v1';\nconst SYNC_TAG = 'form-sync';\n\n// Cache critical assets\nself.addEventListener('install', (event) => {\n  event.waitUntil(\n    caches.open(CACHE_NAME).then((cache) => {\n      return cache.addAll([\n        '/',\n        '/eligibility',\n        '/offline.html',\n        // Critical CSS and JS\n      ]);\n    })\n  );\n});\n\n// Handle offline navigation\nself.addEventListener('fetch', (event) => {\n  if (event.request.mode === 'navigate') {\n    event.respondWith(\n      fetch(event.request).catch(() => {\n        return caches.match('/offline.html');\n      })\n    );\n  }\n});\n\n// Background sync when connection returns\nself.addEventListener('sync', (event) => {\n  if (event.tag === SYNC_TAG) {\n    event.waitUntil(syncPendingForms());\n  }\n});\n\nasync function syncPendingForms() {\n  const pending = await getPendingSubmissions();\n  for (const submission of pending) {\n    try {\n      await fetch('/api/submit', {\n        method: 'POST',\n        body: JSON.stringify(submission.data)\n      });\n      await markAsSynced(submission.id);\n    } catch {\n      // Will retry on next sync event\n    }\n  }\n}\n```\n\n### Registering Sync\n\n```typescript\n// When user submits form offline\nasync function submitForm(data: FormData) {\n  if (navigator.onLine) {\n    // Direct submission\n    return await fetch('/api/submit', {\n      method: 'POST',\n      body: JSON.stringify(data)\n    });\n  } else {\n    // Queue for background sync\n    await saveToIndexedDB('pending-submissions', {\n      data,\n      timestamp: Date.now()\n    });\n\n    // Register sync (will fire when online)\n    const registration = await navigator.serviceWorker.ready;\n    await registration.sync.register('form-sync');\n\n    return { queued: true };\n  }\n}\n```\n\n## Pattern: Progressive Enhancement\n\n### Text-First Views\n\nProvide critical information without requiring JavaScript or heavy assets.\n\n```tsx\n// pages/[state]/index.tsx\nexport default function StatePage({ state }) {\n  return (\n    <article>\n      {/* Critical info loads immediately, no JS needed */}\n      <h1>{state.name} Expungement Guide</h1>\n      <p>{state.summary.overview}</p>\n\n      {/* Key eligibility info in plain text */}\n      <section>\n        <h2>Am I Eligible?</h2>\n        <ul>\n          {state.eligibilityCriteria.map(c => (\n            <li key={c}>{c}</li>\n          ))}\n        </ul>\n      </section>\n\n      {/* Interactive wizard loads after */}\n      <Suspense fallback={<p>Loading interactive guide...</p>}>\n        <EligibilityWizard state={state} />\n      </Suspense>\n    </article>\n  );\n}\n```\n\n### Low-Bandwidth Mode\n\n```typescript\n// Detect slow connections\nfunction useConnectionQuality() {\n  const [quality, setQuality] = useState<'fast' | 'slow' | 'offline'>('fast');\n\n  useEffect(() => {\n    const connection = (navigator as any).connection;\n\n    function updateQuality() {\n      if (!navigator.onLine) {\n        setQuality('offline');\n      } else if (connection?.effectiveType === '2g' ||\n                 connection?.effectiveType === 'slow-2g') {\n        setQuality('slow');\n      } else {\n        setQuality('fast');\n      }\n    }\n\n    updateQuality();\n    connection?.addEventListener('change', updateQuality);\n    window.addEventListener('online', updateQuality);\n    window.addEventListener('offline', updateQuality);\n\n    return () => {\n      connection?.removeEventListener('change', updateQuality);\n      window.removeEventListener('online', updateQuality);\n      window.removeEventListener('offline', updateQuality);\n    };\n  }, []);\n\n  return quality;\n}\n\n// Conditional rendering based on connection\nfunction ImageOrPlaceholder({ src, alt, lowBandwidthText }) {\n  const quality = useConnectionQuality();\n\n  if (quality === 'slow' || quality === 'offline') {\n    return <div className=\"bg-cream p-4 text-center\">{lowBandwidthText}</div>;\n  }\n\n  return <img src={src} alt={alt} loading=\"lazy\" />;\n}\n```\n\n## Pattern: Resume Anywhere\n\n### Session Persistence\n\nMulti-step flows must survive browser crashes, session timeouts, and device switches.\n\n```typescript\n// Save current step and all answers\ninterface WizardSession {\n  currentStep: number;\n  totalSteps: number;\n  answers: Record<string, any>;\n  startedAt: string;\n  lastActivityAt: string;\n  completedSteps: number[];\n}\n\nfunction saveWizardSession(session: WizardSession) {\n  // Save to localStorage (immediate)\n  localStorage.setItem('wizard-session', JSON.stringify(session));\n\n  // Also save to server if logged in (background)\n  if (user.isAuthenticated) {\n    queueSync('wizard-session', session);\n  }\n}\n\n// Restore session with merge strategy\nfunction restoreWizardSession(): WizardSession | null {\n  const local = localStorage.getItem('wizard-session');\n  const server = user.isAuthenticated ? await fetchServerSession() : null;\n\n  if (!local && !server) return null;\n  if (!server) return JSON.parse(local);\n  if (!local) return server;\n\n  // Merge: use whichever is more recent\n  const localSession = JSON.parse(local);\n  return new Date(localSession.lastActivityAt) > new Date(server.lastActivityAt)\n    ? localSession\n    : server;\n}\n```\n\n### \"Continue Where You Left Off\" UI\n\n```tsx\nfunction WizardEntry() {\n  const [existingSession, setExistingSession] = useState<WizardSession | null>(null);\n\n  useEffect(() => {\n    const session = restoreWizardSession();\n    if (session) setExistingSession(session);\n  }, []);\n\n  if (existingSession) {\n    return (\n      <div className=\"bg-cream p-6 rounded-lg border border-mustard\">\n        <h2 className=\"text-lg font-semibold text-brown\">\n          Welcome Back!\n        </h2>\n        <p className=\"mt-2 text-brown/80\">\n          You were on step {existingSession.currentStep} of {existingSession.totalSteps}.\n          Would you like to continue?\n        </p>\n        <div className=\"mt-4 flex gap-4\">\n          <button\n            onClick={() => resumeSession(existingSession)}\n            className=\"px-4 py-2 bg-burnt-orange text-cream rounded\"\n          >\n            Continue Where I Left Off\n          </button>\n          <button\n            onClick={() => {\n              clearSession();\n              setExistingSession(null);\n            }}\n            className=\"px-4 py-2 border border-brown text-brown rounded\"\n          >\n            Start Over\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return <WizardStart />;\n}\n```\n\n## Pattern: Offline Page\n\n### Graceful Degradation\n\nWhen offline, show helpful information instead of an error.\n\n```html\n<!-- public/offline.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Offline - National Expungement Guide</title>\n  <style>\n    body {\n      font-family: system-ui, sans-serif;\n      background: #f5f0e6;\n      color: #4a3728;\n      padding: 2rem;\n      max-width: 600px;\n      margin: 0 auto;\n    }\n    h1 { color: #2d3d28; }\n    .tip {\n      background: #fff;\n      border-left: 4px solid #d4a03a;\n      padding: 1rem;\n      margin: 1rem 0;\n    }\n  </style>\n</head>\n<body>\n  <h1>You're Offline</h1>\n  <p>Don't worry - your progress has been saved to this device.</p>\n\n  <div class=\"tip\">\n    <strong>What you can still do:</strong>\n    <ul>\n      <li>Your form answers are saved</li>\n      <li>When you're back online, everything will sync</li>\n      <li>Downloaded PDFs are still available</li>\n    </ul>\n  </div>\n\n  <div class=\"tip\">\n    <strong>To get back online:</strong>\n    <ul>\n      <li>Check your wifi or mobile data connection</li>\n      <li>If at a library, the session may have expired</li>\n      <li>Try refreshing this page when connected</li>\n    </ul>\n  </div>\n\n  <p>\n    <strong>Need help now?</strong> Call 211 for local assistance or\n    visit your local legal aid office in person.\n  </p>\n</body>\n</html>\n```\n\n## Testing Checklist\n\n```\n‚ñ° App works with airplane mode enabled\n‚ñ° Form data survives browser crash (close tab mid-form)\n‚ñ° \"Saved\" indicator visible at all times during form filling\n‚ñ° Works on 2G connection speed (Chrome DevTools throttling)\n‚ñ° Service worker caches critical pages\n‚ñ° Background sync queues submissions when offline\n‚ñ° \"Resume\" prompt appears when returning to incomplete form\n‚ñ° Offline page is helpful, not just an error\n‚ñ° No data loss tested: fill form, disconnect, reconnect, submit\n‚ñ° IndexedDB storage doesn't exceed reasonable limits (~50MB)\n```\n\n## Anti-Patterns to Avoid\n\n### ‚ùå \"Please Connect to Internet\"\n\n```tsx\n// WRONG - Unhelpful\nif (!navigator.onLine) {\n  return <div>Please connect to the internet to continue.</div>;\n}\n```\n\n### ‚ùå Silent Data Loss\n\n```tsx\n// WRONG - Data lost on navigation\nfunction Form() {\n  const [data, setData] = useState({});\n  // No persistence! User loses everything if they navigate away\n}\n```\n\n### ‚ùå Required Real-Time Validation\n\n```tsx\n// WRONG - Blocks offline users\nasync function validateField(value) {\n  const response = await fetch('/api/validate', { body: value });\n  // Fails offline - user can't proceed\n}\n\n// RIGHT - Client-side validation with server enhancement\nfunction validateField(value) {\n  // Basic validation always works\n  if (!value) return 'Required';\n  if (value.length < 3) return 'Too short';\n\n  // Enhanced validation when online (non-blocking)\n  if (navigator.onLine) {\n    queueServerValidation(value);\n  }\n\n  return null; // Valid for now\n}\n```\n\n### ‚ùå Session Timeouts Without Warning\n\n```tsx\n// WRONG - Surprise timeout\nsetTimeout(() => {\n  logout();\n  redirect('/');\n}, 30 * 60 * 1000); // 30 min timeout, no warning\n\n// RIGHT - Warning before timeout\nsetTimeout(() => {\n  showModal({\n    title: \"Session Expiring\",\n    message: \"You've been inactive. Your progress is saved. \" +\n             \"Click 'Continue' to keep working.\",\n    actions: [\n      { label: 'Continue', onClick: extendSession },\n      { label: 'Save & Exit', onClick: saveAndLogout }\n    ]\n  });\n}, 25 * 60 * 1000); // Warn at 25 min\n```\n"
        },
        {
          "name": "trauma-informed-language.md",
          "type": "file",
          "path": "design-justice/references/trauma-informed-language.md",
          "size": 9919,
          "content": "# Trauma-Informed Language Guide\n\n## The Problem\n\nTraditional legal and bureaucratic language:\n- Assumes guilt or wrongdoing\n- Uses jargon that excludes\n- Triggers shame and anxiety\n- Creates power imbalances\n- Reinforces institutional trauma\n\nReality for people with records:\n- Many have experienced system trauma (courts, jails, probation)\n- Formal language triggers fight/flight responses\n- Uncertainty causes anxiety spirals\n- Shame prevents help-seeking\n- Past experiences create distrust\n\n## Core Principles\n\n### 1. Person-First Language\n\n**Always separate the person from the record.**\n\n| ‚ùå Avoid | ‚úÖ Use Instead |\n|----------|----------------|\n| Criminal | Person with a criminal record |\n| Offender | Person who was convicted |\n| Ex-con | Person who was previously incarcerated |\n| Felon | Person with a felony conviction |\n| Your criminal history | Your record |\n| Your offense | The conviction |\n| Criminals | People with records |\n\n### 2. Active vs Passive Voice for Agency\n\nUse **active voice** when the user has power:\n- \"You can file for expungement\" ‚úÖ\n- \"Expungement may be filed for\" ‚ùå\n\nUse **passive voice** to avoid blame:\n- \"The charge was dismissed\" ‚úÖ\n- \"You got your charge dismissed\" ‚ùå (implies user had to do something wrong first)\n\n### 3. Plain Language Standards\n\n**Target: 6th-8th grade reading level**\n\n| ‚ùå Legal Jargon | ‚úÖ Plain Language |\n|-----------------|-------------------|\n| Adjudication | Court decision |\n| Nolle prosequi | Case dropped by prosecutor |\n| Disposition | How the case ended |\n| Motion | Request to the court |\n| Petition | Application form |\n| Docket | Case schedule/list |\n| Jurisdiction | Which court handles your case |\n| Statute of limitations | Time limit |\n| Indigent | Unable to pay |\n| Pro se | Without a lawyer |\n| Expungement | Clearing your record |\n| Sealing | Hiding from public view |\n\n### 4. Acknowledge Difficulty\n\n**Don't pretend it's easy when it's not.**\n\n‚ùå \"Simply fill out the form and you're done!\"\n‚úÖ \"This process has several steps. We'll guide you through each one.\"\n\n‚ùå \"It's easy!\"\n‚úÖ \"Many people complete this successfully.\"\n\n‚ùå \"Just call the court\"\n‚úÖ \"You'll need to contact the court. Here's what to say...\"\n\n### 5. Validate Emotions\n\n**Acknowledge that this is stressful.**\n\n```\n‚úÖ Good openings:\n\"We know this process can feel overwhelming.\"\n\"It's normal to feel anxious about these steps.\"\n\"Many people find this frustrating - you're not alone.\"\n\"This system wasn't designed to be easy to navigate.\"\n```\n\n### 6. Celebrate Progress\n\n**Mark milestones without being patronizing.**\n\n```\n‚úÖ After completing eligibility check:\n\"Great news - you may be eligible for expungement.\"\n\n‚úÖ After completing a form section:\n\"Section complete. You're making real progress.\"\n\n‚úÖ After form submission:\n\"Your application has been submitted. That's a big step.\"\n```\n\nAvoid:\n- Over-the-top celebration (\"AMAZING! YOU DID IT! üéâüéâüéâ\")\n- Diminishing language (\"That was easy, right?\")\n- False promises (\"You're almost done!\" when they're not)\n\n## Tone Guidelines by Context\n\n### Eligibility Results\n\n**If Eligible:**\n```\n‚úÖ \"Based on your answers, you may be eligible for expungement in [State].\"\n\nThen immediately:\n- What this means\n- What the next steps are\n- Expected timeline\n- What could still go wrong (gently)\n```\n\n**If Not Eligible:**\n```\n‚úÖ \"Based on your answers, you may not currently be eligible for expungement\nin [State]. Here's why and what options you might have.\"\n\nThen:\n- Clear explanation of WHY (specific disqualifying factor)\n- When they MIGHT become eligible (if applicable)\n- Alternative options (sealing, pardons, certificates of rehabilitation)\n- Resources for legal help (might be exceptions)\n```\n\n**Never:**\n- \"Sorry, you're not eligible\" (apologetic but unhelpful)\n- \"Unfortunately, due to your criminal history...\" (shame-inducing)\n- Leave them without next steps\n\n### Error Messages\n\n**Form Errors:**\n```\n‚ùå \"Invalid input\"\n‚ùå \"Error: Field required\"\n‚ùå \"You forgot to fill out this field\"\n\n‚úÖ \"Please enter your date of birth\"\n‚úÖ \"We need this information to check your eligibility\"\n‚úÖ \"This field helps us find the right forms for your county\"\n```\n\n**System Errors:**\n```\n‚ùå \"Something went wrong\"\n‚ùå \"Error 500\"\n\n‚úÖ \"We couldn't save your progress just now. Don't worry -\n   your answers are saved on this device. Please try again in a moment.\"\n\n‚úÖ \"We're having trouble connecting. Your work is saved locally\n   and will sync when the connection is restored.\"\n```\n\n### Instructions\n\n**Before a Task:**\n```\n‚úÖ \"In this section, we'll ask about your conviction. This helps us\n   determine which forms you need.\"\n\n‚úÖ \"The next questions are about personal information. This stays\n   on your device unless you choose to submit it.\"\n```\n\n**During a Task:**\n```\n‚úÖ \"If you don't know the exact date, an estimate is fine.\"\n‚úÖ \"You can skip this for now and come back later.\"\n‚úÖ \"Don't worry if you're not sure - we'll help you find out.\"\n```\n\n**After a Task:**\n```\n‚úÖ \"Section complete. Your answers have been saved.\"\n‚úÖ \"Next, we'll help you fill out the forms.\"\n```\n\n## Color and Visual Language\n\n### Calm Color Palette\n\nColors carry emotional weight. Avoid alarming colors.\n\n| State | ‚ùå Avoid | ‚úÖ Use Instead |\n|-------|----------|----------------|\n| Error | Bright red (#ff0000) | Muted terracotta (#c97a5d) |\n| Warning | Alarming yellow (#ffff00) | Warm amber (#d4a03a) |\n| Success | Aggressive lime (#00ff00) | Soft olive (#5a6f4e) |\n| Info | Cold blue (#0000ff) | Warm teal (#4a9d9e) |\n\n### Visual Hierarchy\n\n```\n‚úÖ DO:\n- Use whitespace generously\n- One primary action per screen\n- Progress indicators for multi-step flows\n- Icons that support (not replace) text\n\n‚ùå DON'T:\n- Multiple competing CTAs\n- Dense walls of text\n- Flashing or pulsing elements\n- Countdown timers that create pressure\n```\n\n### Progress Indicators\n\n```tsx\n// Good: Clear, calm progress\n<ProgressBar\n  current={3}\n  total={5}\n  label=\"Step 3 of 5: Personal Information\"\n/>\n\n// Bad: Pressure-inducing\n<div>HURRY! Only 2 steps left! Complete now!</div>\n```\n\n## Specific Phrasing Recommendations\n\n### Asking About Convictions\n\n```\n‚ùå \"What crime did you commit?\"\n‚ùå \"Enter your criminal offense\"\n‚ùå \"Describe your criminal history\"\n\n‚úÖ \"What type of conviction is on your record?\"\n‚úÖ \"What was the charge?\"\n‚úÖ \"Select the category that best describes the conviction\"\n```\n\n### Asking About Time Served\n\n```\n‚ùå \"How long were you incarcerated?\"\n‚ùå \"Prison time served\"\n\n‚úÖ \"Were you sentenced to any time in jail or prison?\"\n‚úÖ \"If yes, how long was the sentence?\"\n```\n\n### Referring to Past Events\n\n```\n‚ùå \"After you committed the offense...\"\n‚ùå \"Since your crime...\"\n‚ùå \"When you broke the law...\"\n\n‚úÖ \"After the conviction...\"\n‚úÖ \"Since the case was closed...\"\n‚úÖ \"From the date the case ended...\"\n```\n\n### Discussing Fees\n\n```\n‚ùå \"The filing fee is $150. Payment required.\"\n\n‚úÖ \"The filing fee is typically $150. If you can't afford this,\n   you may qualify for a fee waiver. We'll help you apply for one.\"\n```\n\n### Explaining Denials\n\n```\n‚ùå \"Your request was denied due to your criminal record.\"\n\n‚úÖ \"The court did not approve this request. This sometimes happens,\n   and there may be other options available. Here's what you can do next...\"\n```\n\n## Writing Checklist\n\nBefore publishing any user-facing text:\n\n```\n‚ñ° Uses person-first language throughout\n‚ñ° Reading level is 8th grade or below (use Hemingway App)\n‚ñ° All legal jargon is explained in plain language\n‚ñ° Acknowledges difficulty without being discouraging\n‚ñ° Provides clear next steps (never dead ends)\n‚ñ° Error messages are helpful, not blaming\n‚ñ° Success messages are encouraging, not patronizing\n‚ñ° Colors are calm (no aggressive red/yellow)\n‚ñ° Timeline expectations are explicit\n‚ñ° \"I don't know\" is always a valid answer\n‚ñ° Skip options exist for optional questions\n‚ñ° No countdown timers or pressure tactics\n```\n\n## Examples: Before & After\n\n### Example 1: Eligibility Question\n\n**Before:**\n> \"Have you ever been convicted of a violent felony as defined under\n> Penal Code Section 667.5(c)?\"\n\n**After:**\n> \"Were you convicted of any of these serious crimes?\n> - Murder or attempted murder\n> - Kidnapping\n> - Robbery\n> - Sexual assault\n> - Assault with a deadly weapon\n>\n> [Yes] [No] [I'm not sure]\n>\n> If you're not sure, that's okay. Select 'I'm not sure' and we'll\n> help you figure it out.\"\n\n### Example 2: Error State\n\n**Before:**\n> \"Error: Invalid date format. Please enter date as MM/DD/YYYY.\"\n\n**After:**\n> \"Please enter the date as month/day/year (example: 03/15/2020).\n>\n> If you don't remember the exact date, an estimate is fine.\"\n\n### Example 3: Waiting Period\n\n**Before:**\n> \"Pursuant to State statute, a mandatory waiting period of 5 years\n> must elapse from the date of disposition before petition may be filed.\"\n\n**After:**\n> \"You'll need to wait 5 years from when your case ended before\n> you can apply.\n>\n> Your case ended: March 2019\n> You can apply starting: March 2024\n>\n> [Set a reminder for March 2024]\"\n\n### Example 4: Ineligibility\n\n**Before:**\n> \"Based on your responses, you are not eligible for expungement\n> at this time. Thank you for using our service.\"\n\n**After:**\n> \"Based on your answers, you may not be eligible for expungement\n> right now. Here's why:\n>\n> Your record includes a conviction that currently can't be expunged\n> under [State] law (DUI with injury).\n>\n> **What you can do:**\n> - Talk to a lawyer - there may be exceptions we don't know about\n> - Apply for a Certificate of Rehabilitation instead\n> - Check back if the law changes (many states are updating these rules)\n>\n> [Find free legal help] [Learn about alternatives]\"\n\n## Resources\n\n- Hemingway App (readability testing): hemingwayapp.com\n- Plain Language Guidelines: plainlanguage.gov\n- Trauma-Informed Care principles: SAMHSA\n- Design Justice Network: designjusticenetwork.org\n"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "design-justice/SKILL.md",
      "size": 12134,
      "content": "---\nname: design-justice\ndescription: Digital equity and trauma-informed design for marginalized populations. Activate on \"accessibility\", \"offline-first\", \"trauma-informed\", \"reentry\", \"recovery population\", \"shared device\", \"unstable phone\", \"digital equity\", \"design justice\", \"low-literacy\", \"intermittent access\". NOT for general UX, marketing optimization, or enterprise SaaS design.\nallowed-tools: Read,Write,Edit,Glob,Grep\ncategory: Lifestyle & Personal\ntags:\n  - accessibility\n  - trauma-informed\n  - equity\n  - civic-tech\n  - offline-first\n---\n\n# Design Justice: Equity-Centered Digital Design\n\nDesign for the margins, benefit the center. If it works for someone with no stable phone, unstable housing, trauma history, and low digital literacy ‚Üí it works better for everyone.\n\n## Philosophy\n\n**Design Justice** (Sasha Costanza-Chock) + **Trauma-Informed Design** + **Digital Equity Design**\n\nCore principle: The people most impacted by design decisions should be centered in the design process, not treated as edge cases.\n\n## When to Use\n\n‚úÖ **Use for**:\n- Apps serving recovery/reentry populations\n- Government/civic tech applications\n- Healthcare portals for vulnerable populations\n- Housing/benefits applications\n- Legal aid and court self-help tools\n- Nonprofit service delivery platforms\n- Any app used on shared/public devices\n\n‚ùå **NOT for**:\n- Enterprise B2B SaaS (different constraints)\n- Marketing funnel optimization\n- Gamification/engagement maximization\n- Social media features\n- General \"make it pretty\" UX requests\n\n---\n\n## Decision Tree: Which Pattern Applies?\n\n```\nUser has unstable phone number?\n‚îú‚îÄ‚îÄ YES ‚Üí See: Authentication Without Stable Phones\n‚îî‚îÄ‚îÄ NO ‚Üí Standard auth OK\n\nUser may lose internet mid-task?\n‚îú‚îÄ‚îÄ YES ‚Üí See: Offline-First Design\n‚îî‚îÄ‚îÄ NO ‚Üí Standard web patterns OK\n\nUser may be on shared/public device?\n‚îú‚îÄ‚îÄ YES ‚Üí See: Shared Device Privacy\n‚îî‚îÄ‚îÄ NO ‚Üí Standard session management OK\n\nForm is complex or emotionally difficult?\n‚îú‚îÄ‚îÄ YES ‚Üí See: Trauma-Informed Forms\n‚îî‚îÄ‚îÄ NO ‚Üí Standard form patterns OK\n\nUser has history of system trauma?\n‚îú‚îÄ‚îÄ YES ‚Üí Apply ALL trauma-informed patterns\n‚îî‚îÄ‚îÄ UNKNOWN ‚Üí Assume YES for civic/legal/benefits apps\n```\n\n---\n\n## Pattern 1: Authentication Without Stable Phones\n\n### Anti-Pattern: Phone-First Auth\n\n**Novice thinking**: \"Everyone has a phone, SMS 2FA is secure\"\n\n**Reality**:\n- 25% of formerly incarcerated people lack stable phone access\n- Phone numbers change frequently during housing instability\n- Prepaid phones get disconnected for non-payment\n- SMS 2FA locks people out of critical services\n\n**Timeline**:\n- Pre-2020: SMS 2FA considered best practice\n- 2020+: Code for America documented access barriers\n- 2024+: Email-first + backup codes emerging as standard for civic tech\n\n### Correct Patterns\n\n| Need | Pattern | Implementation |\n|------|---------|----------------|\n| Primary auth | Email-first | Email is identifier, phone optional |\n| 2FA | Multiple pathways | Email OR backup codes OR case worker verification |\n| Recovery | Printable codes | One-time codes that can be written down |\n| Bypass | Trusted intermediary | Case managers verify via org email |\n| Essential access | No-signup mode | Core features work without account |\n\n### Implementation Checklist\n\n```\n‚ñ° Email is primary identifier (phone optional)\n‚ñ° Backup codes can be printed/written\n‚ñ° Case worker recovery pathway exists\n‚ñ° Core features work without login\n‚ñ° Sessions are not device-locked\n‚ñ° Phone number changes don't lock accounts\n‚ñ° \"Forgot password\" has non-SMS option\n```\n\n---\n\n## Pattern 2: Offline-First / Intermittent Access\n\n### Anti-Pattern: Always-Online Assumption\n\n**Novice thinking**: \"Just show 'No connection' error\"\n\n**Reality**:\n- Public library computers have session limits\n- Mobile data runs out mid-month\n- Shelter wifi is unreliable\n- Users may have ONE chance to complete a form\n\n### Correct Patterns\n\n| Need | Pattern | Implementation |\n|------|---------|----------------|\n| Data persistence | Local-first | Save to localStorage/IndexedDB immediately |\n| Form state | Auto-save | Save every field change, not just on submit |\n| Submission | Background sync | Queue actions, sync when connection returns |\n| UI feedback | Optimistic updates | Update UI immediately, sync in background |\n| Progress | Resume anywhere | Let users pick up exactly where they left off |\n| Status | Visible sync state | \"Saved locally\" / \"Syncing...\" / \"Up to date\" |\n| Degradation | Graceful offline | Core features work without network |\n\n### Implementation Checklist\n\n```\n‚ñ° PWA with service worker caching\n‚ñ° All form data saves to localStorage on every change\n‚ñ° Clear sync status indicator visible\n‚ñ° Offline mode tested (airplane mode)\n‚ñ° Background sync when connection returns\n‚ñ° No data loss on connection drop (verified)\n‚ñ° Multi-step flows don't timeout\n‚ñ° Minimal asset downloads (text-first views available)\n```\n\n### Code Pattern: Auto-Save Hook\n\n```typescript\n// Save form state on every change\nfunction useAutoSave(key: string, data: any) {\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify({\n      data,\n      savedAt: new Date().toISOString(),\n      synced: false\n    }));\n  }, [key, data]);\n\n  // Return saved data on mount\n  return useMemo(() => {\n    const saved = localStorage.getItem(key);\n    return saved ? JSON.parse(saved).data : null;\n  }, [key]);\n}\n```\n\n---\n\n## Pattern 3: Shared/Public Device Privacy\n\n### Anti-Pattern: Persistent Sessions\n\n**Novice thinking**: \"Remember me improves UX\"\n\n**Reality**:\n- Library computers used by multiple people\n- Shelter computers are shared\n- Previous user's data visible = safety risk\n- Domestic violence survivors need privacy\n\n### Correct Patterns\n\n| Need | Pattern | Implementation |\n|------|---------|----------------|\n| Default state | Privacy mode ON | Don't auto-save sensitive info |\n| Logout | Prominent button | Make it obvious, not buried in menu |\n| Timeout | Warning + auto-logout | \"5 min left. Continue?\" |\n| Forms | No autofill default | Disable browser autofill on sensitive fields |\n| Mode toggle | \"Public computer?\" | One-click extra privacy mode |\n| Cookies | Session-only option | Clear on browser close |\n\n### Implementation Checklist\n\n```\n‚ñ° \"Remember me\" is UNCHECKED by default\n‚ñ° Logout button visible on every page\n‚ñ° Session timeout with save-progress warning\n‚ñ° Sensitive fields have autocomplete=\"off\"\n‚ñ° Incognito mode suggested in UI for public computers\n‚ñ° No cached personal data after logout\n‚ñ° \"Working on a shared computer?\" toggle available\n```\n\n---\n\n## Pattern 4: Trauma-Informed Forms & Flows\n\n### Anti-Pattern: Bureaucratic Interrogation\n\n**Novice thinking**: \"Collect all info upfront for efficiency\"\n\n**Reality**:\n- Long forms trigger overwhelm and abandonment\n- Red error text is shame-triggering\n- Legal jargon creates anxiety\n- Surprise requirements feel like traps\n- \"Tell your story\" boxes are cognitively overwhelming\n\n### Correct Patterns\n\n| Need | Pattern | Implementation |\n|------|---------|----------------|\n| Length | Chunked progress | Break into short sections, save each |\n| Language | Plain language | 6th-8th grade reading level |\n| Complexity | One question/page | For difficult topics |\n| Progress | Clear indicators | \"Step 2 of 5\" always visible |\n| Validation | Forgiving input | Auto-format, accept variations |\n| Defaults | Smart prefill | Pre-fill what you can infer |\n| Help | Inline, not hidden | Help text visible, not in modals |\n| Flow | Skip and return | Never force-block on optional fields |\n\n### Tone Guidelines\n\n‚úÖ **Use**:\n- Person-first language: \"Person with a conviction\"\n- Transparent timelines: \"We'll review in 3-5 days\"\n- Acknowledgment: \"This process can be frustrating\"\n- Affirming: \"You're making progress\"\n\n‚ùå **Avoid**:\n- Shame language: \"Your criminal past...\"\n- Vague timelines: \"We'll get back to you\"\n- Blame: \"You didn't complete...\"\n- Guilt assumptions: \"Your offense...\"\n\n### Color & Visual Guidelines\n\n```\n‚úÖ Calm palette:\n- Success: Soft green (#4a9d9e), not aggressive lime\n- Warning: Warm amber (#d4a03a), not alarming yellow\n- Error: Muted terracotta (#c97a5d), not aggressive red\n- Background: Cream/warm neutrals\n\n‚ùå Avoid:\n- Aggressive red for errors\n- High-contrast warning colors\n- Flashing or pulsing elements\n- Visual \"alarm\" states\n```\n\n### Implementation Checklist\n\n```\n‚ñ° No form longer than 5 fields per page\n‚ñ° Progress indicator on all multi-step flows\n‚ñ° Help text inline, not in tooltips/modals\n‚ñ° Forgiving validation (formats automatically)\n‚ñ° No required fields that aren't truly required\n‚ñ° \"Skip for now\" on optional sections\n‚ñ° Calm color palette (no aggressive reds)\n‚ñ° Person-first language throughout\n‚ñ° Clear \"what happens next\" on every screen\n```\n\n---\n\n## Pattern 5: Expungement/Record Clearance Specific\n\n### Anti-Pattern: Assuming User Knowledge\n\n**Novice thinking**: \"They know their case numbers\"\n\n**Reality**:\n- People don't remember case numbers from years ago\n- Legal terminology is confusing\n- County/jurisdiction boundaries are unclear\n- Documents may be inaccessible\n\n### Correct Patterns\n\n| Need | Pattern | Implementation |\n|------|---------|----------------|\n| Eligibility | Checker first | Show if qualified BEFORE collecting info |\n| Documents | Multiple upload methods | Email, fax, mail, in-person, photo |\n| Location | Auto-detection | Don't make them figure out jurisdiction |\n| Records | Lookup tools | Help them find their own case numbers |\n| Terms | Plain language | Define every legal term |\n| Timeline | Explicit expectations | \"Most cases take 60-90 days\" |\n| Fees | Waiver prominent | Fee waiver should be default path |\n\n### Implementation Checklist\n\n```\n‚ñ° Eligibility checker before signup/info collection\n‚ñ° Case number lookup tool or \"I don't know\" option\n‚ñ° County auto-detected from address\n‚ñ° Document upload alternatives (not just scan)\n‚ñ° Legal terms have inline definitions\n‚ñ° Expected timeline stated clearly\n‚ñ° Fee waiver is default, not hidden option\n‚ñ° \"Not eligible\" includes explanation WHY\n```\n\n---\n\n## Code for America Principles\n\nThe gold standard for civic tech:\n\n1. **Automatic > Petition-based** - Don't require action from people with records\n2. **No-cost by default** - Fee waivers automatic, not applied for\n3. **Government does the work** - Don't burden individuals\n4. **Co-design with impacted people** - Not just user research ON them\n5. **Assume gaps in data** - Design around incomplete records\n6. **Backend automation** - Minimal staff time, no manual bottlenecks\n\n---\n\n## Quick Audit Checklist\n\nRun this against any civic/legal/benefits application:\n\n```\nAUTHENTICATION\n‚ñ° Can user sign up with just email?\n‚ñ° Is there a non-SMS account recovery option?\n‚ñ° Do core features work without login?\n\nOFFLINE/INTERMITTENT\n‚ñ° Does form data survive connection loss?\n‚ñ° Is there visible \"saved\" indicator?\n‚ñ° Can user resume exactly where they left off?\n\nSHARED DEVICES\n‚ñ° Is \"remember me\" unchecked by default?\n‚ñ° Is logout button prominent?\n‚ñ° Does session timeout with warning?\n\nFORMS\n‚ñ° Is reading level ‚â§8th grade?\n‚ñ° Are there ‚â§5 fields per page?\n‚ñ° Is help text inline (not hidden)?\n‚ñ° Are required fields truly required?\n\nTONE\n‚ñ° Is language person-first?\n‚ñ° Are timelines explicit?\n‚ñ° Is error messaging non-blaming?\n‚ñ° Are colors calm (no aggressive red)?\n\nLEGAL/EXPUNGEMENT SPECIFIC\n‚ñ° Is eligibility checked first?\n‚ñ° Are fee waivers prominent?\n‚ñ° Is \"I don't know my case number\" handled?\n```\n\n---\n\n## References\n\n- `/references/authentication-patterns.md` - Detailed auth implementation\n- `/references/offline-first-patterns.md` - PWA and sync patterns\n- `/references/trauma-informed-language.md` - Tone and word choice guide\n- `/references/code-for-america-learnings.md` - CfA case studies\n\n## Key Readings\n\n- Design Justice Network principles\n- Code for America's design principles\n- C4 Innovations equity work (homeless response systems)\n- Innovation Unit's digital access for rough sleepers\n- Sasha Costanza-Chock: \"Design Justice\" (2020)\n"
    }
  ]
}