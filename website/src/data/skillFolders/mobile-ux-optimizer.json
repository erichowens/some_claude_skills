{
  "name": "mobile-ux-optimizer",
  "type": "folder",
  "path": "mobile-ux-optimizer",
  "children": [
    {
      "name": "references",
      "type": "folder",
      "path": "mobile-ux-optimizer/references",
      "children": [
        {
          "name": "gestures.md",
          "type": "file",
          "path": "mobile-ux-optimizer/references/gestures.md",
          "size": 4820,
          "content": "# Gesture Hooks\n\nTouch gesture handling for mobile interactions.\n\n## useSwipe Hook\n\nDirectional swipe detection with configurable threshold.\n\n```tsx\n// hooks/useSwipe.ts\n'use client';\n\nimport { useRef, TouchEvent } from 'react';\n\ninterface SwipeConfig {\n  onSwipeLeft?: () => void;\n  onSwipeRight?: () => void;\n  onSwipeUp?: () => void;\n  onSwipeDown?: () => void;\n  threshold?: number;  // Minimum distance in pixels (default: 50)\n}\n\nexport function useSwipe(config: SwipeConfig) {\n  const touchStart = useRef<{ x: number; y: number } | null>(null);\n  const threshold = config.threshold ?? 50;\n\n  const handleTouchStart = (e: TouchEvent) => {\n    touchStart.current = {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n    };\n  };\n\n  const handleTouchEnd = (e: TouchEvent) => {\n    if (!touchStart.current) return;\n\n    const deltaX = e.changedTouches[0].clientX - touchStart.current.x;\n    const deltaY = e.changedTouches[0].clientY - touchStart.current.y;\n\n    // Determine primary direction (larger delta wins)\n    if (Math.abs(deltaX) > Math.abs(deltaY)) {\n      if (deltaX > threshold) config.onSwipeRight?.();\n      if (deltaX < -threshold) config.onSwipeLeft?.();\n    } else {\n      if (deltaY > threshold) config.onSwipeDown?.();\n      if (deltaY < -threshold) config.onSwipeUp?.();\n    }\n\n    touchStart.current = null;\n  };\n\n  return { handleTouchStart, handleTouchEnd };\n}\n```\n\n### Usage\n\n```tsx\nfunction ImageGallery({ images, currentIndex, setCurrentIndex }) {\n  const { handleTouchStart, handleTouchEnd } = useSwipe({\n    onSwipeLeft: () => setCurrentIndex(i => Math.min(i + 1, images.length - 1)),\n    onSwipeRight: () => setCurrentIndex(i => Math.max(i - 1, 0)),\n    threshold: 75,  // Require more deliberate swipes\n  });\n\n  return (\n    <div\n      onTouchStart={handleTouchStart}\n      onTouchEnd={handleTouchEnd}\n    >\n      <img src={images[currentIndex]} alt=\"\" />\n    </div>\n  );\n}\n```\n\n**Key patterns:**\n- Only fires when threshold exceeded (prevents accidental triggers)\n- Primary direction detection (no diagonal confusion)\n- Optional callbacks for each direction\n- Refs for touch state (no re-renders during gesture)\n\n---\n\n## usePullToRefresh Hook\n\nPull-to-refresh with visual feedback and resistance.\n\n```tsx\n// hooks/usePullToRefresh.ts\n'use client';\n\nimport { useState, useRef } from 'react';\n\nexport function usePullToRefresh(onRefresh: () => Promise<void>) {\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [pullDistance, setPullDistance] = useState(0);\n  const startY = useRef<number | null>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const threshold = 80;  // Pixels to pull before triggering\n\n  const handleTouchStart = (e: React.TouchEvent) => {\n    // Only start if at top of scroll container\n    if (containerRef.current?.scrollTop === 0) {\n      startY.current = e.touches[0].clientY;\n    }\n  };\n\n  const handleTouchMove = (e: React.TouchEvent) => {\n    if (startY.current === null || isRefreshing) return;\n\n    const currentY = e.touches[0].clientY;\n    const distance = Math.max(0, currentY - startY.current);\n\n    // Apply resistance (0.5x) and cap at 120px\n    setPullDistance(Math.min(distance * 0.5, 120));\n  };\n\n  const handleTouchEnd = async () => {\n    if (pullDistance >= threshold && !isRefreshing) {\n      setIsRefreshing(true);\n      await onRefresh();\n      setIsRefreshing(false);\n    }\n    setPullDistance(0);\n    startY.current = null;\n  };\n\n  return {\n    containerRef,\n    pullDistance,\n    isRefreshing,\n    handlers: {\n      onTouchStart: handleTouchStart,\n      onTouchMove: handleTouchMove,\n      onTouchEnd: handleTouchEnd,\n    },\n  };\n}\n```\n\n### Usage with Visual Indicator\n\n```tsx\nfunction RefreshableList({ items, onRefresh }) {\n  const { containerRef, pullDistance, isRefreshing, handlers } =\n    usePullToRefresh(onRefresh);\n\n  return (\n    <div\n      ref={containerRef}\n      {...handlers}\n      className=\"h-full overflow-y-auto\"\n    >\n      {/* Pull indicator */}\n      <div\n        className=\"flex justify-center items-center overflow-hidden transition-all\"\n        style={{ height: pullDistance }}\n      >\n        {isRefreshing ? (\n          <Spinner className=\"w-6 h-6 animate-spin\" />\n        ) : (\n          <ArrowDown\n            className=\"w-6 h-6 transition-transform\"\n            style={{\n              transform: `rotate(${Math.min(pullDistance / threshold, 1) * 180}deg)`\n            }}\n          />\n        )}\n      </div>\n\n      {/* Content */}\n      {items.map(item => <ItemCard key={item.id} item={item} />)}\n    </div>\n  );\n}\n```\n\n**Key patterns:**\n- Only activates at scroll top (doesn't hijack normal scrolling)\n- 0.5x resistance feels natural (not 1:1 with finger movement)\n- 120px cap prevents over-pull\n- Arrow rotates as progress indicator\n- Async refresh with loading state\n"
        },
        {
          "name": "navigation.md",
          "type": "file",
          "path": "mobile-ux-optimizer/references/navigation.md",
          "size": 4113,
          "content": "# Navigation Components\n\nMobile navigation patterns optimized for touch and safe areas.\n\n## BottomNav Component\n\nFixed bottom navigation with safe area padding and active state handling.\n\n```tsx\n// components/BottomNav.tsx\n'use client';\n\nimport { usePathname } from 'next/navigation';\nimport Link from 'next/link';\n\nconst navItems = [\n  { href: '/', icon: HomeIcon, label: 'Home' },\n  { href: '/meetings', icon: CalendarIcon, label: 'Meetings' },\n  { href: '/tools', icon: ToolsIcon, label: 'Tools' },\n  { href: '/my', icon: UserIcon, label: 'My Recovery' },\n];\n\nexport function BottomNav() {\n  const pathname = usePathname();\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 bg-leather-900 border-t border-leather-700 pb-safe\">\n      <div className=\"flex justify-around\">\n        {navItems.map(({ href, icon: Icon, label }) => {\n          const isActive = pathname === href || pathname.startsWith(`${href}/`);\n          return (\n            <Link\n              key={href}\n              href={href}\n              className={`\n                flex flex-col items-center py-2 px-3 min-h-[56px] min-w-[64px]\n                ${isActive ? 'text-ember-400' : 'text-leather-400'}\n              `}\n            >\n              <Icon className=\"w-6 h-6\" />\n              <span className=\"text-xs mt-1\">{label}</span>\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n```\n\n**Key patterns:**\n- `pb-safe` for notch/home indicator clearance\n- `min-h-[56px]` exceeds 44px touch target minimum\n- Active state uses `startsWith` for nested routes\n- Icons + labels for accessibility\n\n---\n\n## Drawer Component\n\nPortal-based slide-out drawer with body scroll lock and keyboard handling.\n\n```tsx\n// components/Drawer.tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\n\ninterface DrawerProps {\n  isOpen: boolean;\n  onClose: () => void;\n  children: React.ReactNode;\n}\n\nexport function Drawer({ isOpen, onClose, children }: DrawerProps) {\n  // Lock body scroll when open\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = 'hidden';\n    }\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [isOpen]);\n\n  // Close on Escape key\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') onClose();\n    };\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [onClose]);\n\n  if (!isOpen) return null;\n\n  return createPortal(\n    <div className=\"fixed inset-0 z-50\">\n      {/* Backdrop */}\n      <div\n        className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\n        onClick={onClose}\n        aria-hidden=\"true\"\n      />\n\n      {/* Drawer panel */}\n      <div\n        className=\"absolute left-0 top-0 h-full w-[280px] max-w-[80vw]\n                   bg-leather-900 shadow-xl transform transition-transform\n                   animate-slide-in-left\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n      >\n        <div className=\"h-full overflow-y-auto pt-safe pb-safe\">\n          {children}\n        </div>\n      </div>\n    </div>,\n    document.body\n  );\n}\n```\n\n**Key patterns:**\n- Portal renders outside component tree (avoids z-index issues)\n- Body scroll lock prevents background scrolling\n- Escape key dismissal for accessibility\n- `max-w-[80vw]` prevents full-width takeover on tablets\n- `pt-safe pb-safe` respects notch and home indicator\n- Backdrop click to close\n\n### Animation CSS\n\nAdd to your global CSS:\n\n```css\n@keyframes slide-in-left {\n  from {\n    transform: translateX(-100%);\n  }\n  to {\n    transform: translateX(0);\n  }\n}\n\n.animate-slide-in-left {\n  animation: slide-in-left 0.2s ease-out;\n}\n```\n\nOr in Tailwind config:\n\n```js\n// tailwind.config.js\nmodule.exports = {\n  theme: {\n    extend: {\n      animation: {\n        'slide-in-left': 'slide-in-left 0.2s ease-out',\n      },\n      keyframes: {\n        'slide-in-left': {\n          from: { transform: 'translateX(-100%)' },\n          to: { transform: 'translateX(0)' },\n        },\n      },\n    },\n  },\n};\n```\n"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "mobile-ux-optimizer/SKILL.md",
      "size": 10423,
      "content": "---\nname: mobile-ux-optimizer\ndescription: Mobile-first UX optimization for touch interfaces, responsive layouts, and performance. Use for viewport handling, touch targets, gestures, mobile navigation. Activate on \"mobile\", \"touch\", \"responsive\", \"dvh\", \"viewport\", \"safe area\", \"hamburger menu\". NOT for native app development (use React Native skills), desktop-only features, or general CSS (use Tailwind docs).\nallowed-tools:\n  - Read\n  - Write\n  - Edit\n  - Bash\n  - Grep\n  - Glob\n---\n\n# Mobile-First UX Optimization\n\nBuild touch-optimized, performant mobile experiences with proper viewport handling and responsive patterns.\n\n## When to Use\n\n✅ **USE this skill for:**\n- Viewport issues (`100vh` problems, safe areas, notches)\n- Touch target sizing and spacing\n- Mobile navigation patterns (bottom nav, drawers, hamburger menus)\n- Swipe gestures and pull-to-refresh\n- Responsive breakpoint strategies\n- Mobile performance optimization\n\n❌ **DO NOT use for:**\n- Native app development → use `react-native` or `swift-executor` skills\n- Desktop-only features → no skill needed, standard patterns apply\n- General CSS/Tailwind questions → use Tailwind docs or `web-design-expert`\n- PWA installation/service workers → use `pwa-expert` skill\n\n## Core Principles\n\n### Mobile-First Means Build Up, Not Down\n\n```css\n/* ❌ ANTI-PATTERN: Desktop-first (scale down) */\n.card { width: 400px; }\n@media (max-width: 768px) { .card { width: 100%; } }\n\n/* ✅ CORRECT: Mobile-first (scale up) */\n.card { width: 100%; }\n@media (min-width: 768px) { .card { width: 400px; } }\n```\n\n### The 44px Rule\n\nApple's Human Interface Guidelines specify **44×44 points** as minimum touch target. Google Material suggests **48×48dp**.\n\n```tsx\n// Touch-friendly button\n<button className=\"min-h-[44px] min-w-[44px] px-4 py-3\">\n  Tap me\n</button>\n\n// Touch-friendly link with adequate padding\n<a href=\"/page\" className=\"inline-block py-3 px-4\">\n  Link text\n</a>\n```\n\n## Viewport Handling\n\n### The `dvh` Solution\n\nMobile browsers have dynamic toolbars. `100vh` includes the URL bar, causing content to be cut off.\n\n```css\n/* ❌ ANTI-PATTERN: Content hidden behind browser UI */\n.full-screen { height: 100vh; }\n\n/* ✅ CORRECT: Responds to browser chrome */\n.full-screen { height: 100dvh; }\n\n/* Fallback for older browsers */\n.full-screen {\n  height: 100vh;\n  height: 100dvh;\n}\n```\n\n### Safe Area Insets (Notches & Home Indicators)\n\n```css\n/* Handle iPhone notch and home indicator */\n.bottom-nav {\n  padding-bottom: env(safe-area-inset-bottom, 0);\n}\n\n.header {\n  padding-top: env(safe-area-inset-top, 0);\n}\n\n/* Full safe area padding */\n.safe-container {\n  padding: env(safe-area-inset-top)\n           env(safe-area-inset-right)\n           env(safe-area-inset-bottom)\n           env(safe-area-inset-left);\n}\n```\n\n**Required meta tag:**\n```html\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, viewport-fit=cover\">\n```\n\n### Tailwind Safe Area Classes\n\n```tsx\n// Custom Tailwind utilities (add to globals.css)\n@layer utilities {\n  .pb-safe { padding-bottom: env(safe-area-inset-bottom); }\n  .pt-safe { padding-top: env(safe-area-inset-top); }\n  .h-screen-safe { height: calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom)); }\n}\n\n// Usage\n<nav className=\"fixed bottom-0 pb-safe bg-leather-900\">\n  <BottomNav />\n</nav>\n```\n\n## Mobile Navigation Patterns\n\n### Bottom Navigation (Recommended for Mobile)\n\n```tsx\n// components/BottomNav.tsx\n'use client';\n\nimport { usePathname } from 'next/navigation';\nimport Link from 'next/link';\n\nconst navItems = [\n  { href: '/', icon: HomeIcon, label: 'Home' },\n  { href: '/meetings', icon: CalendarIcon, label: 'Meetings' },\n  { href: '/tools', icon: ToolsIcon, label: 'Tools' },\n  { href: '/my', icon: UserIcon, label: 'My Recovery' },\n];\n\nexport function BottomNav() {\n  const pathname = usePathname();\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 bg-leather-900 border-t border-leather-700 pb-safe\">\n      <div className=\"flex justify-around\">\n        {navItems.map(({ href, icon: Icon, label }) => {\n          const isActive = pathname === href || pathname.startsWith(`${href}/`);\n          return (\n            <Link\n              key={href}\n              href={href}\n              className={`\n                flex flex-col items-center py-2 px-3 min-h-[56px] min-w-[64px]\n                ${isActive ? 'text-ember-400' : 'text-leather-400'}\n              `}\n            >\n              <Icon className=\"w-6 h-6\" />\n              <span className=\"text-xs mt-1\">{label}</span>\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n```\n\n### Slide-Out Drawer (Side Menu)\n\n```tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\n\ninterface DrawerProps {\n  isOpen: boolean;\n  onClose: () => void;\n  children: React.ReactNode;\n}\n\nexport function Drawer({ isOpen, onClose, children }: DrawerProps) {\n  // Prevent body scroll when open\n  useEffect(() => {\n    if (isOpen) {\n      document.body.style.overflow = 'hidden';\n    }\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [isOpen]);\n\n  // Close on escape\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') onClose();\n    };\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [onClose]);\n\n  if (!isOpen) return null;\n\n  return createPortal(\n    <div className=\"fixed inset-0 z-50\">\n      {/* Backdrop */}\n      <div\n        className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\n        onClick={onClose}\n        aria-hidden=\"true\"\n      />\n\n      {/* Drawer */}\n      <div\n        className=\"absolute left-0 top-0 h-full w-[280px] max-w-[80vw]\n                   bg-leather-900 shadow-xl transform transition-transform\n                   animate-slide-in-left\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n      >\n        <div className=\"h-full overflow-y-auto pt-safe pb-safe\">\n          {children}\n        </div>\n      </div>\n    </div>,\n    document.body\n  );\n}\n```\n\n## Touch Gestures\n\n> **Full implementations in `references/gestures.md`**\n\n| Hook | Purpose |\n|------|---------|\n| `useSwipe()` | Directional swipe detection with configurable threshold |\n| `usePullToRefresh()` | Pull-to-refresh with visual feedback and resistance |\n\n**Quick usage:**\n\n```tsx\n// Swipe to dismiss\nconst { handleTouchStart, handleTouchEnd } = useSwipe({\n  onSwipeLeft: () => dismiss(),\n  threshold: 50,\n});\n\n// Pull to refresh\nconst { containerRef, pullDistance, isRefreshing, handlers } = \n  usePullToRefresh(async () => await refetchData());\n```\n\n## Mobile Performance\n\n### Image Optimization\n\n```tsx\nimport Image from 'next/image';\n\n// Responsive images with proper sizing\n<Image\n  src=\"/hero.jpg\"\n  alt=\"Hero\"\n  fill\n  sizes=\"(max-width: 768px) 100vw, 50vw\"\n  priority // For above-the-fold images\n  className=\"object-cover\"\n/>\n\n// Lazy load below-fold images\n<Image\n  src=\"/feature.jpg\"\n  alt=\"Feature\"\n  width={400}\n  height={300}\n  loading=\"lazy\"\n/>\n```\n\n### Reduce Bundle Size\n\n```tsx\n// Dynamic imports for heavy components\nconst HeavyChart = dynamic(() => import('@/components/Chart'), {\n  loading: () => <ChartSkeleton />,\n  ssr: false, // Skip server render for client-only\n});\n\n// Lazy load below-fold sections\nconst Comments = dynamic(() => import('@/components/Comments'));\n```\n\n### Skeleton Screens (Not Spinners)\n\n```tsx\n// Skeleton that matches final content layout\nfunction MeetingCardSkeleton() {\n  return (\n    <div className=\"p-4 bg-leather-800 rounded-lg animate-pulse\">\n      <div className=\"h-4 bg-leather-700 rounded w-3/4 mb-2\" />\n      <div className=\"h-3 bg-leather-700 rounded w-1/2 mb-4\" />\n      <div className=\"flex gap-2\">\n        <div className=\"h-6 w-16 bg-leather-700 rounded\" />\n        <div className=\"h-6 w-16 bg-leather-700 rounded\" />\n      </div>\n    </div>\n  );\n}\n\n// Usage\n{isLoading ? (\n  <div className=\"space-y-4\">\n    {[...Array(5)].map((_, i) => <MeetingCardSkeleton key={i} />)}\n  </div>\n) : (\n  meetings.map(m => <MeetingCard key={m.id} meeting={m} />)\n)}\n```\n\n## Responsive Patterns\n\n### Tailwind Breakpoint Strategy\n\n```\nsm: 640px   - Large phones (landscape)\nmd: 768px   - Tablets\nlg: 1024px  - Small laptops\nxl: 1280px  - Desktops\n2xl: 1536px - Large screens\n```\n\n```tsx\n// Mobile: stack, Tablet+: side-by-side\n<div className=\"flex flex-col md:flex-row gap-4\">\n  <aside className=\"w-full md:w-64\">Sidebar</aside>\n  <main className=\"flex-1\">Content</main>\n</div>\n\n// Mobile: bottom nav, Desktop: sidebar\n<nav className=\"md:hidden fixed bottom-0 left-0 right-0\">\n  <BottomNav />\n</nav>\n<aside className=\"hidden md:block w-64\">\n  <SidebarNav />\n</aside>\n```\n\n### Container Queries (CSS-only Responsive Components)\n\n```css\n/* Component responds to its container, not viewport */\n@container (min-width: 400px) {\n  .card { flex-direction: row; }\n}\n```\n\n```tsx\n<div className=\"@container\">\n  <div className=\"flex flex-col @md:flex-row\">\n    {/* Responds to parent container width */}\n  </div>\n</div>\n```\n\n## Testing on Real Devices\n\n### Chrome DevTools Mobile Emulation\n1. Open DevTools (F12)\n2. Toggle device toolbar (Ctrl+Shift+M)\n3. Select device or set custom dimensions\n4. **Throttle network/CPU** for realistic performance\n\n### Must-Test Scenarios\n- [ ] Content doesn't get cut off by notch/home indicator\n- [ ] Touch targets are at least 44×44px\n- [ ] Scrolling is smooth (no jank)\n- [ ] Bottom nav doesn't block content\n- [ ] Forms work with virtual keyboard visible\n- [ ] Landscape orientation works\n- [ ] Pull-to-refresh doesn't fight with scroll\n\n### BrowserStack/Real Device Testing\n```bash\n# Expose local dev server to internet\nnpx localtunnel --port 3000\n# or\nngrok http 3000\n```\n\n## Quick Reference\n\n| Issue | Solution |\n|-------|----------|\n| Content cut off at bottom | Use `100dvh` instead of `100vh` |\n| Notch overlaps content | Add `pt-safe` / `pb-safe` |\n| Touch targets too small | Min 44×44px |\n| Scroll locked | Check `overflow: hidden` on body |\n| Keyboard covers input | Use `visualViewport` API |\n| Janky scrolling | Use `will-change: transform` |\n| Double-tap zoom | Add `touch-action: manipulation` |\n\n## References\n\nSee `/references/` for detailed guides:\n- `keyboard-handling.md` - Virtual keyboard and form UX\n- `animations.md` - Touch-friendly animations\n- `accessibility.md` - Mobile a11y requirements\n"
    }
  ]
}