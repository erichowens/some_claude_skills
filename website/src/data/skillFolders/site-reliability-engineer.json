{
  "name": "site-reliability-engineer",
  "type": "folder",
  "path": "site-reliability-engineer",
  "children": [
    {
      "name": "scripts",
      "type": "folder",
      "path": "site-reliability-engineer/scripts",
      "children": [
        {
          "name": "validate-brackets.js",
          "type": "file",
          "path": "site-reliability-engineer/scripts/validate-brackets.js",
          "size": 1808,
          "content": "#!/usr/bin/env node\nconst fs = require('fs');\n\nfunction validateBrackets(filePath) {\n  const content = fs.readFileSync(filePath, 'utf8');\n  const lines = content.split('\\n');\n  const errors = [];\n\n  let inCodeBlock = false;\n\n  lines.forEach((line, idx) => {\n    if (line.trim().startsWith('```')) {\n      inCodeBlock = !inCodeBlock;\n      return;\n    }\n    if (inCodeBlock) return;\n\n    // Check for unescaped < followed by digit or > followed by digit\n    const lessThanMatch = line.match(/<(\\d+)/);\n    const greaterThanMatch = line.match(/>(\\d+)/);\n\n    if (lessThanMatch && !line.includes('&lt;')) {\n      errors.push({\n        line: idx + 1,\n        text: lessThanMatch[0],\n        fix: lessThanMatch[0].replace('<', '&lt;')\n      });\n    }\n\n    if (greaterThanMatch && !line.includes('&gt;')) {\n      errors.push({\n        line: idx + 1,\n        text: greaterThanMatch[0],\n        fix: greaterThanMatch[0].replace('>', '&gt;')\n      });\n    }\n  });\n\n  return errors;\n}\n\nconst files = process.argv.slice(2);\nlet totalErrors = 0;\n\nif (files.length === 0) {\n  console.error('Usage: validate-brackets.js <file1.md> [file2.md...]');\n  process.exit(1);\n}\n\nfiles.forEach(file => {\n  if (!fs.existsSync(file)) {\n    console.error(`File not found: ${file}`);\n    return;\n  }\n\n  const errors = validateBrackets(file);\n  if (errors.length > 0) {\n    console.error(`‚ùå ${file}:`);\n    errors.forEach(err => {\n      console.error(`   Line ${err.line}: \"${err.text}\" ‚Üí \"${err.fix}\"`);\n    });\n    totalErrors += errors.length;\n  }\n});\n\nif (totalErrors > 0) {\n  console.error(`\\n‚ùå Found ${totalErrors} unescaped angle bracket(s)`);\n  console.error(`\\nReplace < with &lt; and > with &gt; in markdown text`);\n  process.exit(1);\n} else {\n  console.log('‚úÖ No unescaped angle brackets found');\n  process.exit(0);\n}\n"
        },
        {
          "name": "validate-liquid.js",
          "type": "file",
          "path": "site-reliability-engineer/scripts/validate-liquid.js",
          "size": 1962,
          "content": "#!/usr/bin/env node\nconst fs = require('fs');\nconst glob = require('glob');\n\n// Detect unescaped Liquid template syntax in MDX files\nfunction validateLiquid(filePath) {\n  const content = fs.readFileSync(filePath, 'utf8');\n  const lines = content.split('\\n');\n  const errors = [];\n\n  let inCodeBlock = false;\n  let inFrontmatter = false;\n\n  lines.forEach((line, idx) => {\n    // Track code blocks\n    if (line.trim().startsWith('```')) {\n      inCodeBlock = !inCodeBlock;\n      return;\n    }\n\n    // Track frontmatter\n    if (line.trim() === '---') {\n      inFrontmatter = !inFrontmatter;\n      return;\n    }\n\n    // Skip if in code block or frontmatter\n    if (inCodeBlock || inFrontmatter) return;\n\n    // Check for unescaped Liquid syntax\n    const liquidMatch = line.match(/\\{\\{[^`].*?\\}\\}/);\n    if (liquidMatch && !line.includes('{`{{')) {\n      errors.push({\n        line: idx + 1,\n        column: line.indexOf(liquidMatch[0]) + 1,\n        text: liquidMatch[0],\n        suggestion: `{\\\\`${liquidMatch[0]}\\\\`}`\n      });\n    }\n  });\n\n  return errors;\n}\n\n// Process files\nconst files = process.argv.slice(2);\nlet totalErrors = 0;\n\nif (files.length === 0) {\n  console.error('Usage: validate-liquid.js <file1.md> [file2.md...]');\n  process.exit(1);\n}\n\nfiles.forEach(file => {\n  if (!fs.existsSync(file)) {\n    console.error(`File not found: ${file}`);\n    return;\n  }\n\n  const errors = validateLiquid(file);\n  if (errors.length > 0) {\n    console.error(`‚ùå ${file}:`);\n    errors.forEach(err => {\n      console.error(`   Line ${err.line}:${err.column}: ${err.text}`);\n      console.error(`   Fix: ${err.suggestion}`);\n    });\n    totalErrors += errors.length;\n  }\n});\n\nif (totalErrors > 0) {\n  console.error(`\\n‚ùå Found ${totalErrors} Liquid syntax error(s)`);\n  console.error(`\\nTo fix automatically, wrap {{ ... }} in MDX expression: {\\\\`{{ ... }}\\\\`}`);\n  process.exit(1);\n} else {\n  console.log('‚úÖ No Liquid syntax errors found');\n  process.exit(0);\n}\n"
        },
        {
          "name": "validate-skill-props.js",
          "type": "file",
          "path": "site-reliability-engineer/scripts/validate-skill-props.js",
          "size": 2242,
          "content": "#!/usr/bin/env node\nconst fs = require('fs');\n\nfunction validateSkillHeader(filePath) {\n  const content = fs.readFileSync(filePath, 'utf8');\n  const errors = [];\n\n  // Find SkillHeader component usage\n  const headerMatch = content.match(/<SkillHeader[\\s\\S]*?\\/>/);\n  if (!headerMatch) return errors;\n\n  const headerText = headerMatch[0];\n  const lines = content.split('\\n');\n  const lineNum = lines.findIndex(l => l.includes('<SkillHeader')) + 1;\n\n  // Check for correct prop: fileName (not skillId)\n  if (headerText.includes('skillId=')) {\n    errors.push({\n      line: lineNum,\n      issue: 'Uses \"skillId\" prop instead of \"fileName\"',\n      fix: 'Change skillId=\"...\" to fileName=\"...\"'\n    });\n  }\n\n  // Check for removed props (difficulty, category, tags)\n  const deprecatedProps = ['difficulty', 'category', 'tags'];\n  deprecatedProps.forEach(prop => {\n    if (headerText.includes(`${prop}=`)) {\n      errors.push({\n        line: lineNum,\n        issue: `Uses deprecated \"${prop}\" prop`,\n        fix: `Remove ${prop} prop (only use: skillName, fileName, description)`\n      });\n    }\n  });\n\n  // Check for required props\n  if (!headerText.includes('skillName=')) {\n    errors.push({\n      line: lineNum,\n      issue: 'Missing required \"skillName\" prop'\n    });\n  }\n\n  if (!headerText.includes('fileName=')) {\n    errors.push({\n      line: lineNum,\n      issue: 'Missing required \"fileName\" prop'\n    });\n  }\n\n  return errors;\n}\n\nconst files = process.argv.slice(2);\nlet totalErrors = 0;\n\nif (files.length === 0) {\n  console.error('Usage: validate-skill-props.js <file1.md> [file2.md...]');\n  process.exit(1);\n}\n\nfiles.forEach(file => {\n  if (!fs.existsSync(file)) {\n    console.error(`File not found: ${file}`);\n    return;\n  }\n\n  const errors = validateSkillHeader(file);\n  if (errors.length > 0) {\n    console.error(`‚ùå ${file}:`);\n    errors.forEach(err => {\n      console.error(`   Line ${err.line}: ${err.issue}`);\n      if (err.fix) console.error(`   Fix: ${err.fix}`);\n    });\n    totalErrors += errors.length;\n  }\n});\n\nif (totalErrors > 0) {\n  console.error(`\\n‚ùå Found ${totalErrors} SkillHeader prop error(s)`);\n  process.exit(1);\n} else {\n  console.log('‚úÖ SkillHeader props validated successfully');\n  process.exit(0);\n}\n"
        }
      ]
    },
    {
      "name": "SKILL.md",
      "type": "file",
      "path": "site-reliability-engineer/SKILL.md",
      "size": 20711,
      "content": "---\nname: site-reliability-engineer\ndescription: Docusaurus build health validation and deployment safety for Claude Skills showcase. Pre-commit MDX validation (Liquid syntax, angle brackets, prop mismatches), pre-build link checking, post-build health reports. Activate on \"build errors\", \"commit hooks\", \"deployment safety\", \"site health\", \"MDX validation\". NOT for general DevOps, Kubernetes, cloud infrastructure, or non-Docusaurus projects.\nallowed-tools: Read,Write,Edit,Bash,Grep,Glob\n---\n\n# Site Reliability Engineer\n\nExpert in Docusaurus build health, MDX validation, and deployment safety for the Claude Skills showcase website. Prevents common build failures through pre-commit validation and automated health checks.\n\n## When to Use\n\n‚úÖ **Use for:**\n- Pre-commit validation of markdown/MDX files\n- Catching Liquid template syntax errors before build\n- Validating SkillHeader component prop usage\n- Checking for missing hero images or ZIP files\n- Running pre-build link validation\n- Post-build health reports\n- Installing git hooks for automated checks\n- Diagnosing Docusaurus build failures\n\n‚ùå **NOT for:**\n- General DevOps (use deployment-engineer)\n- Kubernetes/cloud infrastructure (use kubernetes-architect)\n- Non-Docusaurus static sites\n- Runtime monitoring/alerting (use observability-engineer)\n- Database migrations (use database-migrations agents)\n- Security scanning (use security-auditor)\n\n## Core Expertise\n\n### Problem Domain: Docusaurus Build Failures\n\nFrom recent debugging sessions, we've encountered these **recurring anti-patterns**:\n\n1. **Liquid Template Syntax in Code Examples**\n   - {`{{ variable }}`} in Vue/Handlebars examples gets interpreted as Liquid\n   - Breaks MDX compilation\n   - Fix: Wrap in MDX expression syntax {`{`{{ variable }}`}`}\n\n2. **Unescaped Angle Brackets in Markdown**\n   - `&lt;70` in headings/text parsed as incomplete HTML tag\n   - Causes \"Unexpected character\" MDX errors\n   - Fix: Escape with HTML entities `&lt;70`\n\n3. **Component Prop Mismatches**\n   - SkillHeader expects `fileName` but receives `skillId`\n   - Causes SSG build failure with \"Cannot read properties of undefined\"\n   - Fix: Use correct prop names, validate against component interface\n\n4. **Missing Critical Files**\n   - Skills without hero images or ZIP downloads\n   - Skills not in `website/src/data/skills.ts` (INVISIBLE on site!)\n   - Broken internal links to non-existent pages\n\n5. **Cache Corruption**\n   - Stale Webpack/Docusaurus cache causing phantom errors\n   - TypeScript errors from cached builds\n   - Fix: Clear `.docusaurus`, `build`, `node_modules/.cache`\n\n## Shibboleths: Expert vs Novice\n\n**Novice approach**:\n- \"Let's add more comprehensive testing\"\n- Focuses on post-build validation\n- Runs full build to check for errors (slow)\n- Doesn't understand MDX vs Markdown differences\n\n**Expert approach**:\n- \"Prevent at commit time, validate before expensive build\"\n- Pre-commit hooks catch 90% of issues in &lt;5 seconds\n- Knows Liquid syntax precedence rules in MDX\n- Understands SSG vs SSR error context\n- Uses targeted validation (grep patterns, not full AST parsing)\n\n## Quick Start\n\n### Install Hooks (One-Time Setup)\n\n```bash\n# Run from project root\nnpm run install-hooks\n\n# This creates:\n# - .git/hooks/pre-commit (MDX validation)\n# - package.json scripts: prebuild, postbuild\n```\n\n### Manual Validation\n\n```bash\n# Check all markdown for Liquid syntax issues\nnpm run validate:liquid\n\n# Check for unescaped angle brackets\nnpm run validate:brackets\n\n# Validate SkillHeader props across all docs\nnpm run validate:props\n\n# Full pre-build validation\nnpm run validate:all\n```\n\n## Pre-Commit Validation\n\n### What Gets Checked\n\n1. **Liquid Template Syntax** (Fast: &lt;1s)\n   - Scan modified `.md` files for {`{{ ... }}`} outside code blocks\n   - Detect unescaped Liquid in Vue/Handlebars examples\n   - Auto-fix available: wrap in MDX expression syntax\n\n2. **Angle Bracket Escaping** (Fast: &lt;1s)\n   - Find `<\\d` (angle bracket + digit) in markdown text\n   - Find comparison operators in headings (`&lt;70`, `&gt;2 pages`)\n   - Auto-fix: Replace with HTML entities\n\n3. **SkillHeader Prop Validation** (Fast: &lt;2s)\n   - Extract all `<SkillHeader .../>` component uses\n   - Verify prop names match component interface\n   - Check: `fileName` exists, `skillId` doesn't, `difficulty`/`category`/`tags` removed\n\n4. **Required Files Check** (Fast: &lt;1s)\n   - For new skills: Hero image must exist\n   - For new skills: ZIP must exist or be generatable\n   - For new skills: Entry in `skills.ts` required\n\n### Hook Installation Script\n\n**File**: `.git/hooks/pre-commit` (auto-generated)\n\n```bash\n#!/bin/bash\n# Auto-generated by site-reliability-engineer skill\n# DO NOT EDIT MANUALLY - regenerate with: npm run install-hooks\n\necho \"üîç Running pre-commit validation...\"\n\n# Get list of staged .md files\nSTAGED_MD=$(git diff --cached --name-only --diff-filter=ACM | grep '\\.md$' || true)\n\nif [ -z \"$STAGED_MD\" ]; then\n  echo \"‚úÖ No markdown files to validate\"\n  exit 0\nfi\n\n# Run validation scripts\nnode scripts/validate-liquid.js $STAGED_MD || exit 1\nnode scripts/validate-brackets.js $STAGED_MD || exit 1\nnode scripts/validate-skill-props.js $STAGED_MD || exit 1\n\necho \"‚úÖ Pre-commit validation passed\"\nexit 0\n```\n\n## Pre-Build Validation\n\nRuns before expensive Docusaurus build (`npm run build`).\n\n### What Gets Checked\n\n1. **Internal Link Validation** (Medium: ~10s)\n   - Parse all markdown files for internal links\n   - Verify targets exist (files, anchors)\n   - Report broken links with file:line\n\n2. **Skills Data Completeness** (Fast: &lt;3s)\n   - Every skill folder ‚Üí entry in `skills.ts`?\n   - Every `skills.ts` entry ‚Üí documentation file?\n   - Every skill ‚Üí hero image + ZIP?\n\n3. **TypeScript Compilation** (Medium: ~15s)\n   - Run `tsc --noEmit` to catch type errors\n   - Prevents SSG failures from type mismatches\n\n4. **Image Optimization Check** (Fast: &lt;5s)\n   - Hero images under 1MB threshold\n   - All images web-optimized (not raw PNG/TIFF)\n\n### npm Script Integration\n\n**File**: `package.json` (add these scripts)\n\n```json\n{\n  \"scripts\": {\n    \"prebuild\": \"node scripts/pre-build-validation.js\",\n    \"postbuild\": \"node scripts/post-build-health-check.js\",\n    \"validate:liquid\": \"node scripts/validate-liquid.js 'website/docs/**/*.md'\",\n    \"validate:brackets\": \"node scripts/validate-brackets.js 'website/docs/**/*.md'\",\n    \"validate:props\": \"node scripts/validate-skill-props.js 'website/docs/skills/*.md'\",\n    \"validate:links\": \"node scripts/validate-internal-links.js\",\n    \"validate:all\": \"npm run validate:liquid && npm run validate:brackets && npm run validate:props && npm run validate:links\",\n    \"install-hooks\": \"node scripts/install-git-hooks.js\"\n  }\n}\n```\n\n## Post-Build Health Check\n\nRuns after successful build, generates health report.\n\n### Metrics Collected\n\n1. **Build Size Analysis**\n   - Bundle size (client/server)\n   - Alert if &gt;10MB increase\n   - Track per-page bundle size\n\n2. **Broken Link Detection**\n   - Docusaurus warns about broken links\n   - Parse warnings, generate report\n   - Categorize: internal vs external\n\n3. **Performance Estimates**\n   - Lighthouse scores (if configured)\n   - Bundle parse/execution time estimates\n\n4. **Health Report Output**\n\n**File**: `website/.build-health.json`\n\n```json\n{\n  \"timestamp\": \"2025-11-26T05:00:00Z\",\n  \"build\": {\n    \"success\": true,\n    \"duration_ms\": 45328,\n    \"bundle_size_mb\": 8.2,\n    \"warnings\": 3,\n    \"errors\": 0\n  },\n  \"broken_links\": {\n    \"count\": 2,\n    \"details\": [\n      {\n        \"file\": \"docs/skills/cv_creator.md\",\n        \"line\": 393,\n        \"target\": \"/planning/cv-creator-architecture.md\",\n        \"type\": \"internal\"\n      }\n    ]\n  },\n  \"skills\": {\n    \"total\": 40,\n    \"with_hero_images\": 40,\n    \"with_zips\": 40,\n    \"in_skills_ts\": 40\n  },\n  \"recommendation\": \"Fix 2 broken internal links before deployment\"\n}\n```\n\n## Common Anti-Patterns\n\n### Anti-Pattern: Full Build for Validation\n\n**What it looks like**:\n```bash\n# Checking for errors...\nnpm run build  # Takes 2-3 minutes\n```\n\n**Why it's wrong**:\n- Expensive (minutes vs seconds)\n- Slow feedback loop\n- Doesn't prevent commit of broken code\n- Cache issues mask real errors\n\n**What to do instead**:\n```bash\n# Fast pre-commit validation\nnpm run validate:all  # &lt;30 seconds\n# Only build if validation passes\n```\n\n**Detection**: Pre-commit hook missing or disabled\n\n### Anti-Pattern: Manual Cache Clearing\n\n**What it looks like**:\n```bash\n# Build failing, let me try clearing cache\nrm -rf .docusaurus build node_modules/.cache\nnpm run build\n```\n\n**Why it's wrong**:\n- Reactive, not proactive\n- Manual process (forgotten)\n- Doesn't address root cause\n\n**What to do instead**:\n```bash\n# Auto-detect cache issues\nnpm run clean-build  # Script that clears cache THEN builds\n# Or: Post-build health check detects cache corruption signs\n```\n\n### Anti-Pattern: Ignoring Build Warnings\n\n**What it looks like**:\n```\n[WARNING] Broken link: /docs/skills/nonexistent\n[SUCCESS] Build completed\n# \"Success! Ship it!\"\n```\n\n**Why it's wrong**:\n- Broken links = poor UX\n- Warnings often indicate real issues\n- Accumulates technical debt\n\n**What to do instead**:\n```bash\n# Post-build validation fails on warnings\nnpm run postbuild  # Exits non-zero if broken links > 0\n```\n\n### Anti-Pattern: Regex for MDX Parsing\n\n**What it looks like**:\n```javascript\n// Check for Liquid syntax\nconst liquidPattern = /\\{\\{.*?\\}\\}/g;\nif (content.match(liquidPattern)) {\n  throw new Error(\"Liquid syntax detected!\");\n}\n```\n\n**Why it's wrong**:\n- False positives in code blocks\n- Doesn't understand MDX context\n- Misses escaped syntax\n\n**What to do instead**:\n```javascript\n// Context-aware detection\nconst lines = content.split('\\n');\nlet inCodeBlock = false;\nfor (const line of lines) {\n  if (line.trim().startsWith('```')) inCodeBlock = !inCodeBlock;\n  if (inCodeBlock) continue;  // Skip code blocks\n  if (line.includes('{{') && !line.includes('{`{{')) {\n    // Found unescaped Liquid outside code block\n  }\n}\n```\n\n## Validation Scripts (Working Code)\n\n### Script 1: Liquid Syntax Validator\n\n**File**: `scripts/validate-liquid.js`\n\n```javascript\n#!/usr/bin/env node\nconst fs = require('fs');\nconst glob = require('glob');\n\n// Detect unescaped Liquid template syntax in MDX files\nfunction validateLiquid(filePath) {\n  const content = fs.readFileSync(filePath, 'utf8');\n  const lines = content.split('\\n');\n  const errors = [];\n\n  let inCodeBlock = false;\n  let inFrontmatter = false;\n\n  lines.forEach((line, idx) => {\n    // Track code blocks\n    if (line.trim().startsWith('```')) {\n      inCodeBlock = !inCodeBlock;\n      return;\n    }\n\n    // Track frontmatter\n    if (line.trim() === '---') {\n      inFrontmatter = !inFrontmatter;\n      return;\n    }\n\n    // Skip if in code block or frontmatter\n    if (inCodeBlock || inFrontmatter) return;\n\n    // Check for unescaped Liquid syntax\n    const liquidMatch = line.match(/\\{\\{[^`].*?\\}\\}/);\n    if (liquidMatch && !line.includes('{`{{')) {\n      errors.push({\n        line: idx + 1,\n        column: line.indexOf(liquidMatch[0]) + 1,\n        text: liquidMatch[0],\n        suggestion: `{\\\\`${liquidMatch[0]}\\\\`}`\n      });\n    }\n  });\n\n  return errors;\n}\n\n// Process files\nconst files = process.argv.slice(2);\nlet totalErrors = 0;\n\nfiles.forEach(file => {\n  const errors = validateLiquid(file);\n  if (errors.length > 0) {\n    console.error(`‚ùå ${file}:`);\n    errors.forEach(err => {\n      console.error(`   Line ${err.line}:${err.column}: ${err.text}`);\n      console.error(`   Fix: ${err.suggestion}`);\n    });\n    totalErrors += errors.length;\n  }\n});\n\nif (totalErrors > 0) {\n  console.error(`\\n‚ùå Found ${totalErrors} Liquid syntax error(s)`);\n  console.error(`\\nRun: npm run fix:liquid (to auto-fix)`);\n  process.exit(1);\n} else {\n  console.log('‚úÖ No Liquid syntax errors found');\n  process.exit(0);\n}\n```\n\n### Script 2: Angle Bracket Validator\n\n**File**: `scripts/validate-brackets.js`\n\n```javascript\n#!/usr/bin/env node\nconst fs = require('fs');\n\nfunction validateBrackets(filePath) {\n  const content = fs.readFileSync(filePath, 'utf8');\n  const lines = content.split('\\n');\n  const errors = [];\n\n  let inCodeBlock = false;\n\n  lines.forEach((line, idx) => {\n    if (line.trim().startsWith('```')) {\n      inCodeBlock = !inCodeBlock;\n      return;\n    }\n    if (inCodeBlock) return;\n\n    // Check for unescaped < followed by digit or > followed by digit\n    const lessThanMatch = line.match(/<(\\d+)/);\n    const greaterThanMatch = line.match(/>(\\d+)/);\n\n    if (lessThanMatch && !line.includes('&lt;')) {\n      errors.push({\n        line: idx + 1,\n        text: lessThanMatch[0],\n        fix: lessThanMatch[0].replace('<', '&lt;')\n      });\n    }\n\n    if (greaterThanMatch && !line.includes('&gt;')) {\n      errors.push({\n        line: idx + 1,\n        text: greaterThanMatch[0],\n        fix: greaterThanMatch[0].replace('>', '&gt;')\n      });\n    }\n  });\n\n  return errors;\n}\n\nconst files = process.argv.slice(2);\nlet totalErrors = 0;\n\nfiles.forEach(file => {\n  const errors = validateBrackets(file);\n  if (errors.length > 0) {\n    console.error(`‚ùå ${file}:`);\n    errors.forEach(err => {\n      console.error(`   Line ${err.line}: \"${err.text}\" ‚Üí \"${err.fix}\"`);\n    });\n    totalErrors += errors.length;\n  }\n});\n\nif (totalErrors > 0) {\n  console.error(`\\n‚ùå Found ${totalErrors} unescaped angle bracket(s)`);\n  process.exit(1);\n} else {\n  console.log('‚úÖ No unescaped angle brackets found');\n  process.exit(0);\n}\n```\n\n### Script 3: SkillHeader Prop Validator\n\n**File**: `scripts/validate-skill-props.js`\n\n```javascript\n#!/usr/bin/env node\nconst fs = require('fs');\n\nfunction validateSkillHeader(filePath) {\n  const content = fs.readFileSync(filePath, 'utf8');\n  const errors = [];\n\n  // Find SkillHeader component usage\n  const headerMatch = content.match(/<SkillHeader[\\s\\S]*?\\/>/);\n  if (!headerMatch) return errors;\n\n  const headerText = headerMatch[0];\n  const lines = content.split('\\n');\n  const lineNum = lines.findIndex(l => l.includes('<SkillHeader')) + 1;\n\n  // Check for correct prop: fileName (not skillId)\n  if (headerText.includes('skillId=')) {\n    errors.push({\n      line: lineNum,\n      issue: 'Uses \"skillId\" prop instead of \"fileName\"',\n      fix: 'Change skillId=\"...\" to fileName=\"...\"'\n    });\n  }\n\n  // Check for removed props (difficulty, category, tags)\n  const deprecatedProps = ['difficulty', 'category', 'tags'];\n  deprecatedProps.forEach(prop => {\n    if (headerText.includes(`${prop}=`)) {\n      errors.push({\n        line: lineNum,\n        issue: `Uses deprecated \"${prop}\" prop`,\n        fix: `Remove ${prop} prop (only use: skillName, fileName, description)`\n      });\n    }\n  });\n\n  // Check for required props\n  if (!headerText.includes('skillName=')) {\n    errors.push({\n      line: lineNum,\n      issue: 'Missing required \"skillName\" prop'\n    });\n  }\n\n  if (!headerText.includes('fileName=')) {\n    errors.push({\n      line: lineNum,\n      issue: 'Missing required \"fileName\" prop'\n    });\n  }\n\n  return errors;\n}\n\nconst files = process.argv.slice(2);\nlet totalErrors = 0;\n\nfiles.forEach(file => {\n  const errors = validateSkillHeader(file);\n  if (errors.length > 0) {\n    console.error(`‚ùå ${file}:`);\n    errors.forEach(err => {\n      console.error(`   Line ${err.line}: ${err.issue}`);\n      if (err.fix) console.error(`   Fix: ${err.fix}`);\n    });\n    totalErrors += errors.length;\n  }\n});\n\nif (totalErrors > 0) {\n  console.error(`\\n‚ùå Found ${totalErrors} SkillHeader prop error(s)`);\n  process.exit(1);\n} else {\n  console.log('‚úÖ SkillHeader props validated successfully');\n  process.exit(0);\n}\n```\n\n## Hook Installation\n\n### Auto-Install Script\n\n**File**: `scripts/install-git-hooks.js`\n\n```javascript\n#!/usr/bin/env node\nconst fs = require('fs');\nconst path = require('path');\n\nconst HOOK_SCRIPT = `#!/bin/bash\n# Auto-generated by site-reliability-engineer skill\n# Regenerate with: npm run install-hooks\n\necho \"üîç Running pre-commit validation...\"\n\n# Get staged .md files\nSTAGED_MD=$(git diff --cached --name-only --diff-filter=ACM | grep '\\\\.md$' || true)\n\nif [ -z \"$STAGED_MD\" ]; then\n  echo \"‚úÖ No markdown files to validate\"\n  exit 0\nfi\n\n# Run validations\ncd website\nnpm run validate:liquid $STAGED_MD || exit 1\nnpm run validate:brackets $STAGED_MD || exit 1\nnpm run validate:props $STAGED_MD || exit 1\n\necho \"‚úÖ Pre-commit validation passed\"\nexit 0\n`;\n\nconst hookPath = path.join(process.cwd(), '.git/hooks/pre-commit');\n\n// Write hook\nfs.writeFileSync(hookPath, HOOK_SCRIPT, { mode: 0o755 });\nconsole.log('‚úÖ Installed pre-commit hook at .git/hooks/pre-commit');\n\n// Add npm scripts if not present\nconst packageJsonPath = path.join(process.cwd(), 'website/package.json');\nconst packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8'));\n\nconst scriptsToAdd = {\n  'validate:liquid': 'node scripts/validate-liquid.js',\n  'validate:brackets': 'node scripts/validate-brackets.js',\n  'validate:props': 'node scripts/validate-skill-props.js',\n  'validate:all': 'npm run validate:liquid && npm run validate:brackets && npm run validate:props',\n  'prebuild': 'npm run validate:all',\n};\n\nlet added = false;\nObject.entries(scriptsToAdd).forEach(([name, script]) => {\n  if (!packageJson.scripts[name]) {\n    packageJson.scripts[name] = script;\n    added = true;\n    console.log(`‚úÖ Added npm script: ${name}`);\n  }\n});\n\nif (added) {\n  fs.writeFileSync(packageJsonPath, JSON.stringify(packageJson, null, 2));\n  console.log('‚úÖ Updated package.json with validation scripts');\n}\n\nconsole.log('\\nüéâ Hook installation complete!');\nconsole.log('\\nTest with: npm run validate:all');\n```\n\n## Configuration\n\n**File**: `website/.site-reliability.config.json`\n\n```json\n{\n  \"validation\": {\n    \"liquid\": {\n      \"enabled\": true,\n      \"autoFix\": false,\n      \"ignorePatterns\": [\"**/*.example.md\"]\n    },\n    \"brackets\": {\n      \"enabled\": true,\n      \"autoFix\": true\n    },\n    \"skillProps\": {\n      \"enabled\": true,\n      \"requiredProps\": [\"skillName\", \"fileName\", \"description\"],\n      \"deprecatedProps\": [\"difficulty\", \"category\", \"tags\"]\n    }\n  },\n  \"thresholds\": {\n    \"bundleSizeMB\": 10,\n    \"brokenLinksMax\": 0,\n    \"imageMaxSizeKB\": 1024\n  },\n  \"hooks\": {\n    \"preCommit\": true,\n    \"preBuild\": true,\n    \"postBuild\": true\n  }\n}\n```\n\n## Troubleshooting\n\n### Issue: Hook Not Running\n\n**Symptom**: Commit succeeds with invalid markdown\n\n**Diagnosis**:\n```bash\nls -la .git/hooks/pre-commit\n# Should show executable permissions\n```\n\n**Fix**:\n```bash\nchmod +x .git/hooks/pre-commit\n# Or reinstall: npm run install-hooks\n```\n\n### Issue: False Positives\n\n**Symptom**: Validation fails on correct code\n\n**Diagnosis**: Check if pattern is in code block\n```bash\n# Manually review file\n# Verify code blocks are properly marked with ```\n```\n\n**Fix**: Add to ignore patterns in config, or fix detection logic\n\n### Issue: Slow Validation\n\n**Symptom**: Pre-commit takes &gt;10 seconds\n\n**Diagnosis**:\n```bash\ntime npm run validate:all\n# Identify slow script\n```\n\n**Fix**: Optimize glob patterns, add file count limits\n\n## Integration with CI/CD\n\n### GitHub Actions Workflow\n\n```yaml\nname: Build Health Check\non: [push, pull_request]\n\njobs:\n  validate:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n\n      - name: Install dependencies\n        run: cd website && npm ci\n\n      - name: Run pre-build validation\n        run: cd website && npm run validate:all\n\n      - name: Build\n        run: cd website && npm run build\n\n      - name: Post-build health check\n        run: cd website && npm run postbuild\n\n      - name: Upload health report\n        uses: actions/upload-artifact@v3\n        with:\n          name: build-health\n          path: website/.build-health.json\n```\n\n## Evolution Timeline\n\n**2024 Early**: Manual debugging of build errors, no validation\n\n**2024 Mid**: Post-build error detection, manual cache clearing\n\n**2024 Late**: Recognition of recurring anti-patterns (Liquid, brackets)\n\n**2025 Current**: Pre-commit validation, automated health checks, this skill\n\n**Watch For**: Docusaurus v4 changes to MDX parsing, new component patterns\n\n## Success Metrics\n\nAfter installing this skill's hooks:\n- **Build failure rate**: Reduce from 15% ‚Üí &lt;2%\n- **Time to diagnose errors**: Reduce from 10min ‚Üí &lt;1min\n- **False commit rate**: &lt;5% (commits that pass hooks but fail CI)\n- **Validation speed**: &lt;30 seconds for typical commit\n\n---\n\n**This skill prevents**: Liquid syntax errors | Angle bracket MDX failures | Component prop mismatches | Missing skill assets | Broken internal links\n\n**Use with**: skill-documentarian (for skill sync) | docusaurus-expert (for advanced config)\n"
    }
  ]
}