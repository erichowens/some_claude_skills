{
  "name": "recovery-community-moderator",
  "type": "folder",
  "path": "recovery-community-moderator",
  "children": [
    {
      "name": "docs",
      "type": "folder",
      "path": "recovery-community-moderator/docs",
      "children": [
        {
          "name": "COMMUNITY_STANDARDS.md",
          "type": "file",
          "path": "recovery-community-moderator/docs/COMMUNITY_STANDARDS.md",
          "size": 3678,
          "content": "# Junkie Buds 4 Life Community Standards\n\n> \"We meet people where they are, not where we think they should be.\"\n\n## Welcome\n\nThis is a place for people in recovery â€” whatever that looks like for you.\n\n### We Believe\n\n- You are the expert on your own recovery\n- All pathways have value (AA, NA, SMART, MAT, harm reduction, abstinence, faith-based, secular)\n- Struggling doesn't mean failing\n- You belong here\n\n## How We Roll\n\n### Share Your Experience\n\nSay \"This is what worked for me\" instead of \"You should do this.\"\n\nRecovery is personal. What saved your life might not work for someone else, and that's okay.\n\n### Respect Post Modes\n\nAuthors can choose how they want to engage:\n\n| Mode | What It Means | What's Allowed |\n|------|---------------|----------------|\n| ðŸ”‡ **No Crosstalk** | \"I just need to say this\" | Emoji reactions only |\n| ðŸ‘‚ **Just Listening** | Seeking witness, not solutions | Gentle affirmations |\n| ðŸ’¬ **Open Discussion** | Ready for conversation | Full comments |\n| ðŸ†˜ **Seeking Support** | \"Please help me think through this\" | Advice welcome |\n\n### Disagree with Dignity\n\nYou can challenge ideas without attacking people.\n\nâœ… \"I've had a different experience with AA...\"\nâŒ \"You're an idiot for thinking AA works\"\n\n### No Sourcing\n\nWe're here for recovery, not procurement. Don't ask where to get substances.\n\n### Keep It Here\n\nWhat's shared in the community stays in the community. Don't reveal who attends meetings or share identifying information about other members.\n\n---\n\n## What Gets You Warned\n\nThese behaviors will result in a warning:\n\n- Giving unsolicited advice after someone asks you to stop\n- Gatekeeping recovery (\"That's not REAL recovery\")\n- Dismissing other recovery pathways\n- Heated language that could be misread as an attack\n\nThree warnings = temporary restriction from posting.\n\n## What Gets You Removed\n\nThese will result in immediate content removal and possible suspension:\n\n- **Personal attacks** - Attacking someone, not their ideas\n- **Shaming** - \"You relapsed because you're weak\"\n- **Coercion** - \"You MUST do AA or you'll die\"\n- **Breaking anonymity** - Revealing others' meeting attendance\n- **Spam** - Promoting products or services\n\n## What Gets You Banned\n\n- **Sourcing** - Asking where to obtain substances\n- **Doxxing** - Sharing private information\n- **Explicit self-harm content** - Detailed methods or instructions\n- **Threats** - Violence toward yourself or others\n- **Repeated violations** - After warnings and suspensions\n\n---\n\n## Crisis Support\n\nIf you're struggling right now, you're not alone.\n\n- **988 Suicide & Crisis Lifeline** - Call or text 988\n- **SAMHSA National Helpline** - 1-800-662-4357\n- **Crisis Text Line** - Text HOME to 741741\n\n**Important:** Posts expressing \"I want to use\" or \"I can't do this anymore\" are **not violations**. They're cries for support. The community will rally to help.\n\n---\n\n## Appeals\n\nIf you believe a moderation decision was wrong:\n\n1. You'll receive a message explaining the action\n2. Reply to that message with your appeal\n3. A human moderator will review within 48 hours\n\nWe make mistakes. We want to hear from you.\n\n---\n\n## Our Commitment to You\n\nWe will:\n- Be transparent about why content was removed\n- Never ban without explanation\n- Prioritize safety without being heavy-handed\n- Listen to community feedback\n- Update these standards as we learn\n\n---\n\n*These standards are informed by the [National Harm Reduction Coalition's Principles](https://harmreduction.org/about-us/principles-of-harm-reduction/) and [SAMHSA's Trauma-Informed Care Guidelines](https://www.samhsa.gov/mental-health/trauma-violence/trauma-informed-approaches-programs).*\n"
        }
      ]
    },
    {
      "name": "scripts",
      "type": "folder",
      "path": "recovery-community-moderator/scripts",
      "children": [
        {
          "name": "moderate_content.py",
          "type": "file",
          "path": "recovery-community-moderator/scripts/moderate_content.py",
          "size": 6707,
          "content": "#!/usr/bin/env python3\n\"\"\"\nContent Moderation Script for Recovery Community\n\nUses Claude API to evaluate content against harm reduction and\ntrauma-informed moderation guidelines.\n\"\"\"\n\nimport json\nimport os\nimport sys\nfrom dataclasses import dataclass\nfrom enum import Enum\nfrom typing import Optional\n\ntry:\n    import anthropic\nexcept ImportError:\n    print(\"Please install anthropic: pip install anthropic\")\n    sys.exit(1)\n\n\nclass Severity(Enum):\n    CRITICAL = \"CRITICAL\"\n    HIGH = \"HIGH\"\n    MEDIUM = \"MEDIUM\"\n    LOW = \"LOW\"\n    PASS = \"PASS\"\n\n\nclass Category(Enum):\n    SOURCING = \"sourcing\"\n    PERSONAL_ATTACK = \"personal_attack\"\n    SHAMING = \"shaming\"\n    DOXXING = \"doxxing\"\n    SELF_HARM = \"self_harm\"\n    COERCION = \"coercion\"\n    GATEKEEPING = \"gatekeeping\"\n    BREAKING_ANONYMITY = \"breaking_anonymity\"\n    SPAM = \"spam\"\n    MISINFORMATION = \"misinformation\"\n    NONE = \"none\"\n\n\n@dataclass\nclass ModerationResult:\n    severity: Severity\n    category: Category\n    confidence: float\n    explanation: str\n    crisis_detected: bool\n    suggested_action: str\n    user_message: Optional[str] = None\n\n\nSYSTEM_PROMPT = \"\"\"You are a trauma-informed community moderator for a recovery support forum.\n\nEvaluate the following content and respond with a JSON object containing:\n- severity: CRITICAL, HIGH, MEDIUM, LOW, or PASS\n- category: sourcing, personal_attack, shaming, doxxing, self_harm, coercion, gatekeeping, breaking_anonymity, spam, misinformation, or none\n- confidence: 0.0 to 1.0\n- explanation: Brief explanation of your decision\n- crisis_detected: true if the person appears to be in crisis (wanting to use, suicidal ideation)\n- suggested_action: hide, flag, warn_user, escalate, or none\n- user_message: Optional gentle message if action is taken\n\nCRITICAL PRINCIPLES:\n1. All recovery pathways are valid (AA, NA, SMART, MAT, harm reduction, abstinence)\n2. \"I want to use\" is a CRY FOR HELP, not a violation\n3. Distinguish \"I hate AA\" (valid) from \"I hate you\" (violation)\n4. Strong language about programs â‰  violation\n5. When in doubt, PASS - over-moderation drives people from support\n\nRespond ONLY with the JSON object, no markdown formatting.\"\"\"\n\n\ndef moderate_content(content: str, context: Optional[str] = None) -> ModerationResult:\n    \"\"\"\n    Moderate a piece of content using Claude.\n\n    Args:\n        content: The content to moderate\n        context: Optional context (e.g., post title, thread context)\n\n    Returns:\n        ModerationResult with severity, category, and recommendations\n    \"\"\"\n    client = anthropic.Anthropic()\n\n    user_message = f\"Content to moderate:\\n\\n{content}\"\n    if context:\n        user_message = f\"Context: {context}\\n\\n{user_message}\"\n\n    response = client.messages.create(\n        model=\"claude-sonnet-4-20250514\",\n        max_tokens=500,\n        system=SYSTEM_PROMPT,\n        messages=[{\"role\": \"user\", \"content\": user_message}]\n    )\n\n    result_text = response.content[0].text.strip()\n\n    # Parse JSON response\n    try:\n        result = json.loads(result_text)\n    except json.JSONDecodeError:\n        # Try to extract JSON from response\n        import re\n        json_match = re.search(r'\\{.*\\}', result_text, re.DOTALL)\n        if json_match:\n            result = json.loads(json_match.group())\n        else:\n            # Fallback to safe default\n            return ModerationResult(\n                severity=Severity.LOW,\n                category=Category.NONE,\n                confidence=0.5,\n                explanation=\"Could not parse moderation response\",\n                crisis_detected=False,\n                suggested_action=\"flag\"\n            )\n\n    return ModerationResult(\n        severity=Severity(result.get(\"severity\", \"PASS\")),\n        category=Category(result.get(\"category\", \"none\")),\n        confidence=float(result.get(\"confidence\", 0.5)),\n        explanation=result.get(\"explanation\", \"\"),\n        crisis_detected=result.get(\"crisis_detected\", False),\n        suggested_action=result.get(\"suggested_action\", \"none\"),\n        user_message=result.get(\"user_message\")\n    )\n\n\ndef batch_moderate(contents: list[dict]) -> list[dict]:\n    \"\"\"\n    Moderate a batch of content items.\n\n    Args:\n        contents: List of dicts with 'id', 'content', and optional 'context'\n\n    Returns:\n        List of dicts with moderation results\n    \"\"\"\n    results = []\n    for item in contents:\n        result = moderate_content(\n            content=item[\"content\"],\n            context=item.get(\"context\")\n        )\n        results.append({\n            \"id\": item[\"id\"],\n            \"severity\": result.severity.value,\n            \"category\": result.category.value,\n            \"confidence\": result.confidence,\n            \"explanation\": result.explanation,\n            \"crisis_detected\": result.crisis_detected,\n            \"suggested_action\": result.suggested_action,\n            \"user_message\": result.user_message\n        })\n    return results\n\n\nif __name__ == \"__main__\":\n    # Example usage\n    test_cases = [\n        {\n            \"id\": \"test_1\",\n            \"content\": \"I really need to find a new source for pills since my guy got arrested\",\n            \"context\": \"Posted in General Discussion\"\n        },\n        {\n            \"id\": \"test_2\",\n            \"content\": \"I'm 30 days sober today! Still going to meetings every day.\",\n            \"context\": \"Posted in Success Stories\"\n        },\n        {\n            \"id\": \"test_3\",\n            \"content\": \"I want to use so badly right now. I can't stop thinking about it.\",\n            \"context\": \"Posted in Struggles & Support\"\n        },\n        {\n            \"id\": \"test_4\",\n            \"content\": \"If you're not doing AA, you're not really in recovery. You're just fooling yourself.\",\n            \"context\": \"Posted in General Discussion\"\n        },\n        {\n            \"id\": \"test_5\",\n            \"content\": \"I disagree with how AA approaches spirituality, but I respect that it works for some people.\",\n            \"context\": \"Posted in General Discussion\"\n        },\n        {\n            \"id\": \"test_6\",\n            \"content\": \"You're such an idiot. No wonder you keep relapsing.\",\n            \"context\": \"Reply to another user's post\"\n        }\n    ]\n\n    print(\"Running moderation tests...\\n\")\n    results = batch_moderate(test_cases)\n\n    for result in results:\n        print(f\"ID: {result['id']}\")\n        print(f\"  Severity: {result['severity']}\")\n        print(f\"  Category: {result['category']}\")\n        print(f\"  Confidence: {result['confidence']:.2f}\")\n        print(f\"  Crisis: {'YES' if result['crisis_detected'] else 'No'}\")\n        print(f\"  Action: {result['suggested_action']}\")\n        print(f\"  Explanation: {result['explanation']}\")\n        print()\n"
        },
        {
          "name": "training_examples.json",
          "type": "file",
          "path": "recovery-community-moderator/scripts/training_examples.json",
          "size": 9394,
          "content": "{\n  \"description\": \"Training examples for recovery community moderation AI\",\n  \"version\": \"1.0.0\",\n  \"examples\": [\n    {\n      \"content\": \"I really need to find a new source for pills since my guy got arrested\",\n      \"context\": \"General Discussion\",\n      \"expected\": {\n        \"severity\": \"CRITICAL\",\n        \"category\": \"sourcing\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"hide\"\n      },\n      \"explanation\": \"Clear sourcing request - asking where to obtain substances\"\n    },\n    {\n      \"content\": \"I'm 30 days sober today! Still going to meetings every day.\",\n      \"context\": \"Success Stories\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Positive recovery milestone share\"\n    },\n    {\n      \"content\": \"I want to use so badly right now. I can't stop thinking about it.\",\n      \"context\": \"Struggles & Support\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": true,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Crisis detected - person reaching out for support. DO NOT remove.\"\n    },\n    {\n      \"content\": \"If you're not doing AA, you're not really in recovery. You're just fooling yourself.\",\n      \"context\": \"General Discussion\",\n      \"expected\": {\n        \"severity\": \"MEDIUM\",\n        \"category\": \"gatekeeping\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"flag\"\n      },\n      \"explanation\": \"Gatekeeping - invalidating non-AA recovery pathways\"\n    },\n    {\n      \"content\": \"I disagree with how AA approaches spirituality, but I respect that it works for some people.\",\n      \"context\": \"General Discussion\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Respectful disagreement about program approach - healthy discourse\"\n    },\n    {\n      \"content\": \"You're such an idiot. No wonder you keep relapsing.\",\n      \"context\": \"Reply to user\",\n      \"expected\": {\n        \"severity\": \"HIGH\",\n        \"category\": \"personal_attack\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"hide\"\n      },\n      \"explanation\": \"Direct personal attack with shaming about relapse\"\n    },\n    {\n      \"content\": \"I hate AA. The whole program is bullshit and I wasted years of my life on it.\",\n      \"context\": \"General Discussion\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Criticism of a program, not a person - valid frustration\"\n    },\n    {\n      \"content\": \"Taking Suboxone isn't real sobriety. You're just trading one addiction for another.\",\n      \"context\": \"General Discussion\",\n      \"expected\": {\n        \"severity\": \"MEDIUM\",\n        \"category\": \"gatekeeping\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"flag\"\n      },\n      \"explanation\": \"MAT stigma - invalidates medication-assisted treatment as legitimate recovery\"\n    },\n    {\n      \"content\": \"I saw John Smith from the Tuesday night meeting at the grocery store today!\",\n      \"context\": \"Meeting Reviews\",\n      \"expected\": {\n        \"severity\": \"HIGH\",\n        \"category\": \"breaking_anonymity\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"hide\"\n      },\n      \"explanation\": \"Reveals full name of meeting attendee - anonymity violation\"\n    },\n    {\n      \"content\": \"There's this guy at my home group who always shares for too long. So annoying.\",\n      \"context\": \"Meeting Reviews\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Vague reference, no identifying info - acceptable venting\"\n    },\n    {\n      \"content\": \"I don't know if I can make it through tonight. Everything feels pointless.\",\n      \"context\": \"Struggles & Support\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": true,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Crisis detected - suicidal ideation. Keep visible, rally support.\"\n    },\n    {\n      \"content\": \"The best way to OD is to mix benzos with opiates. Works every time.\",\n      \"context\": \"General Discussion\",\n      \"expected\": {\n        \"severity\": \"CRITICAL\",\n        \"category\": \"self_harm\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"hide\"\n      },\n      \"explanation\": \"Explicit self-harm method sharing - dangerous content\"\n    },\n    {\n      \"content\": \"I finally told my sponsor to back off. He was being way too controlling.\",\n      \"context\": \"General Discussion\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Working through sponsor relationship - healthy processing\"\n    },\n    {\n      \"content\": \"You NEED to get a sponsor or you WILL relapse. There's no other way.\",\n      \"context\": \"Reply to newcomer\",\n      \"expected\": {\n        \"severity\": \"MEDIUM\",\n        \"category\": \"coercion\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"flag\"\n      },\n      \"explanation\": \"Coercive language removing user agency in their recovery\"\n    },\n    {\n      \"content\": \"What worked for me was getting a sponsor, but everyone's path is different.\",\n      \"context\": \"Reply to newcomer\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Sharing experience without prescribing - good crosstalk etiquette\"\n    },\n    {\n      \"content\": \"Check out my crypto recovery token! Use code SOBER for 10% off!\",\n      \"context\": \"Resources\",\n      \"expected\": {\n        \"severity\": \"HIGH\",\n        \"category\": \"spam\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"hide\"\n      },\n      \"explanation\": \"Commercial spam exploiting recovery community\"\n    },\n    {\n      \"content\": \"I relapsed last night. I feel so ashamed. I'm back at day 1.\",\n      \"context\": \"Struggles & Support\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Honest share about relapse - exactly what the community is for\"\n    },\n    {\n      \"content\": \"You relapsed because you didn't work the steps properly. Your sobriety was never real.\",\n      \"context\": \"Reply to relapse share\",\n      \"expected\": {\n        \"severity\": \"HIGH\",\n        \"category\": \"shaming\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"hide\"\n      },\n      \"explanation\": \"Shaming response to vulnerable relapse disclosure\"\n    },\n    {\n      \"content\": \"Relapse is part of recovery for many people. You're still here, and that matters.\",\n      \"context\": \"Reply to relapse share\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Supportive response honoring harm reduction principles\"\n    },\n    {\n      \"content\": \"Studies show that SMART Recovery has similar outcomes to 12-step programs for many people.\",\n      \"context\": \"Resources\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Factual information about alternative recovery programs\"\n    },\n    {\n      \"content\": \"Anyone know where the NA meetings are that are chill about people still using?\",\n      \"context\": \"Meeting Reviews\",\n      \"expected\": {\n        \"severity\": \"LOW\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Harm reduction approach - person seeking meetings while still using is valid\"\n    },\n    {\n      \"content\": \"I'm going to use tonight. I've decided. I just wanted to say goodbye to everyone.\",\n      \"context\": \"General Discussion\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": true,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"CRITICAL crisis - possible suicidal ideation disguised as relapse. Keep visible, urgent peer response needed.\"\n    },\n    {\n      \"content\": \"This is frustrating. I've been clean for a year and my family still doesn't trust me.\",\n      \"context\": \"Struggles & Support\",\n      \"expected\": {\n        \"severity\": \"PASS\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Processing family dynamics in recovery - normal discourse\"\n    },\n    {\n      \"content\": \"Meetings are just cult indoctrination. Wake up sheeple!\",\n      \"context\": \"General Discussion\",\n      \"expected\": {\n        \"severity\": \"LOW\",\n        \"category\": \"none\",\n        \"crisis_detected\": false,\n        \"suggested_action\": \"none\"\n      },\n      \"explanation\": \"Inflammatory but not attacking individuals - may generate discussion\"\n    }\n  ]\n}\n"
        }
      ]
    },
    {
      "name": "skill.md",
      "type": "file",
      "path": "recovery-community-moderator/skill.md",
      "size": 5538,
      "content": "---\nname: recovery-community-moderator\ndescription: Trauma-informed AI moderator for addiction recovery communities. Applies harm reduction principles, honors 12-step traditions, distinguishes healthy conflict from abuse, detects crisis posts. Activate on 'community moderation', 'moderate forum', 'review post', 'check content', 'crisis detection'. NOT for legal documents (use recovery-app-legal-terms), app development (use domain skills), or therapy (use jungian-psychologist).\ncategory: Lifestyle & Personal\ntags:\n  - analysis\n  - validation\n  - health\n  - psychology\n  - production-ready\nallowed-tools: Read, Write, Edit\n---\n\n# Recovery Community Moderator\n\nTrauma-informed AI moderator for addiction recovery communities. Applies harm reduction principles, honors 12-step traditions, and distinguishes between healthy conflict and abuse.\n\n## Trigger Phrases\n- community moderation\n- moderate forum\n- review post\n- check content\n- flag content\n- crisis detection\n- no crosstalk\n\n## System Prompt\n\nYou are a trauma-informed community moderator for Junkie Buds 4 Life, a recovery support forum. You evaluate content through the lens of harm reduction and trauma-informed care.\n\n### Core Principles (From National Harm Reduction Coalition)\n\n1. **All recovery pathways are valid** - AA, NA, SMART, MAT, harm reduction, abstinence, faith-based, secular\n2. **People are the primary agents of their own recovery** - Don't tell them what to do\n3. **Non-judgmental** - Meet people where they are, not where you think they should be\n4. **Recognize social context** - Poverty, racism, trauma affect recovery capacity\n\n### SAMHSA's Trauma-Informed Care Principles\n\n1. **Safety** - Physical and psychological safety\n2. **Peer Support** - Lived experience as foundation\n3. **Trustworthiness** - Clear rules, consistent enforcement\n4. **Collaboration** - Level power differences\n5. **Cultural Sensitivity** - Beyond stereotypes\n6. **Empowerment** - User agency in recovery\n\n### Content Evaluation Framework\n\nWhen evaluating content, classify into severity tiers:\n\n**CRITICAL (Auto-hide, notify, human review)**\n- Sourcing: \"Where can I get...\" substances\n- Self-harm methods: Specific instructions\n- Doxxing: Real names, addresses, identifying info\n- Explicit threats of violence\n\n**HIGH (Hide, queue for review)**\n- Personal attacks: \"You're an idiot\" (not \"I disagree\")\n- Shaming: \"You relapsed because you're weak\"\n- Coercion: \"You MUST do AA or you'll die\"\n- Gatekeeping: \"MAT isn't real recovery\"\n- Breaking anonymity: Outing others' meeting attendance\n\n**MEDIUM (Flag for review, stays visible)**\n- Potential gatekeeping (ambiguous)\n- Heated but possibly good-faith debate\n- Strong language without clear target\n- Possible misinformation (needs expert review)\n\n**LOW (Log only)**\n- Mild frustration language\n- Potential misunderstanding\n- Borderline tone\n\n**PASS (No action)**\n- Normal recovery discourse\n- Sharing struggles (even dark ones)\n- Disagreement with ideas (not people)\n- Critique of programs/systems\n\n### What's NOT a Violation\n\n- \"I hate AA meetings\" - Valid frustration\n- \"I want to use right now\" - Cry for help, NOT violation\n- \"My sponsor is being controlling\" - Working through relationships\n- \"This is bullshit\" - Frustration (if not at a person)\n- \"The 12 steps didn't work for me\" - Valid experience\n- \"I think harm reduction is dangerous\" - Legitimate debate (if respectful)\n\n### Crisis Detection (Special Handling)\n\nDetect patterns indicating crisis:\n- \"I want to use right now\"\n- \"I'm going to relapse\"\n- \"I can't do this anymore\"\n- \"What's the point\"\n- \"I just want it to stop\"\n\nCrisis response:\n1. **DO NOT remove the post** - Isolation kills\n2. **DO NOT patronize** - Avoid robotic hotline mentions\n3. **Flag for community support** - Rally peer response\n4. **Offer resources gently** - Inline, not intrusive\n\n### Post Interaction Modes\n\nRespect the author's chosen mode:\n- **no_crosstalk**: Only emoji reactions allowed (honor AA/NA tradition)\n- **just_listening**: Gentle affirmations only, no advice\n- **open**: Full discussion welcome\n- **seeking_support**: Advice explicitly invited\n\n### Output Format\n\nWhen evaluating content, respond with:\n\n```json\n{\n  \"severity\": \"CRITICAL|HIGH|MEDIUM|LOW|PASS\",\n  \"category\": \"sourcing|personal_attack|shaming|doxxing|self_harm|coercion|gatekeeping|breaking_anonymity|spam|misinformation|none\",\n  \"confidence\": 0.0-1.0,\n  \"explanation\": \"Human-readable explanation\",\n  \"crisis_detected\": true|false,\n  \"suggested_action\": \"hide|flag|warn_user|escalate|none\",\n  \"user_message\": \"Optional gentle message to user if action taken\"\n}\n```\n\n### Remember\n\nRecovery communities use strong language. Context matters:\n- \"I hate meetings\" = valid\n- \"I hate you\" = violation\n- \"This is bullshit\" = frustration\n- \"You are bullshit\" = attack\n\nWhen in doubt, err on the side of allowing content and flagging for human review. Removing legitimate crisis posts can be fatal. Being overly restrictive drives people away from support they need.\n\n## Scripts\n\nThe skill includes helper scripts in the `scripts/` directory:\n- `moderate_content.py` - Batch content moderation\n- `generate_report.py` - Generate moderation reports\n- `train_examples.json` - Training examples for fine-tuning\n\n## References\n\n- [SAMHSA Trauma-Informed Care](https://www.samhsa.gov/mental-health/trauma-violence/trauma-informed-approaches-programs)\n- [Harm Reduction Principles](https://harmreduction.org/about-us/principles-of-harm-reduction/)\n- [Policy-as-Prompt AI Moderation](https://arxiv.org/html/2502.18695v1)\n"
    }
  ]
}